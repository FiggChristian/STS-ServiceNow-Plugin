{"version":3,"file":"index.user.js","mappings":"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","sources":["webpack://sts-servicenow-plugin/./src/helpers/styles.scss","webpack://sts-servicenow-plugin/./src/macros/styles.scss","webpack://sts-servicenow-plugin/./src/markdown/styles.scss","webpack://sts-servicenow-plugin/./src/replacements/styles.scss","webpack://sts-servicenow-plugin/./src/smarttext/styles.scss?542f","webpack://sts-servicenow-plugin/./src/settings/styles.scss","webpack://sts-servicenow-plugin/./src/smarttext/styles.scss","webpack://sts-servicenow-plugin/./node_modules/css-loader/dist/runtime/api.js","webpack://sts-servicenow-plugin/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://sts-servicenow-plugin/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://sts-servicenow-plugin/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://sts-servicenow-plugin/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://sts-servicenow-plugin/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://sts-servicenow-plugin/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://sts-servicenow-plugin/./src/settings/styles.scss?0847","webpack://sts-servicenow-plugin/./src/smarttext/styles.scss?f235","webpack://sts-servicenow-plugin/webpack/bootstrap","webpack://sts-servicenow-plugin/webpack/runtime/compat get default export","webpack://sts-servicenow-plugin/webpack/runtime/define property getters","webpack://sts-servicenow-plugin/webpack/runtime/hasOwnProperty shorthand","webpack://sts-servicenow-plugin/webpack/runtime/make namespace object","webpack://sts-servicenow-plugin/webpack/runtime/nonce","webpack://sts-servicenow-plugin/./src/helpers/types.ts","webpack://sts-servicenow-plugin/./src/helpers/dedent.ts","webpack://sts-servicenow-plugin/./src/replacements/data.ts","webpack://sts-servicenow-plugin/./src/helpers/assertNotNull.ts","webpack://sts-servicenow-plugin/./src/helpers/isInstance.ts","webpack://sts-servicenow-plugin/./src/helpers/escapeCSSSelector.ts","webpack://sts-servicenow-plugin/./src/helpers/waitForElements.ts","webpack://sts-servicenow-plugin/./src/helpers/textareaData.ts","webpack://sts-servicenow-plugin/./src/helpers/makeElement.ts","webpack://sts-servicenow-plugin/./src/helpers/escapeHTML.ts","webpack://sts-servicenow-plugin/./src/macros/types.ts","webpack://sts-servicenow-plugin/./src/helpers/styles.scss?f884","webpack://sts-servicenow-plugin/./src/helpers/calculateTextPosition.ts","webpack://sts-servicenow-plugin/./src/helpers/setInputs.ts","webpack://sts-servicenow-plugin/./src/helpers/wait.ts","webpack://sts-servicenow-plugin/./src/helpers/withMaxTimeout.ts","webpack://sts-servicenow-plugin/./src/helpers/index.ts","webpack://sts-servicenow-plugin/./src/helpers/joinObjects.ts","webpack://sts-servicenow-plugin/./src/config.ts","webpack://sts-servicenow-plugin/./node_modules/marked/lib/marked.esm.js","webpack://sts-servicenow-plugin/./src/markdown/styles.scss?fbf4","webpack://sts-servicenow-plugin/./src/smarttext/styles.scss?437d","webpack://sts-servicenow-plugin/./src/smarttext/index.ts","webpack://sts-servicenow-plugin/./src/markdown/index.ts","webpack://sts-servicenow-plugin/./src/autocomplete/index.ts","webpack://sts-servicenow-plugin/./src/replacements/styles.scss?df7b","webpack://sts-servicenow-plugin/./src/replacements/index.ts","webpack://sts-servicenow-plugin/./src/macros/data.ts","webpack://sts-servicenow-plugin/./src/macros/styles.scss?d2f8","webpack://sts-servicenow-plugin/./src/macros/index.ts","webpack://sts-servicenow-plugin/./src/mydevices/index.ts","webpack://sts-servicenow-plugin/./src/settings/injector.ts","webpack://sts-servicenow-plugin/./src/netdb/index.ts","webpack://sts-servicenow-plugin/./src/dhcplog/index.ts","webpack://sts-servicenow-plugin/./src/settings/types.ts","webpack://sts-servicenow-plugin/./src/helpers/deepObject.ts","webpack://sts-servicenow-plugin/./src/settings/index.ts","webpack://sts-servicenow-plugin/./src/settings/page.html","webpack://sts-servicenow-plugin/./src/index.user.ts"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sts-service-now-plugin-textarea-mirror{opacity:0;pointer-events:none;position:fixed;top:200vh;left:200vw;white-space:pre-wrap}.sts-service-now-plugin-textarea-tooltip{position:absolute;top:1px;right:1px;display:flex;align-items:center;padding:.2em .4em !important;width:initial !important;height:initial !important;min-height:initial !important;border-top-width:0;border-right-width:0;border-top-left-radius:0;border-bottom-right-radius:0;font-size:13px !important}.sts-service-now-plugin-textarea-tooltip button{height:18px;width:18px;padding:0;margin-right:.444em;display:inline-flex;justify-content:center;align-items:center;font-size:90%}textarea[data-sts-service-now-plugin-has-sub-bar=true]:not(:read-only){border-bottom-right-radius:0 !important;border-bottom-left-radius:0 !important}textarea[data-sts-service-now-plugin-has-sub-bar=true] ~ .sts-service-now-plugin-textarea-sub-bar{display:flex;border-top-right-radius:0 !important;border-top-left-radius:0 !important;border-top:0 !important;padding:3px 0 3px 6px !important;justify-content:flex-end;height:initial !important}textarea[data-sts-service-now-plugin-has-sub-bar=true]:read-only ~ .sts-service-now-plugin-textarea-sub-bar,textarea:not([data-sts-service-now-plugin-has-sub-bar=true]) ~ .sts-service-now-plugin-textarea-sub-bar{display:none !important}.sts-service-now-plugin-textarea-sub-bar>*{margin:0 !important;margin-right:6px !important}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/helpers/styles.scss\"],\"names\":[],\"mappings\":\"AAQA,wCACI,SAAU,CACV,mBAAoB,CACpB,cAAe,CACf,SAAU,CACV,UAAW,CACX,oBAAqB,CACxB,yCAGG,iBAAkB,CAClB,OAAQ,CACR,SAAU,CACV,YAAa,CACb,kBAAmB,CACnB,4BAA6B,CAC7B,wBAAyB,CACzB,yBAA0B,CAC1B,6BAA8B,CAC9B,kBAAmB,CACnB,oBAAqB,CACrB,wBAAyB,CACzB,4BAA6B,CAC7B,yBAA0B,CAC7B,gDAGG,WAAY,CACZ,UAAW,CACX,SAAU,CACV,mBAAoB,CACpB,mBAAoB,CACpB,sBAAuB,CACvB,kBAAmB,CACnB,aAAc,CACjB,uEAGG,uCAAwC,CACxC,sCAAuC,CAC1C,kGAGG,YAAa,CACb,oCAAqC,CACrC,mCAAoC,CACpC,uBAAwB,CACxB,gCAAiC,CACjC,wBAAyB,CACzB,yBAA0B,CAC7B,oNAIG,uBAAwB,CAC3B,2CAGG,mBAAoB,CACpB,2BAA4B\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n@import '../constants.scss';\\n\\n.#{$EXTENSION_PREFIX}-textarea-mirror {\\n    opacity: 0;\\n    pointer-events: none;\\n    position: fixed;\\n    top: 200vh;\\n    left: 200vw;\\n    white-space: pre-wrap;\\n}\\n\\n.#{$EXTENSION_PREFIX}-textarea-tooltip {\\n    position: absolute;\\n    top: 1px;\\n    right: 1px;\\n    display: flex;\\n    align-items: center;\\n    padding: .2em .4em !important;\\n    width: initial !important;\\n    height: initial !important;\\n    min-height: initial !important;\\n    border-top-width: 0;\\n    border-right-width: 0;\\n    border-top-left-radius: 0;\\n    border-bottom-right-radius: 0;\\n    font-size: 13px !important;\\n}\\n\\n.#{$EXTENSION_PREFIX}-textarea-tooltip button {\\n    height: 18px;\\n    width: 18px;\\n    padding: 0;\\n    margin-right: .444em;\\n    display: inline-flex;\\n    justify-content: center;\\n    align-items: center;\\n    font-size: 90%;\\n}\\n\\ntextarea[data-#{$EXTENSION_PREFIX}-has-sub-bar=true]:not(:read-only) {\\n    border-bottom-right-radius: 0 !important;\\n    border-bottom-left-radius: 0 !important;\\n}\\n\\ntextarea[data-#{$EXTENSION_PREFIX}-has-sub-bar=true] ~ .#{$EXTENSION_PREFIX}-textarea-sub-bar {\\n    display: flex;\\n    border-top-right-radius: 0 !important;\\n    border-top-left-radius: 0 !important;\\n    border-top: 0 !important;\\n    padding: 3px 0 3px 6px !important;\\n    justify-content: flex-end;\\n    height: initial !important;\\n}\\n\\ntextarea[data-#{$EXTENSION_PREFIX}-has-sub-bar=true]:read-only ~ .#{$EXTENSION_PREFIX}-textarea-sub-bar,\\ntextarea:not([data-#{$EXTENSION_PREFIX}-has-sub-bar=true]) ~ .#{$EXTENSION_PREFIX}-textarea-sub-bar {\\n    display: none !important;\\n}\\n\\n.#{$EXTENSION_PREFIX}-textarea-sub-bar > * {\\n    margin: 0 !important;\\n    margin-right: 6px !important;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#sts-service-now-plugin-macros_modal .sn-widget-list-item.state-active .sn-widget-list-subtitle{color:inherit}#sts-service-now-plugin-macros_modal .sn-widget-list-item:last-of-type{border-bottom:0 !important}#sts-service-now-plugin-macros_modal .sn-widget-list-subtitle{white-space:normal}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-preview-header{margin-bottom:1em}#sts-service-now-plugin-macros_modal .sn-widget-list-content.sn-widget-list-content_static{padding:0;transform:scale(1.6);border-radius:50%}#sts-service-now-plugin-macros_modal .sn-widget-list-content.sn-widget-list-content_static .icon-preview{transform:scale(0.625);transition:transform .1s ease-in-out}#sts-service-now-plugin-macros_modal .sn-widget-list-content.sn-widget-list-content_static:hover .icon-preview,#sts-service-now-plugin-macros_modal .sn-widget-list-item.state-active .sn-widget-list-content.sn-widget-list-content_static .icon-preview{transform:scale(0.9)}#sts-service-now-plugin-macros_modal .col-sm-4,#sts-service-now-plugin-macros_modal .col-sm-8{transition:width 0.25s ease-in-out}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-preview-field-container:not(:last-of-type){margin-bottom:1em}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-preview-field-value{white-space:break-spaces;line-height:1.4;min-height:initial;height:initial;position:relative}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span{display:inline-block;position:relative;line-height:1.2}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span>span:nth-child(1){position:absolute;height:100%;width:100%;background:currentColor;opacity:0.075}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span>span:nth-child(2){position:absolute;height:100%;width:100%;border:1px solid currentColor;border-radius:3px;opacity:0.4}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span>span:nth-child(3){padding:1px 3px}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span>span:nth-child(3):before{content:\\\"\\\\200b\\\"}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span.sts-service-now-plugin-span-empty>span:nth-child(3){font-style:italic;opacity:0.7;position:relative;left:-1px}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-caret-position-span.sts-service-now-plugin-span-empty>span:nth-child(3):after{content:\\\"Cursor\\\"}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-preview-work_notes-value{border-top-left-radius:0;border-bottom-left-radius:0;border-left:0;margin-left:5px;width:calc(100% - 5px)}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-preview-work_notes-value:before{content:\\\"\\\";display:block;position:absolute;top:-1px;left:-5px;bottom:-1px;width:5px;background-color:rgba(255,215,0,0.8);transform:scaleX(-1);border-radius:inherit;border:inherit}#sts-service-now-plugin-macros_modal .sts-service-now-plugin-macro-list-flex{display:flex;flex-direction:column-reverse}#sts-service-now-plugin-macro-list{flex-basis:0;flex-grow:1;overflow:auto}#sts-service-now-plugin-macro-search-container{transform:scaleY(-1)}#sts-service-now-plugin-macro-search-container input{transform:scaleY(-1);display:block;width:100%}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/macros/styles.scss\"],\"names\":[],\"mappings\":\"AAQA,gGAGY,aAAc,CAH1B,uEAOY,0BAA2B,CAPvC,8DAYQ,kBAAmB,CAZ3B,4EAgBQ,iBAAkB,CAhB1B,2FAoBQ,SAAU,CACV,oBAAqB,CACrB,iBAAkB,CAtB1B,yGAyBY,sBAAsB,CACtB,oCAAqC,CA1BjD,0PAgCQ,oBAAoB,CAhC5B,8FAqCQ,kCAAmC,CArC3C,wGAyCQ,iBAAkB,CAzC1B,iFA6CQ,wBAAyB,CACzB,eAAgB,CAChB,kBAAmB,CACnB,cAAe,CACf,iBAAkB,CAjD1B,iFAqDQ,oBAAqB,CACrB,iBAAkB,CAClB,eAAgB,CAvDxB,mGA0DY,iBAAkB,CAClB,WAAY,CACZ,UAAW,CACX,uBAAwB,CACxB,aAAc,CA9D1B,mGAkEY,iBAAkB,CAClB,WAAY,CACZ,UAAW,CACX,6BAA8B,CAC9B,iBAAkB,CAClB,WAAY,CAvExB,mGA2EY,eAAgB,CA3E5B,0GA8EgB,eAAgB,CA9EhC,qIAmFY,iBAAkB,CAClB,WAAY,CACZ,iBAAkB,CAClB,SAAU,CAtFtB,2IAyFgB,gBAAiB,CAzFjC,sFA+FQ,wBAAyB,CACzB,2BAA4B,CAC5B,aAAc,CACd,eAAgB,CAChB,sBAAuB,CAnG/B,6FAsGY,UAAW,CACX,aAAc,CACd,iBAAkB,CAClB,QAAS,CACT,SAAU,CACV,WAAY,CACZ,SAAU,CACV,oCAAoC,CACpC,oBAAqB,CACrB,qBAAsB,CACtB,cAAe,CAhH3B,6EAqHQ,YAAa,CACb,6BAA8B,CACjC,mCAID,YAAa,CACb,WAAY,CACZ,aAAc,CACjB,+CAGG,oBAAqB,CADzB,qDAIQ,oBAAqB,CACrB,aAAc,CACd,UAAW\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n@import '../constants.scss';\\n\\n##{$EXTENSION_PREFIX}-macros_modal {\\n    .sn-widget-list-item {\\n        &.state-active .sn-widget-list-subtitle {\\n            color: inherit;\\n        }\\n\\n        &:last-of-type {\\n            border-bottom: 0 !important;\\n        }\\n    }\\n\\n    .sn-widget-list-subtitle {\\n        white-space: normal;\\n    }\\n\\n    .#{$EXTENSION_PREFIX}-preview-header {\\n        margin-bottom: 1em;\\n    }\\n\\n    .sn-widget-list-content.sn-widget-list-content_static {\\n        padding: 0;\\n        transform: scale(1.6);\\n        border-radius: 50%;\\n\\n        .icon-preview {\\n            transform: scale(.625);\\n            transition: transform .1s ease-in-out;\\n        }\\n    }\\n\\n    .sn-widget-list-content.sn-widget-list-content_static:hover .icon-preview,\\n    .sn-widget-list-item.state-active .sn-widget-list-content.sn-widget-list-content_static .icon-preview {\\n        transform: scale(.9);\\n    }\\n\\n    .col-sm-4,\\n    .col-sm-8 {\\n        transition: width 0.25s ease-in-out;\\n    }\\n\\n    .#{$EXTENSION_PREFIX}-preview-field-container:not(:last-of-type) {\\n        margin-bottom: 1em;\\n    }\\n\\n    .#{$EXTENSION_PREFIX}-preview-field-value {\\n        white-space: break-spaces;\\n        line-height: 1.4;\\n        min-height: initial;\\n        height: initial;\\n        position: relative;\\n    }\\n\\n    .#{$EXTENSION_PREFIX}-caret-position-span {\\n        display: inline-block;\\n        position: relative;\\n        line-height: 1.2;\\n\\n        > span:nth-child(1) {\\n            position: absolute;\\n            height: 100%;\\n            width: 100%;\\n            background: currentColor;\\n            opacity: 0.075;\\n        }\\n\\n        > span:nth-child(2) {\\n            position: absolute;\\n            height: 100%;\\n            width: 100%;\\n            border: 1px solid currentColor;\\n            border-radius: 3px;\\n            opacity: 0.4;\\n        }\\n    \\n        > span:nth-child(3) {\\n            padding: 1px 3px;\\n    \\n            &:before {\\n                content: \\\"\\\\200b\\\";\\n            }\\n        }\\n\\n        &.#{$EXTENSION_PREFIX}-span-empty > span:nth-child(3) {\\n            font-style: italic;\\n            opacity: 0.7;\\n            position: relative;\\n            left: -1px;\\n\\n            &:after {\\n                content: \\\"Cursor\\\";\\n            }\\n        }\\n    }\\n\\n    .#{$EXTENSION_PREFIX}-preview-work_notes-value {\\n        border-top-left-radius: 0;\\n        border-bottom-left-radius: 0;\\n        border-left: 0;\\n        margin-left: 5px;\\n        width: calc(100% - 5px);\\n\\n        &:before {\\n            content: \\\"\\\";\\n            display: block;\\n            position: absolute;\\n            top: -1px;\\n            left: -5px;\\n            bottom: -1px;\\n            width: 5px;\\n            background-color: rgba(255,215,0,.8); /* gold with 80% opacity */\\n            transform: scaleX(-1);\\n            border-radius: inherit;\\n            border: inherit;\\n        }\\n    }\\n\\n    .#{$EXTENSION_PREFIX}-macro-list-flex {\\n        display: flex;\\n        flex-direction: column-reverse;\\n    }\\n}\\n\\n##{$EXTENSION_PREFIX}-macro-list {\\n    flex-basis: 0;\\n    flex-grow: 1;\\n    overflow: auto;\\n}\\n\\n##{$EXTENSION_PREFIX}-macro-search-container {\\n    transform: scaleY(-1);\\n\\n    input {\\n        transform: scaleY(-1);\\n        display: block;\\n        width: 100%;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sts-service-now-plugin-markdown-previewer{overflow:visible !important;height:initial !important;border-bottom-right-radius:0 !important;border-bottom-left-radius:0 !important}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/markdown/styles.scss\"],\"names\":[],\"mappings\":\"AAQA,2CACI,2BAA4B,CAC5B,yBAA0B,CAC1B,uCAAwC,CACxC,sCAAuC\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n@import '../constants.scss';\\n\\n.#{$EXTENSION_PREFIX}-markdown-previewer {\\n    overflow: visible !important;\\n    height: initial !important;\\n    border-bottom-right-radius: 0 !important;\\n    border-bottom-left-radius: 0 !important;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sts-service-now-plugin-auto-filler{list-style:none;padding:0 !important;margin:0;overflow-y:auto !important;position:absolute !important;max-height:150px;width:260px;box-sizing:border-box;z-index:3}.sts-service-now-plugin-auto-filler li{position:relative;padding:1px 5px 0 10px;cursor:pointer;display:flex}.sts-service-now-plugin-auto-filler li .sn-card-component_accent-bar{border-top-left-radius:0;border-bottom-left-radius:0}.sts-service-now-plugin-auto-filler li .sn-card-component_accent-bar.sn-card-component_accent-bar_dark{z-index:1}.sts-service-now-plugin-auto-filler li:not(:first-child) .sn-card-component_accent-bar:before{content:\\\"\\\";position:absolute;top:0;left:0;height:1px;width:260px;background-color:inherit}.sts-service-now-plugin-auto-filler li:not(:last-child) .sn-card-component_accent-bar:after{content:\\\"\\\";position:absolute;bottom:-1px;left:0;height:1px;width:260px;background-color:inherit}.sts-service-now-plugin-auto-filler li strong{display:block;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.sts-service-now-plugin-auto-filler li small{color:#777;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"namespace\\\"]{padding:6px 5px 5px 10px}.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"namespace\\\"] strong{flex-grow:1;margin:0 5px}.sts-service-now-plugin-auto-filler li i{align-self:center}.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"replacement\\\"]>div:not(.sn-card-component_accent-bar){display:flex;flex-direction:column;flex-grow:1;flex-basis:0;overflow:hidden}.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"replacement\\\"] .icon-chevron-right{display:none}.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"replacement\\\"][data-sts-service-now-plugin-hovering=\\\"true\\\"] .icon-chevron-right,.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"replacement\\\"][data-sts-service-now-plugin-focusing=\\\"true\\\"] .icon-chevron-right,.sts-service-now-plugin-auto-filler li[data-sts-service-now-plugin-autofill-type=\\\"replacement\\\"][data-sts-service-now-plugin-artificial-focusing=\\\"true\\\"] .icon-chevron-right{display:block}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/replacements/styles.scss\"],\"names\":[],\"mappings\":\"AAQA,oCACI,eAAgB,CAChB,oBAAqB,CACrB,QAAS,CACT,0BAA2B,CAC3B,4BAA6B,CAC7B,gBAAiB,CACjB,WAAY,CACZ,qBAAsB,CACtB,SAAU,CACb,uCAEG,iBAAkB,CAClB,sBAAuB,CACvB,cAAe,CACf,YAAa,CAChB,qEAGG,wBAAyB,CACzB,2BAA4B,CAC/B,uGAGG,SAAU,CACb,8FAGG,UAAW,CACX,iBAAkB,CAClB,KAAM,CACN,MAAO,CACP,UAAW,CACX,WAAY,CACZ,wBAAyB,CAC5B,4FAGG,UAAW,CACX,iBAAkB,CAClB,WAAY,CACZ,MAAO,CACP,UAAW,CACX,WAAY,CACZ,wBAAyB,CAC5B,8CAGG,aAAc,CACd,sBAAuB,CACvB,kBAAmB,CACnB,eAAgB,CACnB,6CAGG,UAAW,CACX,sBAAuB,CACvB,kBAAmB,CACnB,eAAgB,CACnB,8FAGG,wBAAyB,CAC5B,qGAGG,WAAY,CACZ,YAAa,CAChB,yCAGG,iBAAkB,CACrB,uIAGG,YAAa,CACb,qBAAsB,CACtB,WAAY,CACZ,YAAa,CACb,eAAgB,CACnB,oHAGG,YAAa,CAChB,8eAKG,aAAc\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n@import '../constants.scss';\\n\\n.#{$EXTENSION_PREFIX}-auto-filler {\\n    list-style: none;\\n    padding: 0 !important;\\n    margin: 0;\\n    overflow-y: auto !important;\\n    position: absolute !important;\\n    max-height: 150px;\\n    width: 260px;\\n    box-sizing: border-box;\\n    z-index: 3;\\n}\\n.#{$EXTENSION_PREFIX}-auto-filler li {\\n    position: relative;\\n    padding: 1px 5px 0 10px;\\n    cursor: pointer;\\n    display: flex;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li .sn-card-component_accent-bar {\\n    border-top-left-radius: 0;\\n    border-bottom-left-radius: 0;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li .sn-card-component_accent-bar.sn-card-component_accent-bar_dark {\\n    z-index: 1;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li:not(:first-child) .sn-card-component_accent-bar:before {\\n    content: \\\"\\\";\\n    position: absolute;\\n    top: 0;\\n    left: 0;\\n    height: 1px;\\n    width: 260px;\\n    background-color: inherit;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li:not(:last-child) .sn-card-component_accent-bar:after {\\n    content: \\\"\\\";\\n    position: absolute;\\n    bottom: -1px;\\n    left: 0;\\n    height: 1px;\\n    width: 260px;\\n    background-color: inherit;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li strong {\\n    display: block;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    overflow: hidden;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li small {\\n    color: #777;\\n    text-overflow: ellipsis;\\n    white-space: nowrap;\\n    overflow: hidden;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"namespace\\\"] {\\n    padding: 6px 5px 5px 10px;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"namespace\\\"] strong {\\n    flex-grow: 1;\\n    margin: 0 5px;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li i {\\n    align-self: center;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"replacement\\\"] > div:not(.sn-card-component_accent-bar) {\\n    display: flex;\\n    flex-direction: column;\\n    flex-grow: 1;\\n    flex-basis: 0;\\n    overflow: hidden;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"replacement\\\"] .icon-chevron-right {\\n    display: none;\\n}\\n\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"replacement\\\"][data-#{$EXTENSION_PREFIX}-hovering=\\\"true\\\"] .icon-chevron-right,\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"replacement\\\"][data-#{$EXTENSION_PREFIX}-focusing=\\\"true\\\"] .icon-chevron-right,\\n.#{$EXTENSION_PREFIX}-auto-filler li[data-#{$EXTENSION_PREFIX}-autofill-type=\\\"replacement\\\"][data-#{$EXTENSION_PREFIX}-artificial-focusing=\\\"true\\\"] .icon-chevron-right {\\n    display: block;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sts-service-now-plugin-smart-text-icon{height:1em;vertical-align:-.15em;margin-right:.15em}.sts-service-now-plugin-smart-text-span{padding:.5rem;margin:-.5rem;z-index:1;position:relative;display:inline-block;line-height:1;text-align:left}.sts-service-now-plugin-smart-text-span:hover,.sts-service-now-plugin-smart-text-span:focus{padding:.75rem 1rem;margin:-.75rem -1rem;z-index:3}.sts-service-now-plugin-smart-text-span>input:first-child{position:absolute;opacity:0;pointer-events:none;white-space:nowrap;height:0;width:0}.sts-service-now-plugin-smart-text-span>span:last-child{position:relative;display:inline-block}.sts-service-now-plugin-smart-text-span>span:last-child>span:first-child{text-decoration:underline;margin:0;border:0;padding:0;font-family:inherit;font-size:inherit;font-weight:inherit;color:inherit;vertical-align:baseline;background:transparent;-webkit-user-select:all;user-select:all}.sts-service-now-plugin-smart-text-span:hover .sts-service-now-plugin-smart-text-popup,.sts-service-now-plugin-smart-text-span:focus .sts-service-now-plugin-smart-text-popup .sts-service-now-plugin-smart-text-span:focus-within .sts-service-now-plugin-smart-text-popup,.sts-service-now-plugin-smart-text-span>input:focus+span:last-child .sts-service-now-plugin-smart-text-popup{display:block}.sts-service-now-plugin-smart-text-popup{display:none;position:absolute;top:initial;bottom:calc(100% + .5rem);left:50%;background-color:white;border-radius:3px;border:1px solid #cbcbcb;font-size:13px;font-weight:initial;font-style:initial;text-decoration:initial;color:initial;width:140px;transform:translateX(-50%);padding:.25em 0;font-family:SourceSansPro, \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;margin:0 !important;line-height:1.15;list-style:none}.sts-service-now-plugin-smart-text-popup ul{list-style:none;padding:0;margin:0}.sts-service-now-plugin-smart-text-popup li{list-style:none;padding:.1em .25em !important;box-sizing:border-box;margin:0}.sts-service-now-plugin-smart-text-popup li ul{margin:-.25em}.sts-service-now-plugin-smart-text-popup li ul li{padding:.1em .25em 0 1.25em !important}.sts-service-now-plugin-smart-text-popup li ul li button,.sts-service-now-plugin-smart-text-popup li ul li a{margin:-.1em -.25em 0 -1.25em;padding:.1em .25em 0 1.25em !important;width:calc(100% + 1.5em)}.sts-service-now-plugin-smart-text-popup>li:first-child{font-weight:bold;text-transform:uppercase;font-size:.8em;letter-spacing:.25px;text-align:center}.sts-service-now-plugin-smart-text-popup button,.sts-service-now-plugin-smart-text-popup a{text-decoration:underline;color:inherit;margin:-.1em -.25em;border:0;border-radius:0;padding:.1em .25em !important;background:transparent;min-height:initial;min-width:initial;line-height:inherit;font-size:inherit;font-family:inherit;vertical-align:baseline;cursor:pointer;height:100%;width:calc(100% + .5em);display:inline-block;text-align:left;box-sizing:border-box}.sts-service-now-plugin-smart-text-popup button:hover,.sts-service-now-plugin-smart-text-popup button:focus,.sts-service-now-plugin-smart-text-popup a:hover,.sts-service-now-plugin-smart-text-popup a:focus{background-color:#e6e9eb;text-decoration:underline}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/smarttext/styles.scss\"],\"names\":[],\"mappings\":\"AAQA,wCACI,UAAW,CACX,qBAAsB,CACtB,kBAAmB,CACtB,wCAGG,aAAc,CACd,aAAc,CACd,SAAU,CACV,iBAAkB,CAClB,oBAAqB,CACrB,aAAc,CACd,eAAgB,CAPpB,4FAWQ,mBAAoB,CACpB,oBAAqB,CACrB,SAAU,CAblB,0DAiBQ,iBAAkB,CAClB,SAAU,CACV,mBAAoB,CACpB,kBAAmB,CACnB,QAAS,CACT,OAAQ,CAtBhB,wDA0BQ,iBAAkB,CAClB,oBAAqB,CA3B7B,yEA8BY,yBAA0B,CAC1B,QAAS,CACT,QAAS,CACT,SAAU,CACV,mBAAoB,CACpB,iBAAkB,CAClB,mBAAoB,CACpB,aAAc,CACd,uBAAwB,CACxB,sBAAuB,CACvB,uBAAwB,CACxB,eAAgB,CAzC5B,yXAiDQ,aAAc,CACjB,yCAID,YAAa,CACb,iBAAkB,CAClB,WAAY,CACZ,yBAA0B,CAC1B,QAAS,CACT,sBAAuB,CACvB,iBAAkB,CAClB,wBAAyB,CACzB,cAAe,CACf,mBAAoB,CACpB,kBAAmB,CACnB,uBAAwB,CACxB,aAAc,CACd,WAAY,CACZ,0BAA2B,CAC3B,eAAgB,CAChB,yEAA0E,CAC1E,mBAAoB,CACpB,gBAAiB,CACjB,eAAgB,CApBpB,4CAuBQ,eAAgB,CAChB,SAAU,CACV,QAAS,CAzBjB,4CA6BQ,eAAgB,CAChB,6BAA8B,CAC9B,qBAAsB,CACtB,QAAS,CAhCjB,+CAmCY,aAAc,CAnC1B,kDAsCgB,sCAAuC,CAtCvD,6GA0CoB,6BAA8B,CAC9B,sCAAuC,CACvC,wBAAyB,CA5C7C,wDAmDQ,gBAAiB,CACjB,wBAAyB,CACzB,cAAe,CACf,oBAAqB,CACrB,iBAAkB,CAvD1B,2FA4DQ,yBAA0B,CAC1B,aAAc,CACd,mBAAoB,CACpB,QAAS,CACT,eAAgB,CAChB,6BAA8B,CAC9B,sBAAuB,CACvB,kBAAmB,CACnB,iBAAkB,CAClB,mBAAoB,CACpB,iBAAkB,CAClB,mBAAoB,CACpB,uBAAwB,CACxB,cAAe,CACf,WAAY,CACZ,uBAAwB,CACxB,oBAAqB,CACrB,eAAgB,CAChB,qBAAsB,CA9E9B,8MAkFY,wBAAyB,CACzB,yBAA0B\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n@import '../constants.scss';\\n\\n.#{$EXTENSION_PREFIX}-smart-text-icon {\\n    height: 1em;\\n    vertical-align: -.15em;\\n    margin-right: .15em;\\n}\\n\\n.#{$EXTENSION_PREFIX}-smart-text-span {\\n    padding: .5rem;\\n    margin: -.5rem;\\n    z-index: 1;\\n    position: relative;\\n    display: inline-block;\\n    line-height: 1;\\n    text-align: left;\\n\\n    &:hover,\\n    &:focus {\\n        padding: .75rem 1rem;\\n        margin: -.75rem -1rem;\\n        z-index: 3;\\n    }\\n\\n    > input:first-child {\\n        position: absolute;\\n        opacity: 0;\\n        pointer-events: none;\\n        white-space: nowrap;\\n        height: 0;\\n        width: 0;\\n    }\\n    \\n    > span:last-child {\\n        position: relative;\\n        display: inline-block;\\n\\n        > span:first-child {\\n            text-decoration: underline;\\n            margin: 0;\\n            border: 0;\\n            padding: 0;\\n            font-family: inherit;\\n            font-size: inherit;\\n            font-weight: inherit;\\n            color: inherit;\\n            vertical-align: baseline;\\n            background: transparent;\\n            -webkit-user-select: all;\\n            user-select: all;\\n        }\\n    }\\n\\n    &:hover .#{$EXTENSION_PREFIX}-smart-text-popup,\\n    &:focus .#{$EXTENSION_PREFIX}-smart-text-popup\\n    &:focus-within .#{$EXTENSION_PREFIX}-smart-text-popup,\\n    & > input:focus + span:last-child .#{$EXTENSION_PREFIX}-smart-text-popup {\\n        display: block;\\n    }\\n}\\n\\n.#{$EXTENSION_PREFIX}-smart-text-popup {\\n    display: none;\\n    position: absolute;\\n    top: initial;\\n    bottom: calc(100% + .5rem);\\n    left: 50%;\\n    background-color: white;\\n    border-radius: 3px;\\n    border: 1px solid #cbcbcb;\\n    font-size: 13px;\\n    font-weight: initial;\\n    font-style: initial;\\n    text-decoration: initial;\\n    color: initial;\\n    width: 140px;\\n    transform: translateX(-50%);\\n    padding: .25em 0;\\n    font-family: SourceSansPro, \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n    margin: 0 !important;\\n    line-height: 1.15;\\n    list-style: none;\\n\\n    ul {\\n        list-style: none;\\n        padding: 0;\\n        margin: 0;\\n    }\\n\\n    li {\\n        list-style: none;\\n        padding: .1em .25em !important;\\n        box-sizing: border-box;\\n        margin: 0;\\n\\n        ul {\\n            margin: -.25em;\\n\\n            li {\\n                padding: .1em .25em 0 1.25em !important;\\n\\n                button,\\n                a {\\n                    margin: -.1em -.25em 0 -1.25em;\\n                    padding: .1em .25em 0 1.25em !important;\\n                    width: calc(100% + 1.5em);\\n                }\\n            }\\n        }\\n    }\\n\\n    > li:first-child {\\n        font-weight: bold;\\n        text-transform: uppercase;\\n        font-size: .8em;\\n        letter-spacing: .25px;\\n        text-align: center;\\n    }\\n\\n    button,\\n    a {\\n        text-decoration: underline;\\n        color: inherit;\\n        margin: -.1em -.25em;\\n        border: 0;\\n        border-radius: 0;\\n        padding: .1em .25em !important;\\n        background: transparent;\\n        min-height: initial;\\n        min-width: initial;\\n        line-height: inherit;\\n        font-size: inherit;\\n        font-family: inherit;\\n        vertical-align: baseline;\\n        cursor: pointer;\\n        height: 100%;\\n        width: calc(100% + .5em);\\n        display: inline-block;\\n        text-align: left;\\n        box-sizing: border-box;\\n\\n        &:hover,\\n        &:focus {\\n            background-color: #e6e9eb;\\n            text-decoration: underline;\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"#sts-service-now-plugin-form{max-width:60em;margin:0 auto;padding:2em .75em;font-family:\\\"Source Sans Pro\\\", SourceSansPro, \\\"Helvetica Neue\\\", Arial !important}#sts-service-now-plugin-form h3{margin-top:0}#sts-service-now-plugin-form .form-field textarea{width:100%;resize:none}#sts-service-now-plugin-form .form-field textarea:placeholder-shown{font-style:italic}#sts-service-now-plugin-form .form-field textarea::placeholder{font-style:italic}#sts-service-now-plugin-form table{width:100%}#sts-service-now-plugin-form tr+tr{border-top:1px solid #ccc}#sts-service-now-plugin-form tr table{margin-left:1em;width:calc(100% - 1em)}#sts-service-now-plugin-form table .form-field label{margin:0}#sts-service-now-plugin-form table .form-field label input[type=checkbox]{margin:0}#sts-service-now-plugin-form label{margin:1em 0 .25em;display:flex;justify-content:space-between;align-items:center}#sts-service-now-plugin-form label h5{margin:0}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/settings/styles.scss\"],\"names\":[],\"mappings\":\"AAMA,6BACI,cAAe,CACf,aAAc,CACd,iBAAkB,CAClB,gFAAiF,CAJrF,gCAOQ,YAAa,CAPrB,kDAWQ,UAAW,CACX,WAAY,CAZpB,oEAeY,iBAAkB,CAf9B,+DAmBY,iBAAkB,CAnB9B,mCAwBQ,UAAW,CAxBnB,mCA4BQ,yBAA0B,CA5BlC,sCAgCQ,eAAgB,CAChB,sBAAuB,CAjC/B,qDAqCQ,QAAS,CArCjB,0EAwCY,QAAS,CAxCrB,mCA6CQ,kBAAmB,CACnB,YAAa,CACb,6BAA8B,CAC9B,kBAAmB,CAhD3B,sCAmDY,QAAS\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n##{$EXTENSION_PREFIX}-form {\\n    max-width: 60em;\\n    margin: 0 auto;\\n    padding: 2em .75em;\\n    font-family: \\\"Source Sans Pro\\\", SourceSansPro, \\\"Helvetica Neue\\\", Arial !important;\\n\\n    h3 {\\n        margin-top: 0;\\n    }\\n\\n    .form-field textarea {\\n        width: 100%;\\n        resize: none;\\n    \\n        &:placeholder-shown {\\n            font-style: italic;\\n        }\\n    \\n        &::placeholder {\\n            font-style: italic;\\n        }\\n    }\\n\\n    table {\\n        width: 100%;\\n    }\\n\\n    tr + tr {\\n        border-top: 1px solid #ccc;\\n    }\\n\\n    tr table {\\n        margin-left: 1em;\\n        width: calc(100% - 1em);\\n    }\\n\\n    table .form-field label {\\n        margin: 0;\\n\\n        input[type=checkbox] {\\n            margin: 0;\\n        }\\n    }\\n\\n    label {\\n        margin: 1em 0 .25em;\\n        display: flex;\\n        justify-content: space-between;\\n        align-items: center;\\n\\n        h5 {\\n            margin: 0;\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".sts-service-now-plugin-smart-text-icon{height:1em;vertical-align:-.15em;margin-right:.15em}.sts-service-now-plugin-smart-text-span{padding:.5rem;margin:-.5rem;z-index:1;position:relative;display:inline-block;line-height:1;text-align:left}.sts-service-now-plugin-smart-text-span:hover,.sts-service-now-plugin-smart-text-span:focus{padding:.75rem 1rem;margin:-.75rem -1rem;z-index:3}.sts-service-now-plugin-smart-text-span>input:first-child{position:absolute;opacity:0;pointer-events:none;white-space:nowrap;height:0;width:0}.sts-service-now-plugin-smart-text-span>span:last-child{position:relative;display:inline-block}.sts-service-now-plugin-smart-text-span>span:last-child>span:first-child{text-decoration:underline;margin:0;border:0;padding:0;font-family:inherit;font-size:inherit;font-weight:inherit;color:inherit;vertical-align:baseline;background:transparent;-webkit-user-select:all;user-select:all}.sts-service-now-plugin-smart-text-span:hover .sts-service-now-plugin-smart-text-popup,.sts-service-now-plugin-smart-text-span:focus .sts-service-now-plugin-smart-text-popup .sts-service-now-plugin-smart-text-span:focus-within .sts-service-now-plugin-smart-text-popup,.sts-service-now-plugin-smart-text-span>input:focus+span:last-child .sts-service-now-plugin-smart-text-popup{display:block}.sts-service-now-plugin-smart-text-popup{display:none;position:absolute;top:initial;bottom:calc(100% + .5rem);left:50%;background-color:white;border-radius:3px;border:1px solid #cbcbcb;font-size:13px;font-weight:initial;font-style:initial;text-decoration:initial;color:initial;width:140px;transform:translateX(-50%);padding:.25em 0;font-family:SourceSansPro, \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;margin:0 !important;line-height:1.15;list-style:none}.sts-service-now-plugin-smart-text-popup ul{list-style:none;padding:0;margin:0}.sts-service-now-plugin-smart-text-popup li{list-style:none;padding:.1em .25em !important;box-sizing:border-box;margin:0}.sts-service-now-plugin-smart-text-popup li ul{margin:-.25em}.sts-service-now-plugin-smart-text-popup li ul li{padding:.1em .25em 0 1.25em !important}.sts-service-now-plugin-smart-text-popup li ul li button,.sts-service-now-plugin-smart-text-popup li ul li a{margin:-.1em -.25em 0 -1.25em;padding:.1em .25em 0 1.25em !important;width:calc(100% + 1.5em)}.sts-service-now-plugin-smart-text-popup>li:first-child{font-weight:bold;text-transform:uppercase;font-size:.8em;letter-spacing:.25px;text-align:center}.sts-service-now-plugin-smart-text-popup button,.sts-service-now-plugin-smart-text-popup a{text-decoration:underline;color:inherit;margin:-.1em -.25em;border:0;border-radius:0;padding:.1em .25em !important;background:transparent;min-height:initial;min-width:initial;line-height:inherit;font-size:inherit;font-family:inherit;vertical-align:baseline;cursor:pointer;height:100%;width:calc(100% + .5em);display:inline-block;text-align:left;box-sizing:border-box}.sts-service-now-plugin-smart-text-popup button:hover,.sts-service-now-plugin-smart-text-popup button:focus,.sts-service-now-plugin-smart-text-popup a:hover,.sts-service-now-plugin-smart-text-popup a:focus{background-color:#e6e9eb;text-decoration:underline}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/smarttext/styles.scss\"],\"names\":[],\"mappings\":\"AAQA,wCACI,UAAW,CACX,qBAAsB,CACtB,kBAAmB,CACtB,wCAGG,aAAc,CACd,aAAc,CACd,SAAU,CACV,iBAAkB,CAClB,oBAAqB,CACrB,aAAc,CACd,eAAgB,CAPpB,4FAWQ,mBAAoB,CACpB,oBAAqB,CACrB,SAAU,CAblB,0DAiBQ,iBAAkB,CAClB,SAAU,CACV,mBAAoB,CACpB,kBAAmB,CACnB,QAAS,CACT,OAAQ,CAtBhB,wDA0BQ,iBAAkB,CAClB,oBAAqB,CA3B7B,yEA8BY,yBAA0B,CAC1B,QAAS,CACT,QAAS,CACT,SAAU,CACV,mBAAoB,CACpB,iBAAkB,CAClB,mBAAoB,CACpB,aAAc,CACd,uBAAwB,CACxB,sBAAuB,CACvB,uBAAwB,CACxB,eAAgB,CAzC5B,yXAiDQ,aAAc,CACjB,yCAID,YAAa,CACb,iBAAkB,CAClB,WAAY,CACZ,yBAA0B,CAC1B,QAAS,CACT,sBAAuB,CACvB,iBAAkB,CAClB,wBAAyB,CACzB,cAAe,CACf,mBAAoB,CACpB,kBAAmB,CACnB,uBAAwB,CACxB,aAAc,CACd,WAAY,CACZ,0BAA2B,CAC3B,eAAgB,CAChB,yEAA0E,CAC1E,mBAAoB,CACpB,gBAAiB,CACjB,eAAgB,CApBpB,4CAuBQ,eAAgB,CAChB,SAAU,CACV,QAAS,CAzBjB,4CA6BQ,eAAgB,CAChB,6BAA8B,CAC9B,qBAAsB,CACtB,QAAS,CAhCjB,+CAmCY,aAAc,CAnC1B,kDAsCgB,sCAAuC,CAtCvD,6GA0CoB,6BAA8B,CAC9B,sCAAuC,CACvC,wBAAyB,CA5C7C,wDAmDQ,gBAAiB,CACjB,wBAAyB,CACzB,cAAe,CACf,oBAAqB,CACrB,iBAAkB,CAvD1B,2FA4DQ,yBAA0B,CAC1B,aAAc,CACd,mBAAoB,CACpB,QAAS,CACT,eAAgB,CAChB,6BAA8B,CAC9B,sBAAuB,CACvB,kBAAmB,CACnB,iBAAkB,CAClB,mBAAoB,CACpB,iBAAkB,CAClB,mBAAoB,CACpB,uBAAwB,CACxB,cAAe,CACf,WAAY,CACZ,uBAAwB,CACxB,oBAAqB,CACrB,eAAgB,CAChB,qBAAsB,CA9E9B,8MAkFY,wBAAyB,CACzB,yBAA0B\",\"sourcesContent\":[\"$EXTENSION_PREFIX: \\\"sts-service-now-plugin\\\";\\n$CODE_DELIMITERS_START: \\\"[code]\\\";\\n$CODE_DELIMITERS_END: \\\"[/code]\\\";\\n$REPLACEMENT_DELIMITERS_START: \\\"{{\\\";\\n$REPLACEMENT_DELIMITERS_END: \\\"}}\\\";\\n$MAX_REPLACEMENT_RECURSION_DEPTH: 10;\\n@import '../constants.scss';\\n\\n.#{$EXTENSION_PREFIX}-smart-text-icon {\\n    height: 1em;\\n    vertical-align: -.15em;\\n    margin-right: .15em;\\n}\\n\\n.#{$EXTENSION_PREFIX}-smart-text-span {\\n    padding: .5rem;\\n    margin: -.5rem;\\n    z-index: 1;\\n    position: relative;\\n    display: inline-block;\\n    line-height: 1;\\n    text-align: left;\\n\\n    &:hover,\\n    &:focus {\\n        padding: .75rem 1rem;\\n        margin: -.75rem -1rem;\\n        z-index: 3;\\n    }\\n\\n    > input:first-child {\\n        position: absolute;\\n        opacity: 0;\\n        pointer-events: none;\\n        white-space: nowrap;\\n        height: 0;\\n        width: 0;\\n    }\\n    \\n    > span:last-child {\\n        position: relative;\\n        display: inline-block;\\n\\n        > span:first-child {\\n            text-decoration: underline;\\n            margin: 0;\\n            border: 0;\\n            padding: 0;\\n            font-family: inherit;\\n            font-size: inherit;\\n            font-weight: inherit;\\n            color: inherit;\\n            vertical-align: baseline;\\n            background: transparent;\\n            -webkit-user-select: all;\\n            user-select: all;\\n        }\\n    }\\n\\n    &:hover .#{$EXTENSION_PREFIX}-smart-text-popup,\\n    &:focus .#{$EXTENSION_PREFIX}-smart-text-popup\\n    &:focus-within .#{$EXTENSION_PREFIX}-smart-text-popup,\\n    & > input:focus + span:last-child .#{$EXTENSION_PREFIX}-smart-text-popup {\\n        display: block;\\n    }\\n}\\n\\n.#{$EXTENSION_PREFIX}-smart-text-popup {\\n    display: none;\\n    position: absolute;\\n    top: initial;\\n    bottom: calc(100% + .5rem);\\n    left: 50%;\\n    background-color: white;\\n    border-radius: 3px;\\n    border: 1px solid #cbcbcb;\\n    font-size: 13px;\\n    font-weight: initial;\\n    font-style: initial;\\n    text-decoration: initial;\\n    color: initial;\\n    width: 140px;\\n    transform: translateX(-50%);\\n    padding: .25em 0;\\n    font-family: SourceSansPro, \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n    margin: 0 !important;\\n    line-height: 1.15;\\n    list-style: none;\\n\\n    ul {\\n        list-style: none;\\n        padding: 0;\\n        margin: 0;\\n    }\\n\\n    li {\\n        list-style: none;\\n        padding: .1em .25em !important;\\n        box-sizing: border-box;\\n        margin: 0;\\n\\n        ul {\\n            margin: -.25em;\\n\\n            li {\\n                padding: .1em .25em 0 1.25em !important;\\n\\n                button,\\n                a {\\n                    margin: -.1em -.25em 0 -1.25em;\\n                    padding: .1em .25em 0 1.25em !important;\\n                    width: calc(100% + 1.5em);\\n                }\\n            }\\n        }\\n    }\\n\\n    > li:first-child {\\n        font-weight: bold;\\n        text-transform: uppercase;\\n        font-size: .8em;\\n        letter-spacing: .25px;\\n        text-align: center;\\n    }\\n\\n    button,\\n    a {\\n        text-decoration: underline;\\n        color: inherit;\\n        margin: -.1em -.25em;\\n        border: 0;\\n        border-radius: 0;\\n        padding: .1em .25em !important;\\n        background: transparent;\\n        min-height: initial;\\n        min-width: initial;\\n        line-height: inherit;\\n        font-size: inherit;\\n        font-family: inherit;\\n        vertical-align: baseline;\\n        cursor: pointer;\\n        height: 100%;\\n        width: calc(100% + .5em);\\n        display: inline-block;\\n        text-align: left;\\n        box-sizing: border-box;\\n\\n        &:hover,\\n        &:focus {\\n            background-color: #e6e9eb;\\n            text-decoration: underline;\\n        }\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n\n      content += cssWithMappingToString(item);\n\n      if (needLayer) {\n        content += \"}\";\n      }\n\n      if (item[2]) {\n        content += \"}\";\n      }\n\n      if (item[4]) {\n        content += \"}\";\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n\n\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js?importLoaders=1!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","\n        var result = require(\"!!../../node_modules/css-loader/dist/cjs.js?importLoaders=1!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\");\n\n        if (result && result.__esModule) {\n            result = result.default;\n        }\n\n        if (typeof result === \"string\") {\n            module.exports = result;\n        } else {\n            module.exports = result.toString();\n        }\n    ","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","export var TextAreaType;\n(function (TextAreaType) {\n    TextAreaType[TextAreaType[\"Comments\"] = 0] = \"Comments\";\n    TextAreaType[TextAreaType[\"WorkNotes\"] = 1] = \"WorkNotes\";\n    TextAreaType[TextAreaType[\"CloseNotes\"] = 2] = \"CloseNotes\";\n    TextAreaType[TextAreaType[\"CommentsAndWorkNotes\"] = 3] = \"CommentsAndWorkNotes\";\n})(TextAreaType || (TextAreaType = {}));\nexport var TicketType;\n(function (TicketType) {\n    TicketType[TicketType[\"Incident\"] = 0] = \"Incident\";\n    TicketType[TicketType[\"SupportRequest\"] = 1] = \"SupportRequest\";\n    TicketType[TicketType[\"Task\"] = 2] = \"Task\";\n})(TicketType || (TicketType = {}));\nexport var ServiceNowUITab;\n(function (ServiceNowUITab) {\n    ServiceNowUITab[\"Notes\"] = \"Notes\";\n    ServiceNowUITab[\"ClosureInfo\"] = \"Closure Information\";\n})(ServiceNowUITab || (ServiceNowUITab = {}));\n","export var dedent = function (string) {\n    // Similar to python's textwrap.dedent:\n    // https://docs.python.org/3/library/textwrap.html#textwrap.dedent\n    var lines = string.split(\"\\n\");\n    var longestCommonPrefix = null;\n    for (var i = lines.length - 1; i >= 0; i--) {\n        if (!lines[i].trim().length) {\n            lines[i] = \"\";\n            continue;\n        }\n        var prefix = lines[i].substring(0, lines[i].length - lines[i].trimLeft().length);\n        if (longestCommonPrefix == null) {\n            longestCommonPrefix = prefix;\n            continue;\n        }\n        if (prefix === longestCommonPrefix) {\n            continue;\n        }\n        var shorter = prefix.length < longestCommonPrefix.length ? prefix : longestCommonPrefix;\n        var longer = prefix.length < longestCommonPrefix.length ? longestCommonPrefix : prefix;\n        for (var i_1 = 1; i_1 < shorter.length; i_1++) {\n            if (shorter.substring(0, i_1) !== longer.substring(0, i_1)) {\n                longestCommonPrefix = shorter.substring(0, i_1 - 1);\n                if (i_1 === 1) {\n                    break;\n                }\n                continue;\n            }\n        }\n        longestCommonPrefix = shorter;\n    }\n    if (longestCommonPrefix) {\n        for (var i = lines.length - 1; i >= 0; i--) {\n            lines[i] = lines[i].substring(longestCommonPrefix.length);\n        }\n    }\n    while (lines[lines.length - 1] === \"\") {\n        lines.pop();\n    }\n    while (lines[0] === \"\") {\n        lines.shift();\n    }\n    return lines.join(\"\\n\");\n};\nexport default dedent;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar e_1, _a, e_2, _b;\nimport { dedent } from \"../helpers/dedent\";\nimport { TicketType, getTicketType } from \"../helpers\";\nexport var namespaces = [\n    {\n        name: \"Links\",\n        insert: \"link.\",\n        icon: \"link\",\n    },\n    {\n        name: \"Ticket Information\",\n        insert: \"ticket.\",\n        icon: \"list\",\n    },\n    {\n        name: \"Current User\",\n        insert: \"current_user.\",\n        icon: \"user\",\n    },\n    {\n        name: \"Phone Numbers\",\n        insert: \"phone_number.\",\n        icon: \"phone\",\n    },\n    {\n        name: \"Additional Information\",\n        insert: \"info.\",\n        icon: \"info\",\n    },\n    {\n        name: \"Icons\",\n        insert: \"icon.\",\n        icon: \"image\",\n    },\n];\nexport var replacements = [\n    {\n        triggers: [\"ticket.requester.first_name\", \"ticket.requester.name.first\"],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"sys_display.incident.u_requested_for\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"sys_display.ticket.u_requested_for\"),\n                _a[TicketType.Task] = document.getElementById(\"sc_task.request_item.u_requested_for_label\"),\n                _a)[getTicketType()];\n            if (input) {\n                var index = input.value.indexOf(\" \");\n                return ~index ? input.value.substring(0, index) : input.value;\n            }\n            return null;\n        },\n        description: \"The requester's first name\",\n    },\n    {\n        triggers: [\"ticket.requester.last_name\", \"ticket.requester.name.last\"],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"sys_display.incident.u_requested_for\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"sys_display.ticket.u_requested_for\"),\n                _a[TicketType.Task] = document.getElementById(\"sc_task.request_item.requested_for_label\"),\n                _a)[getTicketType()];\n            if (input) {\n                var index = input.value.indexOf(\" \");\n                return ~index ? input.value.substring(index + 1).trimStart() : null;\n            }\n            return null;\n        },\n        description: \"The requester's last name\",\n    },\n    {\n        triggers: [\"ticket.requester.name\", \"ticket.requester.name.full\"],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"sys_display.incident.u_requested_for\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"sys_display.ticket.u_requested_for\"),\n                _a[TicketType.Task] = document.getElementById(\"sc_task.request_item.requested_for_label\"),\n                _a)[getTicketType()];\n            return input ? input.value : null;\n        },\n        description: \"The requester's full name\",\n    },\n    {\n        triggers: [\"ticket.requester.email\"],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"incident.u_guest_email\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"ticket.u_guest_email\"),\n                _a[TicketType.Task] = document.getElementById(\"sys_readonly.sc_task.request_item.u_email\"),\n                _a)[getTicketType()];\n            if (input) {\n                return input.value;\n            }\n            return null;\n        },\n        description: \"The requester's email address\",\n    },\n    {\n        triggers: [\n            \"ticket.requester.number\",\n            \"ticket.requester.phone\",\n            \"ticket.requester.phone_number\",\n        ],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"incident.u_phone_number\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"ticket.u_phone_number\"),\n                _a[TicketType.Task] = document.getElementById(\"sys_readonly.sc_task.request_item.u_phone_number\"),\n                _a)[getTicketType()];\n            if (input) {\n                var number = input.value.replace(/\\D/g, \"\");\n                if (number.length === 10) {\n                    return \"(\".concat(number.substring(0, 3), \") \").concat(number.substring(3, 6), \"-\").concat(number.substring(6, 10));\n                }\n                else {\n                    return input.value;\n                }\n            }\n            return null;\n        },\n        description: \"The requester's phone number\",\n    },\n    {\n        triggers: [\"ticket.number\", \"ticket.id\"],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"sys_readonly.incident.number\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"sys_readonly.ticket.number\"),\n                _a[TicketType.Task] = document.getElementById(\"sys_readonly.sc_task.number\"),\n                _a)[getTicketType()];\n            if (input) {\n                return input.value;\n            }\n            return null;\n        },\n        description: \"The ticket's number\",\n    },\n    {\n        triggers: [\n            \"ticket.title\",\n            \"ticket.name\",\n            \"ticket.description\",\n            \"ticket.short_description\",\n        ],\n        exec: function () {\n            var _a;\n            var input = (_a = {},\n                _a[TicketType.Incident] = document.getElementById(\"incident.short_description\"),\n                _a[TicketType.SupportRequest] = document.getElementById(\"ticket.short_description\"),\n                _a[TicketType.Task] = document.getElementById(\"sc_task.short_description\"),\n                _a)[getTicketType()];\n            if (input) {\n                return input.value;\n            }\n            return null;\n        },\n        description: \"The ticket's title\",\n    },\n    {\n        triggers: [\"current_user.first_name\", \"current_user.name.first\"],\n        exec: function () {\n            var _a;\n            var NOW = window.NOW;\n            var name = ((_a = NOW === null || NOW === void 0 ? void 0 : NOW.user) === null || _a === void 0 ? void 0 : _a.firstName) || null;\n            if (typeof name === \"string\") {\n                return name;\n            }\n            name = (NOW === null || NOW === void 0 ? void 0 : NOW.user_display_name) || null;\n            if (!name) {\n                var elem = document.querySelector(\"[id*='add_me'][data-user]\");\n                if (elem) {\n                    name = elem.getAttribute(\"data-user\");\n                }\n            }\n            if (typeof name === \"string\") {\n                var index = name.indexOf(\" \");\n                return ~index ? name.substring(0, index).trimStart() : name;\n            }\n            return null;\n        },\n        description: \"Your first name\",\n    },\n    {\n        triggers: [\"current_user.last_name\", \"current_user.name.last\"],\n        exec: function () {\n            var _a;\n            var NOW = window.NOW;\n            var name = ((_a = NOW === null || NOW === void 0 ? void 0 : NOW.user) === null || _a === void 0 ? void 0 : _a.lastName) || null;\n            if (typeof name === \"string\") {\n                return name;\n            }\n            name = (NOW === null || NOW === void 0 ? void 0 : NOW.user_display_name) || null;\n            if (!name) {\n                var elem = document.querySelector(\"[id*='add_me'][data-user]\");\n                if (elem) {\n                    name = elem.getAttribute(\"data-user\");\n                }\n            }\n            if (typeof name === \"string\") {\n                var index = name.indexOf(\" \");\n                return ~index ? name.substring(index + 1).trimStart() : name;\n            }\n            return null;\n        },\n        description: \"Your last name\",\n    },\n    {\n        triggers: [\n            \"current_user.name.full\",\n            \"current_user.full_name\",\n            \"current_user.name\",\n        ],\n        exec: function () {\n            var _a, _b;\n            var NOW = window.NOW;\n            var name = (NOW === null || NOW === void 0 ? void 0 : NOW.user_display_name) || null;\n            if (typeof name === \"string\") {\n                return name;\n            }\n            name = ((_a = NOW === null || NOW === void 0 ? void 0 : NOW.user) === null || _a === void 0 ? void 0 : _a.firstName) || null;\n            if (name) {\n                var last = ((_b = NOW === null || NOW === void 0 ? void 0 : NOW.user) === null || _b === void 0 ? void 0 : _b.lastName) || null;\n                if (last)\n                    return \"\".concat(name, \" \").concat(last);\n                else\n                    name = null;\n            }\n            if (!name) {\n                var elem = document.querySelector(\"[id*='add_me'][data-user]\");\n                if (elem) {\n                    name = elem.getAttribute(\"data-user\");\n                }\n            }\n            return typeof name === \"string\" ? name : null;\n        },\n        description: \"Your full name\",\n    },\n    {\n        triggers: [\"info.current_date\", \"info.today\"],\n        exec: function () {\n            var now = new Date();\n            var month = now.getMonth() + 1 + \"\";\n            var day = now.getDate() + \"\";\n            var year = now.getFullYear() + \"\";\n            return \"\".concat((\"00\" + month).substring(month.length), \"/\").concat((\"00\" + day).substring(day.length), \"/\").concat(year);\n        },\n        description: \"Today's date as MM/DD/YYYY\",\n    },\n    {\n        triggers: [\"info.current_time\"],\n        exec: function () {\n            var now = new Date();\n            var hour = now.getHours();\n            var min = now.getMinutes();\n            return \"\".concat(hour <= 12 ? hour || 12 : hour - 12, \":\").concat((\"00\" + min).substring(min.toString().length), \" \").concat(hour < 12 ? \"AM\" : \"PM\");\n        },\n        description: \"The current time as HH:MM AM/PM\",\n    },\n    {\n        triggers: [\"link.mac_address\", \"link.macaddress\", \"link.mac\"],\n        value: \"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018475\\n\",\n        description: \"Link for finding MAC addresses\",\n    },\n    {\n        triggers: [\"link.mydevices\", \"link.my_devices\"],\n        value: \"https://mydevices.stanford.edu\",\n        description: \"Link to MyDevices page\",\n    },\n    {\n        triggers: [\"link.iprequest\"],\n        value: \"https://iprequest.stanford.edu\",\n        description: \"Link to IPRequest page\",\n    },\n    {\n        triggers: [\"link.snsr\"],\n        value: \"https://snsr.stanford.edu\",\n        description: \"Link to SNSR download page\",\n    },\n    {\n        triggers: [\"link.mdm\"],\n        value: \"https://uit.stanford.edu/service/mobiledevice/management\",\n        description: \"Link to MDM page for all devices\",\n    },\n    {\n        triggers: [\"link.mdm.ios\", \"link.mdm.iphone\"],\n        value: \"https://uit.stanford.edu/service/mobiledevice/management/enroll_ios\",\n        description: \"Link to MDM page for iOS devices\",\n    },\n    {\n        triggers: [\"link.mdm.android\"],\n        value: \"https://uit.stanford.edu/service/mobiledevice/management/enroll_android\",\n        description: \"Link to MDM page for Android devices\",\n    },\n    {\n        triggers: [\"link.swde\"],\n        value: \"https://uit.stanford.edu/service/encryption/wholedisk\",\n        description: \"Link to SWDE page for all devices\",\n    },\n    {\n        triggers: [\n            \"link.swde.mac\",\n            \"link.swde.macbook\",\n            \"link.swde.macos\",\n            \"link.swde.osx\",\n        ],\n        value: \"https://uit.stanford.edu/service/encryption/wholedisk/install_mac\",\n        description: \"Link to SWDE page for MacBooks\",\n    },\n    {\n        triggers: [\"link.swde.windows\", \"link.swde.pc\"],\n        value: \"https://uit.stanford.edu/service/encryption/wholedisk/install_windows\",\n        description: \"Link to SWDE page for Windows PCs\",\n    },\n    {\n        triggers: [\"link.bigfix\", \"link.big_fix\"],\n        value: \"https://uit.stanford.edu/software/bigfix\",\n        description: \"Link to BigFix page for all devices\",\n    },\n    {\n        triggers: [\"link.vpn\"],\n        value: \"https://uit.stanford.edu/service/vpn\",\n        description: \"Link to Stanford VPN page for all devices\",\n    },\n    {\n        triggers: [\n            \"link.vpn.mac\",\n            \"link.vpn.macbook\",\n            \"link.vpn.macos\",\n            \"link.vpn.osx\",\n        ],\n        value: \"https://web.stanford.edu/dept/its/support/vpn/installers/InstallAnyConnect.pkg\",\n        description: \"Link to download VPN for MacBooks\",\n    },\n    {\n        triggers: [\"link.vpn.windows\", \"link.vpn.pc\"],\n        value: \"https://web.stanford.edu/dept/its/support/vpn/installers/InstallAnyConnect.exe\",\n        description: \"Link to download VPN for Windows PCs\",\n    },\n    {\n        triggers: [\"link.vlre\"],\n        value: \"https://uit.stanford.edu/service/vlre\",\n        description: \"Link to download VLRE for all devices\",\n    },\n    {\n        triggers: [\n            \"link.vlre.mac\",\n            \"link.vlre.macbook\",\n            \"link.vlre.macos\",\n            \"link.vlre.osx\",\n        ],\n        value: \"https://uit.stanford.edu/service/vlre/mac\",\n        description: \"Link to download VLRE for MacBooks\",\n    },\n    {\n        triggers: [\"link.vlre.windows\", \"link.vlre.pc\"],\n        value: \"https://uit.stanford.edu/service/vlre/windows\",\n        description: \"Link to download VLRE for Windows PCs\",\n    },\n    {\n        triggers: [\"link.cardinal_key\", \"link.cardinalkey\"],\n        value: \"https://uit.stanford.edu/service/cardinalkey/installation\",\n        description: \"Link to download Cardinal Key for all devices\",\n    },\n    {\n        triggers: [\n            \"link.cardinal_key.mac\",\n            \"link.cardinal_key.macbook\",\n            \"link.cardinal_key.macos\",\n            \"link.cardinal_key.osx\",\n            \"link.cardinalkey.mac\",\n            \"link.cardinalkey.macbook\",\n            \"link.cardinalkey.macos\",\n            \"link.cardinalkey.osx\",\n        ],\n        value: \"https://uit.stanford.edu/service/cardinalkey/installation#macos\",\n        description: \"Link to download Cardinal Key for MacBooks\",\n    },\n    {\n        triggers: [\n            \"link.cardinal_key.windows\",\n            \"link.cardinal_key.pc\",\n            \"link.cardinalkey.windows\",\n            \"link.cardinalkey.pc\",\n        ],\n        value: \"https://uit.stanford.edu/service/cardinalkey/installation##windows\",\n        description: \"Link to download Cardinal Key for Windows PCs\",\n    },\n    {\n        triggers: [\"link.cardinal_key.ios\", \"link.cardinal_key.iphone\"],\n        value: \"https://uit.stanford.edu/service/cardinalkey/install_ios\",\n        description: \"Link to download Cardinal Key for iPhones/iPads\",\n    },\n    {\n        triggers: [\"link.ssrt\"],\n        value: \"https://uit.stanford.edu/software/ssrt\",\n        description: \"Link to download SSRT for all devices\",\n    },\n    {\n        triggers: [\n            \"link.ssrt.mac\",\n            \"link.ssrt.macbook\",\n            \"link.ssrt.macos\",\n            \"link.ssrt.osx\",\n        ],\n        value: \"https://web.stanford.edu/dept/its/support/ess/mac/unrestricted/SSRT.pkg\",\n        description: \"Link to download SSRT for MacBooks\",\n    },\n    {\n        triggers: [\"link.ssrt.windows\", \"link.ssrt.pc\"],\n        value: \"https://web.stanford.edu/dept/its/support/ess/pc/unrestricted/RunSSRT.exe\",\n        description: \"Link to download SSRT for Windows PCs\",\n    },\n    {\n        triggers: [\"link.appointment\", \"link.book_appointment\"],\n        value: \"https://bit.ly/bookPTSappt\",\n        description: \"Link to book appointments with PTS\",\n    },\n    {\n        triggers: [\n            \"link.forget_wifi.mac\",\n            \"link.forget_wifi.macbook\",\n            \"link.forget_wifi.macos\",\n            \"link.forget_wifi.osx\",\n        ],\n        value: \"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018430\",\n        description: \"Link to instructions for forgetting Wi-Fi networks on MacBooks\",\n    },\n    {\n        triggers: [\"link.forget_wifi.windows\", \"link.forget_wifi.pc\"],\n        value: \"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018429\",\n        description: \"Link to instructions for forgetting Wi-Fi networks on Windows PCs\",\n    },\n    {\n        triggers: [\"link.forget_wifi.ios\", \"link.forget_wifi.iphone\"],\n        value: \"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018427\",\n        description: \"Link to instructions for forgetting Wi-Fi networks on iPhones\",\n    },\n    {\n        triggers: [\"link.forget_wifi.android\"],\n        value: \"https://stanford.service-now.com/student_services?id=kb_article&number=KB00018428\",\n        description: \"Link to instructions for forgetting Wi-Fi networks on Android phones\",\n    },\n    {\n        triggers: [\n            \"link.disable_private_address\",\n            \"link.disable_private_mac_address\",\n            \"link.disable_random_address\",\n            \"link.disable_random_mac_address\",\n        ],\n        value: \"https://stanford.service-now.com/student_services?id=kb_article&sys_id=6126c5ca1b067c5098a05425604bcbb6\",\n        description: \"Link to instructions for disabling a randomized MAC address\",\n    },\n    {\n        triggers: [\"link.gsb_registration\"],\n        value: \"http://gsbentreg.stanford.edu/\",\n        description: \"Link to GSB's device registration Google form.\",\n    },\n    {\n        triggers: [\n            \"link.enrollment_quiz\",\n            \"link.enrollment_questionnaire\",\n            \"link.enrollment\",\n        ],\n        value: \"https://uit.stanford.edu/service/enrollment\",\n        description: \"Link to Enrollment Questionnaire page\",\n    },\n    {\n        triggers: [\n            \"link.enrollment_quiz.mac\",\n            \"link.enrollment_quiz.macbook\",\n            \"link.enrollment_quiz.macos\",\n            \"link.enrollment_quiz.osx\",\n            \"link.enrollment_questionnaire.mac\",\n            \"link.enrollment_questionnaire.macbook\",\n            \"link.enrollment_questionnaire.macos\",\n            \"link.enrollment_questionnaire.osx\",\n            \"link.enrollment.mac\",\n            \"link.enrollment.macbook\",\n            \"link.enrollment.macos\",\n            \"link.enrollment.osx\",\n        ],\n        value: \"https://uit.stanford.edu/service/enrollment/mac\",\n        description: \"Link to Enrollment Questionnaire for MacBooks\",\n    },\n    {\n        triggers: [\n            \"link.enrollment_quiz.windows\",\n            \"link.enrollment_quiz.pc\",\n            \"link.enrollment_questionnaire.windows\",\n            \"link.enrollment_questionnaire.pc\",\n            \"link.enrollment.windows\",\n            \"link.enrollment.pc\",\n        ],\n        value: \"https://uit.stanford.edu/service/enrollment/windows\",\n        description: \"Link to Enrollment Questionnaire for Windows PCs\",\n    },\n    {\n        triggers: [\n            \"link.enrollment_quiz.mobile\",\n            \"link.enrollment_quiz.ios\",\n            \"link.enrollment_quiz.iphone\",\n            \"link.enrollment_quiz.android\",\n            \"link.enrollment_questionnaire.mobile\",\n            \"link.enrollment_questionnaire.ios\",\n            \"link.enrollment_questionnaire.iphone\",\n            \"link.enrollment_questionnaire.android\",\n            \"link.enrollment.mobile\",\n            \"link.enrollment.ios\",\n            \"link.enrollment.iphone\",\n            \"link.enrollment.android\",\n        ],\n        value: \"https://uit.stanford.edu/service/enrollment/mobiledevice\",\n        description: \"Link to Enrollment Questionnaire for Mobile Device\",\n    },\n    {\n        triggers: [\n            \"phone_number.sts\",\n            \"phone_number.pts\",\n            \"phone_number.us\",\n            \"phone_number.ours\",\n        ],\n        value: \"(650) 723-9204\",\n        description: \"Phone number for PTS\",\n    },\n    {\n        triggers: [\n            \"phone_number.uit\",\n            \"phone_number.helpsu\",\n            \"phone_number.help_su\",\n            \"phone_number.it\",\n        ],\n        value: \"(650) 725-4357\",\n        description: \"Phone number for UIT/HelpSU\",\n    },\n    {\n        triggers: [\n            \"phone_number.med_school\",\n            \"phone_number.som\",\n            \"phone_number.medical_school\",\n        ],\n        value: \"(650) 725-8000\",\n        description: \"Phone number for SoM IT\",\n    },\n    {\n        triggers: [\"icon.mydevices.compliant\", \"icon.my_devices.compliant\"],\n        value: \"[code]<img style=\\\"height:1em;vertical-align:-.15em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-compliant.svg\\\" alt=\\\"\\\"/>[/code]\",\n        description: \"Inserts a \\\"<img style=\\\"height:1em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-compliant.svg\\\" alt=\\\"green checkmark icon\\\"/>\\\"\",\n    },\n    {\n        triggers: [\n            \"icon.mydevices.n/a\",\n            \"icon.mydevices.na\",\n            \"icon.my_devices.n/a\",\n            \"icon.my_devices.na\",\n        ],\n        value: \"[code]<img style=\\\"height:1em;vertical-align:-.15em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-na.svg\\\" alt=\\\"\\\"/>[/code]\",\n        description: \"Inserts a \\\"<img style=\\\"height:1em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-na.svg\\\" alt=\\\"gray dash icon\\\"/>\\\"\",\n    },\n    {\n        triggers: [\n            \"icon.mydevices.not_compliant\",\n            \"icon.mydevices.uncompliant\",\n            \"icon.mydevices.incompliant\",\n            \"icon.mydevices.noncompliant\",\n            \"icon.my_devices.not_compliant\",\n            \"icon.my_devices.uncompliant\",\n            \"icon.my_devices.incompliant\",\n            \"icon.my_devices.noncompliant\",\n        ],\n        value: \"[code]<img style=\\\"height:1em;vertical-align:-.15em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-not_compliant.svg\\\" alt=\\\"\\\"/>[/code]\",\n        description: \"Inserts a \\\"<img style=\\\"height:1em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/mydevices-not_compliant.svg\\\" alt=\\\"red X icon\\\"/>\\\"\",\n    },\n    {\n        triggers: [\"icon.info\", \"icon.information\"],\n        value: \"[code]<img style=\\\"height:1em;vertical-align:-.15em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/info.svg\\\" alt=\\\"info icon\\\"/>[/code]\",\n        description: \"Inserts a \\\"<img style=\\\"height:1em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/info.svg\\\" alt=\\\"circled info icon\\\"/>\\\"\",\n    },\n    {\n        triggers: [\"icon.apple\", \"icon.apple_logo\", \"icon.apple_menu\"],\n        value: \"[code]<img style=\\\"height:1em;vertical-align:-.15em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/apple.svg\\\" alt=\\\"Apple logo\\\"/>[/code]\",\n        description: \"Inserts a \\\"<img style=\\\"height:1em\\\" src=\\\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/.github/assets/apple.svg\\\" alt=\\\"black Apple logo\\\"/>\\\"\",\n    },\n];\nexport var replacementByTrigger = {};\ntry {\n    for (var replacements_1 = __values(replacements), replacements_1_1 = replacements_1.next(); !replacements_1_1.done; replacements_1_1 = replacements_1.next()) {\n        var replacement = replacements_1_1.value;\n        try {\n            for (var _c = (e_2 = void 0, __values(replacement.triggers)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                var trigger = _d.value;\n                replacementByTrigger[trigger.trim().toLowerCase()] = replacement;\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        // Dedent any string values so we don't have to do it later.\n        if (\"value\" in replacement) {\n            replacement.value = dedent(replacement.value);\n        }\n    }\n}\ncatch (e_1_1) { e_1 = { error: e_1_1 }; }\nfinally {\n    try {\n        if (replacements_1_1 && !replacements_1_1.done && (_a = replacements_1.return)) _a.call(replacements_1);\n    }\n    finally { if (e_1) throw e_1.error; }\n}\n","/**\n * A helper function to assert that a value is not null or undefined. If the passed-in value *is*\n * nullish, an error is thrown with an optional error message.\n * @param value The value to test for null or undefined.\n * @param message An optional string to use as the Error message if `value` is nullish.\n * @returns The passed-in value. Only returns if `value` is not nullish.\n */\nexport var assertNotNull = function (value, message) {\n    if (value == null) {\n        throw new Error(typeof message === \"string\" ? message : \"Received nullish value.\");\n    }\n    return value;\n};\nexport default assertNotNull;\n","export var isInstance = function (object, type) {\n    // ServiceNow (disgustingly) overwrites the \"Element\" class with their own stupid constructor,\n    // which completely messes up checking instanceof Element, so we have to set Element manually to\n    // \"Element\" here to prevent us from using the ServiceNow constructor.\n    // (i.e., Element.name !== \"Element\")\n    var name = type === Element ? \"Element\" : type.name;\n    return isInstanceFromName(object, name);\n};\nexport var isInstanceFromName = function (object, type) {\n    for (var currWindow = window; currWindow.parent !== currWindow; currWindow = currWindow.parent) {\n        var cls_1 = currWindow[type];\n        if (cls_1 && object instanceof cls_1) {\n            return true;\n        }\n    }\n    var cls = window.top\n        ? window.top[type]\n        : null;\n    return cls ? object instanceof cls : false;\n};\nexport default isInstance;\n","/**\n * Escapes a string to make it safe to use as a CSS attribute or class name. Any character that is\n * not a lowercase letter or a number is replaced by an its codepoint, surrounded by two\n * underscores.\n * @param string The string to escape.\n * @returns The escapes string.\n */\nexport var escapeCSSSelector = function (string) {\n    var s = \"\";\n    for (var i = 0; i < string.length; i++) {\n        var codePoint = string.codePointAt(i);\n        s +=\n            codePoint < 48 || (57 < codePoint && codePoint < 97) || 122 < codePoint\n                ? \"_\" + codePoint.toString(16) + \"_\"\n                : string[i];\n    }\n    return s;\n};\nexport default escapeCSSSelector;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport constants from \"../constants.json\";\nimport escapeCSSSelector from \"./escapeCSSSelector\";\nvar ELEMENT_QUERIES = {};\nexport var waitForElements = function (queries, callback) {\n    var _a;\n    if (queries === \"#settings_modal .settings-tabs .sn-widget-list_v2\") {\n        // debugger;\n    }\n    var query = typeof queries === \"string\" ? queries : queries.join(\",\");\n    (_a = ELEMENT_QUERIES[query]) !== null && _a !== void 0 ? _a : (ELEMENT_QUERIES[query] = []);\n    ELEMENT_QUERIES[query].push(callback);\n    // Check if there are existing elements already in the DOM that have already been processed, and\n    // call this callback on them.\n    var attribute = \"\".concat(constants.EXTENSION_PREFIX, \"-element-processed--\").concat(escapeCSSSelector(query));\n    var elementList = Array.from(document.querySelectorAll(query)).filter(function (element) { return element.hasAttribute(attribute); });\n    if (elementList.length) {\n        callback(elementList);\n    }\n    // Process any potential elements that haven't been processed yet.\n    mutationObserverCallback();\n};\nvar mutationObserverCallback = function () {\n    var _loop_1 = function (query) {\n        var e_1, _a, e_2, _b;\n        var attribute = \"\".concat(constants.EXTENSION_PREFIX, \"-element-processed--\").concat(escapeCSSSelector(query));\n        // Include :not([attribute]) to prevent already-processed elements from being processed\n        // again.\n        var elementList = Array.from(document.querySelectorAll(query)).filter(function (element) { return !element.hasAttribute(attribute); });\n        if (elementList.length) {\n            try {\n                for (var elementList_1 = (e_1 = void 0, __values(elementList)), elementList_1_1 = elementList_1.next(); !elementList_1_1.done; elementList_1_1 = elementList_1.next()) {\n                    var element = elementList_1_1.value;\n                    // Set the attribute to prevent this element from being processed again.\n                    element.setAttribute(attribute, \"true\");\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (elementList_1_1 && !elementList_1_1.done && (_a = elementList_1.return)) _a.call(elementList_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            try {\n                // Call any callbacks associated with this query.\n                for (var _c = (e_2 = void 0, __values(ELEMENT_QUERIES[query])), _d = _c.next(); !_d.done; _d = _c.next()) {\n                    var callback = _d.value;\n                    callback(elementList);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n        }\n    };\n    // Go through the queries to look for matching elements.\n    for (var query in ELEMENT_QUERIES) {\n        _loop_1(query);\n    }\n};\n/**\n * Create a new MutationObserver that listens for new elements that match anything in\n * `ELEMENT_QUERIES` and processes new elements.\n */\nnew MutationObserver(mutationObserverCallback).observe(document, {\n    childList: true,\n    subtree: true,\n});\nmutationObserverCallback();\nexport default waitForElements;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport isInstance from \"./isInstance\";\nimport waitForElements from \"./waitForElements\";\nvar TEXTAREA_DATA = new Map();\nvar TEXTAREA_DATA_GENERATORS = [];\nvar TEXTAREA_CALLBACKS = [];\n/**\n * Returns the data object associated with a textarea, or null if there is none.\n * @param textarea The textarea to retrieve the data object for.\n * @returns The textarea's associated data object, or null if there is none.\n */\nexport var getTextAreaData = function (textarea) {\n    var _a;\n    if (isInstance(textarea, HTMLTextAreaElement)) {\n        return ((_a = TEXTAREA_DATA.get(textarea)) !== null && _a !== void 0 ? _a : null);\n    }\n    return null;\n};\n/**\n * Adds additional data to a textarea's data object.\n * @param callback A callback that is expected to return an object to merge into the textarea's data\n *    object. The callback receives the textarea, and the existing data object as its two arguments.\n */\nexport var addTextAreaData = function (callback) {\n    var e_1, _a;\n    try {\n        // Go through any existing textareas and update their data objects.\n        for (var TEXTAREA_DATA_1 = __values(TEXTAREA_DATA), TEXTAREA_DATA_1_1 = TEXTAREA_DATA_1.next(); !TEXTAREA_DATA_1_1.done; TEXTAREA_DATA_1_1 = TEXTAREA_DATA_1.next()) {\n            var _b = __read(TEXTAREA_DATA_1_1.value, 2), textarea = _b[0], textareaData = _b[1];\n            Object.assign(textareaData, callback(textarea, textareaData));\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (TEXTAREA_DATA_1_1 && !TEXTAREA_DATA_1_1.done && (_a = TEXTAREA_DATA_1.return)) _a.call(TEXTAREA_DATA_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // Add the callback to the list for future textareas.\n    TEXTAREA_DATA_GENERATORS.push(callback);\n};\nexport var addTextAreaCallback = function (callback) {\n    var e_2, _a;\n    try {\n        // Go through any existing textareas and call the callback on them.\n        for (var TEXTAREA_DATA_2 = __values(TEXTAREA_DATA), TEXTAREA_DATA_2_1 = TEXTAREA_DATA_2.next(); !TEXTAREA_DATA_2_1.done; TEXTAREA_DATA_2_1 = TEXTAREA_DATA_2.next()) {\n            var _b = __read(TEXTAREA_DATA_2_1.value, 1), textarea = _b[0];\n            callback(textarea);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (TEXTAREA_DATA_2_1 && !TEXTAREA_DATA_2_1.done && (_a = TEXTAREA_DATA_2.return)) _a.call(TEXTAREA_DATA_2);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    // Add the callback to the list for future textareas.\n    TEXTAREA_CALLBACKS.push(callback);\n};\n/**\n * Given a textarea, returns a new data object for the textarea by running all generators in\n * `TEXTAREA_DATA_GENERATORS` with the textarea as the argument and merging the results.\n * @param textarea The textarea to generate data for.\n * @returns The generated data object.\n */\nvar generateTextAreaData = function (textarea) {\n    var e_3, _a;\n    var data = {};\n    try {\n        for (var TEXTAREA_DATA_GENERATORS_1 = __values(TEXTAREA_DATA_GENERATORS), TEXTAREA_DATA_GENERATORS_1_1 = TEXTAREA_DATA_GENERATORS_1.next(); !TEXTAREA_DATA_GENERATORS_1_1.done; TEXTAREA_DATA_GENERATORS_1_1 = TEXTAREA_DATA_GENERATORS_1.next()) {\n            var generator = TEXTAREA_DATA_GENERATORS_1_1.value;\n            Object.assign(data, generator(textarea, data));\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (TEXTAREA_DATA_GENERATORS_1_1 && !TEXTAREA_DATA_GENERATORS_1_1.done && (_a = TEXTAREA_DATA_GENERATORS_1.return)) _a.call(TEXTAREA_DATA_GENERATORS_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return data;\n};\nwaitForElements(\"textarea\", function (textareas) {\n    var e_4, _a, e_5, _b;\n    try {\n        for (var textareas_1 = __values(textareas), textareas_1_1 = textareas_1.next(); !textareas_1_1.done; textareas_1_1 = textareas_1.next()) {\n            var textarea = textareas_1_1.value;\n            // Generate a new data object for this textarea.\n            TEXTAREA_DATA.set(textarea, generateTextAreaData(textarea));\n            try {\n                // Call the callbacks on this textarea.\n                for (var TEXTAREA_CALLBACKS_1 = (e_5 = void 0, __values(TEXTAREA_CALLBACKS)), TEXTAREA_CALLBACKS_1_1 = TEXTAREA_CALLBACKS_1.next(); !TEXTAREA_CALLBACKS_1_1.done; TEXTAREA_CALLBACKS_1_1 = TEXTAREA_CALLBACKS_1.next()) {\n                    var callback = TEXTAREA_CALLBACKS_1_1.value;\n                    callback(textarea);\n                }\n            }\n            catch (e_5_1) { e_5 = { error: e_5_1 }; }\n            finally {\n                try {\n                    if (TEXTAREA_CALLBACKS_1_1 && !TEXTAREA_CALLBACKS_1_1.done && (_b = TEXTAREA_CALLBACKS_1.return)) _b.call(TEXTAREA_CALLBACKS_1);\n                }\n                finally { if (e_5) throw e_5.error; }\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (textareas_1_1 && !textareas_1_1.done && (_a = textareas_1.return)) _a.call(textareas_1);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n});\nexport default getTextAreaData;\n","export var makeElement = function (elementName, attributesOrInnerHTML, innerHTML) {\n    var element = document.createElement(elementName);\n    if (typeof attributesOrInnerHTML === \"string\") {\n        element.innerHTML = attributesOrInnerHTML;\n    }\n    else if (attributesOrInnerHTML == null && typeof innerHTML === \"string\") {\n        element.innerHTML = innerHTML;\n    }\n    else if (attributesOrInnerHTML != null) {\n        for (var attributeName in attributesOrInnerHTML) {\n            var translatedName = attributeName === \"className\"\n                ? \"class\"\n                : attributeName === \"htmlFor\"\n                    ? \"for\"\n                    : attributeName;\n            element.setAttribute(translatedName, attributesOrInnerHTML[attributeName]);\n        }\n        if (typeof innerHTML === \"string\") {\n            element.innerHTML = innerHTML;\n        }\n    }\n    return element;\n};\nexport default makeElement;\n","/**\n * Turn unsafe text into text that won't render HTML when added inside .innerHTML.\n * @param string The unsafe text to escape.\n * @returns A string with HTML characters escaped.\n */\nexport var escapeHTML = function (string) {\n    return string\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\");\n};\nexport default escapeHTML;\n","export var TicketState;\n(function (TicketState) {\n    TicketState[TicketState[\"New\"] = 0] = \"New\";\n    TicketState[TicketState[\"Active\"] = 1] = \"Active\";\n    TicketState[TicketState[\"Pending\"] = 2] = \"Pending\";\n    TicketState[TicketState[\"Resolved\"] = 3] = \"Resolved\";\n})(TicketState || (TicketState = {}));\nexport var AssignmentGroup;\n(function (AssignmentGroup) {\n    AssignmentGroup[\"Triage\"] = \"VPSA LTS Student Technology Services Triage\";\n    AssignmentGroup[\"Escalation\"] = \"VPSA LTS Student Technology Services Escalation\";\n    AssignmentGroup[\"ResNet\"] = \"UIT ResNet\";\n    AssignmentGroup[\"ITOC\"] = \"UIT IT Operations Center\";\n})(AssignmentGroup || (AssignmentGroup = {}));\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      \n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = (element) => {\n                  var clones = [];\n                  // Add a clone of the element to every parent window (but not the current one\n                  // since the original `element` goes there).\n                  for (\n                    var currWindow = window.parent;\n                    currWindow !== window;\n                    currWindow = currWindow.parent\n                  ) {\n                    var clone = element.cloneNode(true);\n                    clones.push(clone);\n                    currWindow.document.head.appendChild(clone);\n                    if (currWindow.parent === currWindow) break;\n                  }\n                  // Update the clones every time the original changes.\n                  if (typeof window.MutationObserver !== \"undefined\") {\n                    new MutationObserver(function () {\n                      for (var i = 0; i < clones.length; i++) {\n                        clones[i].textContent = element.textContent;\n                      }\n                    }).observe(element, {\n                      childList: true,\n                      subtree: true,\n                      characterData: true,\n                    });\n                  }\n                  window.document.head.appendChild(element);\n                };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import assertNotNull from \"./assertNotNull\";\nimport escapeHTML from \"./escapeHTML\";\nimport makeElement from \"./makeElement\";\nimport getTextAreaData from \"./textareaData\";\n/**\n * Calculates the position of some text in a textarea.\n * @param textarea The textarea to calculate the text position for.\n * @param preText The text that comes before the currently selected text.\n * @param selectedText The currently selected text, or null if no text is selected.\n * @returns An object with top and left properties representing the position of the text cursor.\n */\nexport var calculateTextPosition = function (textarea, preText, selectedText) {\n    var data = assertNotNull(getTextAreaData(textarea), \"Cannot calculate text position for element: no data found.\");\n    updateMirrorStyles(textarea);\n    var mirror = data.mirror;\n    mirror.innerText = preText;\n    var selection = makeElement(\"span\", escapeHTML(selectedText !== null && selectedText !== void 0 ? selectedText : \"\"));\n    mirror.appendChild(selection);\n    return {\n        top: mirror.getBoundingClientRect().height,\n        left: selection.offsetLeft,\n    };\n};\n/**\n * Updates the styles of a textarea's mirror element to match the textarea's styles.\n * @param textarea The textarea to update the mirror for.\n */\nvar updateMirrorStyles = function (textarea) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    var elementStyles = data.elementStyles, mirror = data.mirror;\n    mirror.style.width =\n        textarea.getBoundingClientRect().width -\n            parseFloat(elementStyles.paddingLeft) -\n            parseFloat(elementStyles.paddingRight) -\n            parseFloat(elementStyles.borderLeftWidth) -\n            parseFloat(elementStyles.borderRightWidth) +\n            \"px\";\n    mirror.style.fontStyle = elementStyles.fontStyle;\n    mirror.style.fontFamily = elementStyles.fontFamily;\n    mirror.style.fontSize = elementStyles.fontSize;\n    mirror.style.fontWeight = elementStyles.fontWeight;\n    mirror.style.letterSpacing = elementStyles.letterSpacing;\n    mirror.style.lineHeight = elementStyles.lineHeight;\n};\nexport default calculateTextPosition;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { isInstance, resolveReplacements } from \".\";\nexport var setDropdown = function (dropdown, values) {\n    var e_1, _a, e_2, _b;\n    if (!isInstance(dropdown, HTMLSelectElement))\n        return false;\n    if (typeof values === \"string\")\n        values = [values];\n    var options = Array.from(dropdown.children).flatMap(function (child) {\n        return isInstance(child, HTMLOptGroupElement)\n            ? Array.from(child.children)\n            : [child];\n    });\n    var newValue = null;\n    try {\n        for (var values_1 = __values(values), values_1_1 = values_1.next(); !values_1_1.done; values_1_1 = values_1.next()) {\n            var value = values_1_1.value;\n            var _c = __read(resolveReplacements(value), 1), resolvedValue = _c[0];\n            try {\n                for (var options_1 = (e_2 = void 0, __values(options)), options_1_1 = options_1.next(); !options_1_1.done; options_1_1 = options_1.next()) {\n                    var option = options_1_1.value;\n                    if (option.value === resolvedValue ||\n                        option.innerText === resolvedValue) {\n                        newValue = option.value;\n                        break;\n                    }\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (options_1_1 && !options_1_1.done && (_b = options_1.return)) _b.call(options_1);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            if (newValue)\n                break;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (values_1_1 && !values_1_1.done && (_a = values_1.return)) _a.call(values_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    if (newValue == null)\n        return false;\n    dropdown.value = newValue;\n    dropdown.dispatchEvent(new Event(\"change\"));\n    return true;\n};\n// Sets the assignment group given the <input> element and the new value. The new value must be a\n// valid assignment group, otherwise the entire thing fails and nothing is changed. This uses\n// ServiceNow's own code to mimic what's happening under the hood, but that also means it's prone to\n// break if ServiceNow updates the way it works.\nexport var setDataList = function (datalist, value) { return __awaiter(void 0, void 0, void 0, function () {\n    var ac, _a, resolvedValue, xml, name2ID, ga_1, query;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0:\n                if (!isInstance(datalist, HTMLInputElement))\n                    return [2 /*return*/, false];\n                datalist = datalist;\n                // Make sure the input has an auto-completer associated with it.\n                if (!datalist.ac || datalist.ac.element !== datalist) {\n                    new window.AJAXReferenceCompleter(datalist, datalist.getAttribute(\"data-ref\"), \"\", \"\");\n                }\n                ac = datalist.ac;\n                // If there still is no auto-completer, then we can't do anything.\n                if (!ac)\n                    return [2 /*return*/, false];\n                // Sets the maximum number to return from ServiceNow's backend.\n                if (!ac.max) {\n                    ac.max = \"15\";\n                }\n                _a = __read(resolveReplacements(value), 1), resolvedValue = _a[0];\n                xml = ac.cacheGet(resolvedValue);\n                if (!xml) return [3 /*break*/, 1];\n                name2ID = parseXML(ac, xml);\n                return [3 /*break*/, 3];\n            case 1:\n                // Set the input's search characters so it knows what to search on the backend. We set it to the\n                // exact value we want to set it to so that only that one value is returned (unless it's a\n                // prefix of another value, but that shouldn't mess anything up).\n                ac.searchChars = resolvedValue;\n                ga_1 = new window.GlideAjax(ac.PROCESSOR);\n                query = ac.addSysParms() +\n                    ac.addDependentValue() +\n                    ac.addRefQualValues() +\n                    ac.addTargetTable() +\n                    ac.addAdditionalValues() +\n                    ac.addAttributes(\"ac_\");\n                ga_1.setQueryString(query);\n                return [4 /*yield*/, new Promise(function (resolve) {\n                        ga_1.getXML(function (response) {\n                            if (response.responseXML) {\n                                // Add the result to the cache for the future.\n                                ac.cachePut(resolvedValue, response.responseXML);\n                                resolve(parseXML(ac, response.responseXML));\n                            }\n                        });\n                    })];\n            case 2:\n                // Tell the GlideAjax to perform the request and parse the XML when it returns.\n                name2ID = _b.sent();\n                _b.label = 3;\n            case 3:\n                // If the value we want to set it to was not returned by the search results, it means the value\n                // is not a valid value and we don't have anything to set it to.\n                if (!(resolvedValue in name2ID))\n                    return [2 /*return*/, false];\n                ac.referenceSelect(name2ID[resolvedValue], resolvedValue);\n                ac.element.blur();\n                return [2 /*return*/, true];\n        }\n    });\n}); };\nvar parseXML = function (ac, xml) {\n    var e_3, _a;\n    // Parse the XML's items using ServiceNow's methods.\n    var items = ac._processItems(xml).concat(ac._processRecents(xml));\n    // Get the names and associated labels from the search results.\n    var name2ID = {};\n    try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n            var item = items_1_1.value;\n            name2ID[item.label] = item.name;\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return name2ID;\n};\n","/**\n * Creates and returns a Promise that waits the specified number of milliseconds.\n * @param ms The number of milliseconds to wait.\n * @returns A Promise that resolves after `ms` milliseconds.\n */\nexport var wait = function (ms) {\n    return new Promise(function (resolve) {\n        setTimeout(function () { return resolve(); }, ms);\n    });\n};\nexport default wait;\n","import wait from \"./wait\";\n/**\n * Wraps a Promise with a timeout. The returned Promise will reject after a maximum timeout if the\n * wrapped Promise has not resolved or rejected in the specified timeout. The rejection error will\n * be a string indicating the Promise timed out. If the wrapped Promise resolves or rejects before\n * the timeout is met, the wrapped Promise will reflect that result without waiting for the timeout.\n * @param promise The Promise to wrap.\n * @param timeout The number of milliseconds before the Promise times out.\n * @returns A Promise that resolves or rejects based `promise`, or rejects after `timeout`\n *        milliseconds if `promise` hasn't resolved or rejected yet.\n */\nexport var withMaxTimeout = function (promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var finished = false;\n        promise.then(function (result) {\n            if (!finished)\n                resolve(result);\n            finished = true;\n        }, function (err) {\n            if (!finished)\n                reject(err);\n            finished = true;\n        });\n        wait(timeout).then(function () {\n            if (!finished)\n                reject(new Error(\"Timeout of \".concat(timeout, \"ms exceeded on Promise.\")));\n            finished = true;\n        }, function (err) {\n            if (!finished)\n                reject(err);\n            finished = true;\n        });\n    });\n};\nexport default withMaxTimeout;\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { ServiceNowUITab, } from \"./types\";\nimport constants from \"../constants.json\";\nimport { TextAreaType, TicketType } from \"./types\";\nimport { replacementByTrigger } from \"../replacements/data\";\nimport dedent from \"./dedent\";\nimport assertNotNull from \"./assertNotNull\";\nimport isInstance from \"./isInstance\";\nimport { addTextAreaCallback, addTextAreaData, getTextAreaData, } from \"./textareaData\";\nimport makeElement from \"./makeElement\";\nimport escapeHTML from \"./escapeHTML\";\nimport \"./styles.scss\";\nimport { TicketState } from \"../macros/types\";\nexport { TextAreaType, TicketType } from \"./types\";\nexport { dedent } from \"./dedent\";\nexport { getTextAreaData } from \"./textareaData\";\nexport { calculateTextPosition } from \"./calculateTextPosition\";\nexport { isInstance } from \"./isInstance\";\nexport { assertNotNull } from \"./assertNotNull\";\nexport { setDropdown } from \"./setInputs\";\nexport { addTextAreaData, addTextAreaCallback } from \"./textareaData\";\nexport { escapeHTML } from \"./escapeHTML\";\nexport { wait } from \"./wait\";\nexport { waitForElements } from \"./waitForElements\";\nexport { makeElement } from \"./makeElement\";\nexport { withMaxTimeout } from \"./withMaxTimeout\";\n// addTextareaCallback(function (data) {\n//   this.addEventListener(\"keydown\", function (e) {\n//     if (\n//       e.code == \"Tab\" &&\n//       (data.isTabbingFormFields || data.wasTabbingFormFields) &&\n//       !data.isAutoFillingReplacement\n//     ) {\n//       const index = e.shiftKey\n//         ? Math.ceil(data.formFieldIndex) - 1\n//         : Math.floor(data.formFieldIndex) + 1;\n//       let caretIndices = getCaretIndicesOfTabField(data, index);\n//       // Allow a Tab event to go through as normal if we are no longer focusing on\n//       // a tabbable field.\n//       if (caretIndices) {\n//         e.preventDefault();\n//         data.formFieldIndex = index;\n//         data.element.setSelectionRange(...caretIndices);\n//         data.formFieldIndicator.lastElementChild.innerText = `${index}/${\n//           data.formFieldInnerText.length - 1\n//         }`;\n//         events.trigger(\"focus_form_field\", data, index);\n//       }\n//     }\n//   });\n//   this.parentNode.addEventListener(\"focusout\", function (e) {\n//     // If we focus an element outside the textarea, we want to stop showing the tab indicator.\n//     if (\n//       e.relatedTarget === null ||\n//       (e.relatedTarget instanceof HTMLElement &&\n//         !e.currentTarget.contains(e.relatedTarget))\n//     ) {\n//       data.isTabbingFormFields = false;\n//       data.wasTabbingFormFields = true;\n//       data.formFieldIndicator.style.display = \"none\";\n//     }\n//   });\n// });\nvar getTrimStart = function (string) {\n    var trimmed = string.trimStart();\n    return string.slice(0, string.length - trimmed.length);\n};\nvar getTrimEnd = function (string) {\n    var trimmed = string.trimEnd();\n    return string.slice(trimmed.length);\n};\n/**\n * Given a textarea, returns a list of indices that represent where each tab field starts and ends.\n * @param textarea The textarea to get the caret indices for.\n * @returns An array of 2-tuples. where item in the array corresponds to [start, end] of a tab field\n *        in the textarea. The array will have length `data.textBetweenFormFields.length - 1`. Each\n *        tuple has the start caret position and the end caret position. If the textarea's value\n *        does not match the expected formatting (i.e., `data.textBetweenFormFields`), this will\n *        return null since we can no longer match according to the form.\n */\nvar getFormFieldIndices = function (textarea) {\n    // Make sure we have valid data.\n    var data = getTextAreaData(textarea);\n    if (!data || !Array.isArray(data.textBetweenFormFields)) {\n        return null;\n    }\n    // Check if the first entry of textBetweenFormFields matches the beginning of the textarea's value.\n    var value = data.element.value;\n    var betweenText = data.textBetweenFormFields;\n    if (!value.trimStart().startsWith(betweenText[0].trimStart())) {\n        return null;\n    }\n    var indices = Array.from({ length: betweenText.length });\n    var lastIndex = 0;\n    for (var i = 0; i < betweenText.length; i++) {\n        var nextText = betweenText[i];\n        var nextWhitespace = getTrimStart(nextText);\n        var trimmedNextText = nextText.trim();\n        // Look for the next instance of nextText, but with its whitespace trimmed to be more forgiving\n        // if the user deletes a space or something.\n        var nextIndex = value.indexOf(trimmedNextText, lastIndex);\n        if (!~nextIndex)\n            return null;\n        var offsetNextIndex = nextIndex;\n        // Go through and add back any whitespace we find.\n        for (var j = nextWhitespace.length - 1; j >= 0; j--) {\n            if (nextWhitespace[j] === value[offsetNextIndex - 1]) {\n                offsetNextIndex--;\n            }\n        }\n        // Add the indices we have to the list of indices.\n        indices[i] = [lastIndex, offsetNextIndex];\n        // Update lastIndex for the next iteration.\n        lastIndex = nextIndex + trimmedNextText.length;\n        var prevWhitespace = getTrimEnd(nextText);\n        // Go through and add back any whitespace we find.\n        for (var j = 0; j < prevWhitespace.length; j++) {\n            if (prevWhitespace[j] === value[lastIndex]) {\n                lastIndex++;\n            }\n        }\n    }\n    // Remove the first item from indices since that just holds indices for the beginning of the text\n    // but does not correspond to an actual tab field.\n    indices.shift();\n    return indices;\n};\n/**\n * Sets or hides a textarea's tooltip text.\n * @param textarea The textarea to set the tooltip for.\n * @param tooltipHTML The innerHTML of the tooltip, or null to hide the tooltip.\n * @param closeCallback The optional callback that gets invoked when the user closes out of the\n *        tooltip.\n */\nexport var setTextAreaTooltip = function (textarea, tooltipHTML, closeCallback) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    if (tooltipHTML == null) {\n        // Remove any tooltip currently showing.\n        data.tooltipCloser = null;\n        data.tooltip.style.display = \"none\";\n    }\n    else {\n        // Show the tooltip with the specified HTML and closer callback.\n        data.tooltipCloser = closeCallback !== null && closeCallback !== void 0 ? closeCallback : null;\n        data.tooltip.lastElementChild.innerHTML = tooltipHTML;\n        data.tooltip.style.display = \"\";\n    }\n};\n/**\n * Wraps a string in code delimiters.\n * @param text The text to wrap in code delimiters.\n * @returns The text, wrapped in code delimiters.\n */\nexport var withCodeDelimiters = function (text) {\n    return constants.CODE_DELIMITERS.START + text + constants.CODE_DELIMITERS.END;\n};\n/**\n * Wraps a string in replacement delimiters.\n * @param text The text to wrap in replacement delimiters.\n * @returns The text, wrapped in replacement delimiters.\n */\nexport var withReplacementDelimiters = function (text) {\n    return (constants.REPLACEMENT_DELIMITERS.START +\n        text +\n        constants.REPLACEMENT_DELIMITERS.END);\n};\n/**\n * Returns another value instead of `-1` when we use `.indexOf()` (i.e., turns \"no index\" into\n * something else).\n * @param otherValue The value to switch to if `index` is `-1`.\n * @param index The index to check for `-1`.\n * @returns Either `index` or `otherValue` if `index` is `-1`.\n */\nexport var turnNoIndexInto = function (otherValue, index) {\n    return index === -1 ? otherValue : index;\n};\n/**\n * A wrapper around Node.cloneNode that returns the proper Node type.\n * @param node The Node to clone.\n * @param deep Whether to also clone the node's descendants.\n * @returns The cloned Node.\n */\nexport var cloneNode = function (node, deep) {\n    return node.cloneNode(deep);\n};\n/**\n * Returns the type of ticket being viewed.\n * @returns The type of ticket being viewed.\n */\nexport var getTicketType = function () {\n    var path = location.pathname;\n    if (path.startsWith(\"/sc_task\")) {\n        return TicketType.Task;\n    }\n    else if (path.startsWith(\"/incident\")) {\n        return TicketType.Incident;\n    }\n    else if (path.startsWith(\"/ticket\")) {\n        return TicketType.SupportRequest;\n    }\n    else {\n        throw new Error(\"Encountered unrecognized ticket type.\");\n    }\n};\n/**\n * Navigates to a specific tab in the ServiceNow UI.\n * @param tab The tab to navigate to.\n * @returns A boolean indicating whether the tab was found and navigated to.\n */\nexport var showTab = function (tab) {\n    var _a;\n    var tabBar = assertNotNull(document.getElementById(\"tabs2_section\"), \"Could not find tab bar (#tabs2_section) element.\");\n    var re = new RegExp(\"\\\\b\".concat(tab, \"\\\\b\"));\n    var tabBtn = (_a = Array.from(tabBar.children).find(function (item) {\n        return isInstance(item, HTMLElement) ? item.innerText.match(re) : false;\n    })) === null || _a === void 0 ? void 0 : _a.firstElementChild;\n    if (isInstance(tabBtn, HTMLElement)) {\n        tabBtn.click();\n        return true;\n    }\n    else {\n        return false;\n    }\n};\n/**\n * Shows a specific textarea in the ServiceNow UI.\n *\n * Task tickets do not have a CloseNotes textarea, so attempting to show that textarea in a Task\n * ticket will not do anything.\n *\n * @param type The type of text area to show.\n */\nexport var showTextArea = function (type) {\n    var isNewTicket = getIsNewTicket();\n    switch (type) {\n        case TextAreaType.CloseNotes: {\n            // Navigate to the Closure Information tab if one exists, and that's all we need to do.\n            showTab(ServiceNowUITab.ClosureInfo);\n            break;\n        }\n        case TextAreaType.Comments: {\n            switch (getTicketType()) {\n                case TicketType.Task:\n                    // Task tickets always have the comments text area being shown, so we don't need to do\n                    // anything extra here.\n                    break;\n                case TicketType.Incident:\n                case TicketType.SupportRequest: {\n                    // Show the Notes tab where the textareas are.\n                    showTab(ServiceNowUITab.Notes);\n                    // Determine if both the comments and work notes are being displayed already.\n                    var multipleTextFieldContainer = document.getElementById(\"multiple-input-journal-entry\");\n                    if ((multipleTextFieldContainer &&\n                        multipleTextFieldContainer.offsetParent) ||\n                        isNewTicket) {\n                        // The container for multiple fields is already being shown; no need to do anything\n                        // more.\n                        return;\n                    }\n                    // Otherwise, only one textarea is being shown. It *may* be the comments textarea, but it\n                    // might also be the work notes textarea, so we need to check that and switch to the\n                    // comments textarea if necessary.\n                    var checkboxes = document.querySelectorAll(\"input[type=checkbox][name=comments-journal-checkbox],\" +\n                        \"input[type=checkbox][name=work_notes-journal-checkbox]\");\n                    if (checkboxes.length === 0) {\n                        throw new Error(\"Could not find comment / work notes toggle checkbox.\");\n                    }\n                    if (checkboxes.length > 1) {\n                        console.warn(\"Multiple comment / work notes toggle checkboxes found. Using the first one.\");\n                    }\n                    var checkbox = checkboxes[0];\n                    var parent_1 = assertNotNull(checkbox.parentElement, \"Could not find parent element of comment / work notes toggle checkbox.\");\n                    // Check if this is a Work Notes or Comments checkbox.\n                    var isWorkNotesEnabled = parent_1.innerText\n                        .toLowerCase()\n                        .includes(\"work notes\")\n                        ? checkbox.checked\n                        : !checkbox.checked;\n                    // If work notes are enabled, we need to disable them by clicking the checkbox.\n                    if (isWorkNotesEnabled) {\n                        checkbox.click();\n                    }\n                    break;\n                }\n            }\n            break;\n        }\n        case TextAreaType.WorkNotes: {\n            switch (getTicketType()) {\n                case TicketType.Task: {\n                    // Task tickets always have the Work Notes text area visible in the Notes tab, so we just\n                    // need to switch to that tab.\n                    showTab(ServiceNowUITab.Notes);\n                    break;\n                }\n                case TicketType.Incident:\n                case TicketType.SupportRequest: {\n                    // Show the Notes tab where the textareas are.\n                    showTab(ServiceNowUITab.Notes);\n                    // Determine if both the comments and work notes are being displayed already.\n                    var multipleTextFieldContainer = document.getElementById(\"multiple-input-journal-entry\");\n                    if ((multipleTextFieldContainer &&\n                        multipleTextFieldContainer.offsetParent) ||\n                        isNewTicket) {\n                        // The container for multiple fields is already being shown; no need to do anything\n                        // more.\n                        return;\n                    }\n                    // Otherwise, only one textarea is being shown. It *may* be the comments textarea, but it\n                    // might also be the work notes textarea, so we need to check that and switch to the\n                    // comments textarea if necessary.\n                    var checkboxes = document.querySelectorAll(\"input[type=checkbox][name*=journal-checkbox]\");\n                    if (checkboxes.length === 0) {\n                        throw new Error(\"Could not find comment / work notes toggle checkbox.\");\n                    }\n                    if (checkboxes.length > 1) {\n                        console.warn(\"Multiple comment / work notes toggle checkboxes found. Using the first one.\");\n                    }\n                    var checkbox = checkboxes[0];\n                    var parent_2 = assertNotNull(checkbox.parentElement, \"Could not find parent element of comment / work notes toggle checkbox.\");\n                    // Check if this is a Work Notes or Comments checkbox.\n                    var isWorkNotesEnabled = parent_2.innerText\n                        .toLowerCase()\n                        .includes(\"work notes\")\n                        ? checkbox.checked\n                        : !checkbox.checked;\n                    // If work notes are not enabled, we need to enable them by clicking the checkbox.\n                    if (!isWorkNotesEnabled) {\n                        checkbox.click();\n                    }\n                    break;\n                }\n            }\n            break;\n        }\n        case TextAreaType.CommentsAndWorkNotes: {\n            switch (getTicketType()) {\n                case TicketType.Task: {\n                    // Task tickets always have the Comments text area visible, and the Work Notes text area\n                    // is visible in the Notes tab, so we just need to switch to that tab.\n                    showTab(ServiceNowUITab.Notes);\n                    break;\n                }\n                case TicketType.Incident:\n                case TicketType.SupportRequest: {\n                    // Show the Notes tab where the textareas are.\n                    showTab(ServiceNowUITab.Notes);\n                    // Determine if both the comments and work notes are being displayed already.\n                    var multipleTextFieldContainer = document.getElementById(\"multiple-input-journal-entry\");\n                    if ((multipleTextFieldContainer &&\n                        multipleTextFieldContainer.offsetParent) ||\n                        isNewTicket) {\n                        // The container for multiple fields is already being shown; no need to do anything\n                        // more.\n                        return;\n                    }\n                    var singleTextFieldContainer = assertNotNull(document.getElementById(\"single-input-journal-entry\"), \"Could not find #single-input-journal-entry element.\");\n                    var toggleBtn = assertNotNull(singleTextFieldContainer.querySelector(\".form-toggle-inputs button\"), \"Could not find single/multi-textarea toggle button.\");\n                    toggleBtn.click();\n                    break;\n                }\n            }\n            break;\n        }\n    }\n};\naddTextAreaData(function (textarea) {\n    var elementStyles = getComputedStyle(textarea);\n    var mirror = makeElement(\"div\", {\n        className: \"\".concat(constants.EXTENSION_PREFIX, \"-textarea-mirror\"),\n    });\n    document.body.appendChild(mirror);\n    var tooltip = makeElement(\"div\", {\n        className: \"\".concat(constants.EXTENSION_PREFIX, \"-textarea-tooltip form-control\"),\n        style: \"display: none; width: auto !important;\",\n    }, \"<button class=\\\"btn btn-default\\\"><span class=\\\"icon icon-connect-close\\\"></span></button><span></span>\");\n    if (textarea.parentNode) {\n        textarea.parentNode.appendChild(tooltip);\n    }\n    tooltip.firstElementChild.addEventListener(\"mousedown\", function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n    });\n    tooltip.firstElementChild.addEventListener(\"click\", function (e) {\n        var _a, _b;\n        e.preventDefault();\n        e.stopPropagation();\n        // Call the closer callback associated with the textarea.\n        (_b = (_a = getTextAreaData(textarea)) === null || _a === void 0 ? void 0 : _a.tooltipCloser) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        // Remove the tooltip.\n        setTextAreaTooltip(textarea, null);\n    });\n    // Now, we can add the bar element after the textarea.\n    var subBar = makeElement(\"div\", {\n        className: \"\".concat(constants.EXTENSION_PREFIX, \"-textarea-sub-bar form-control\"),\n    });\n    if (textarea.parentNode) {\n        textarea.parentNode.insertBefore(subBar, textarea.nextElementSibling);\n    }\n    textarea.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-has-sub-bar\"), \"false\");\n    // If the textarea has a height of 0 and is a direct descendant of <body>, we probably\n    // don't want to show this sub bar since the textarea is hidden and probably won't be shown.\n    if (textarea.offsetHeight <= 1 && textarea.parentNode === document.body) {\n        subBar.style.display = \"none\";\n    }\n    // formFieldInnerText: null,\n    // isTabbingFormFields: false,\n    // wasTabbingFormFields: false,\n    return {\n        element: textarea,\n        elementStyles: elementStyles,\n        suppressInputs: false,\n        mirror: mirror,\n        tooltip: tooltip,\n        subBar: subBar,\n        formFieldIndex: 0,\n        isTabbingFormFields: false,\n        textBetweenFormFields: null,\n        characterCounter: null,\n        hiddenCharacterCounter: null,\n        characterCounterFunction: function (text) { return text.length; },\n    };\n});\nvar characterCounterObserverCallback = function (observer, textarea) {\n    var _a, _b, _c, _d, _e, _f;\n    // Check if this textarea has a character counter after it. If it does, we need to change it.\n    // ServiceNow (most likely) waits for the textarea to update, and then uses .nextElementSibling to\n    // retrieve the character counter, and then updates it. We want to insert an element right after\n    // the textarea, and before the character counter though, so in order to prevent ServiceNow from\n    // overwriting and elements we add in between that space, we make a hidden character counter\n    // element that gets updated by ServiceNow. Every time that gets changed, we update the previous\n    // character counter to match that text. That allows us to insert elements after the textarea, but\n    // before the counter displayed text.\n    var actualCounter = ((_a = textarea.nextElementSibling) === null || _a === void 0 ? void 0 : _a.classList.contains(\"counter\"))\n        ? textarea.nextElementSibling\n        : ((_c = (_b = textarea.nextElementSibling) === null || _b === void 0 ? void 0 : _b.nextElementSibling) === null || _c === void 0 ? void 0 : _c.classList.contains(\"counter\"))\n            ? textarea.nextElementSibling.nextElementSibling\n            : null;\n    var data = getTextAreaData(textarea);\n    // Check that there is an actual counter associated with this element.\n    if (!data || !isInstance(actualCounter, HTMLElement))\n        return;\n    var match = actualCounter.innerText.match(/\\d+ characters remaining of (\\d+) characters/);\n    var maxChars = match ? +match[1] : 0;\n    observer.disconnect();\n    data.characterCounter = actualCounter;\n    var hiddenCounter = makeElement(\"span\", {\n        // Since ServiceNow just uses .nextElementSibling and overwrites its innerText, we can straight\n        // up hide our counter with display: none. The text will still get updated.\n        style: \"display: none;\",\n        className: \"counter \".concat(constants.EXTENSION_PREFIX, \"-hidden-char-counter\"),\n    });\n    data.hiddenCharacterCounter = hiddenCounter;\n    // Wait for ServiceNow to update the hiddenCounter's innerText, and then copy that to the old\n    // counter display.\n    new MutationObserver(function () {\n        var charCount = data.characterCounterFunction(textarea.value);\n        var leftover = maxChars - charCount;\n        actualCounter.innerText = \"\".concat(leftover, \" characters remaining of \").concat(maxChars, \" characters\");\n        if (leftover >= 20) {\n            actualCounter.classList.remove(\"warning\", \"exceeded\");\n        }\n        else if (leftover >= 0) {\n            actualCounter.classList.remove(\"exceeded\");\n            actualCounter.classList.add(\"warning\");\n        }\n        else {\n            actualCounter.classList.remove(\"warning\");\n            actualCounter.classList.add(\"exceeded\");\n        }\n    }).observe(hiddenCounter, {\n        characterData: true,\n        childList: true,\n        subtree: true,\n    });\n    if (textarea.parentNode) {\n        textarea.parentNode.insertBefore(hiddenCounter, textarea.nextSibling);\n        textarea.parentNode.insertBefore(data.subBar, actualCounter);\n    }\n    // The next, NEXT element may also need to be copied in the same way.\n    var liveRegion = ((_d = actualCounter.nextElementSibling) === null || _d === void 0 ? void 0 : _d.id.includes(\"live_region_text\"))\n        ? actualCounter.nextElementSibling\n        : ((_f = (_e = actualCounter.nextElementSibling) === null || _e === void 0 ? void 0 : _e.nextElementSibling) === null || _f === void 0 ? void 0 : _f.id.includes(\"live_region_text\"))\n            ? actualCounter.nextElementSibling.nextElementSibling\n            : null;\n    if (!isInstance(liveRegion, HTMLElement))\n        return;\n    var liveRegionClone = makeElement(\"span\", {\n        style: \"display: none;\",\n    });\n    new MutationObserver(function () {\n        liveRegion.innerText = liveRegionClone.innerText;\n    }).observe(liveRegionClone, {\n        characterData: true,\n        childList: true,\n        subtree: true,\n    });\n    if (textarea.parentNode) {\n        textarea.parentNode.insertBefore(liveRegionClone, hiddenCounter.nextSibling);\n    }\n};\naddTextAreaCallback(function (textarea) {\n    /**\n     * Add a keydown listener for tabbing between form fields when the field is being treated as a\n     * form.\n     */\n    textarea.addEventListener(\"keydown\", function (e) {\n        var _a;\n        var data = getTextAreaData(textarea);\n        if (!data)\n            return;\n        if (e.code === \"Tab\" &&\n            (data.isTabbingFormFields || data.wasTabbingFormFields) &&\n            Array.isArray(data.textBetweenFormFields) &&\n            !data.isReplacing) {\n            var index = e.shiftKey\n                ? Math.ceil(data.formFieldIndex) - 1\n                : Math.floor(data.formFieldIndex) + 1;\n            var caretIndices = (_a = getFormFieldIndices(textarea)) === null || _a === void 0 ? void 0 : _a[index - 1];\n            // Allow a Tab event to go through as normal if we are no longer focusing on\n            // a tabbable field.\n            if (caretIndices) {\n                e.preventDefault();\n                data.formFieldIndex = index;\n                data.element.setSelectionRange(caretIndices[0], caretIndices[1]);\n                setTextAreaTooltip(textarea, \"Use <kbd>Tab</kbd> to move to the next field (\".concat(index, \"/\").concat(data.textBetweenFormFields.length - 1, \")\"), function () { return handleCloseFormTooltip(textarea); });\n            }\n        }\n    });\n    var observer = new MutationObserver(function (_, observer) {\n        return characterCounterObserverCallback(observer, textarea);\n    });\n    if (textarea.parentNode) {\n        observer.observe(textarea.parentNode, {\n            childList: true,\n        });\n        characterCounterObserverCallback(observer, textarea);\n    }\n    var _loop_1 = function (prevNode) {\n        if (prevNode.classList.contains(\"sn-stream-input-decorator\") &&\n            isInstance(prevNode, HTMLElement)) {\n            var decorator_1 = prevNode;\n            decorator_1.style.bottom = \"initial\";\n            var data_1 = getTextAreaData(textarea);\n            decorator_1.style.height =\n                ((data_1 === null || data_1 === void 0 ? void 0 : data_1.elementStyles)\n                    ? parseFloat(data_1.elementStyles.height)\n                    : textarea.getBoundingClientRect().height) -\n                    6 +\n                    \"px\";\n            new MutationObserver(function () {\n                if (!data_1)\n                    return;\n                decorator_1.style.height =\n                    parseFloat(data_1.elementStyles.height) - 6 + \"px\";\n            }).observe(textarea, {\n                attributes: true,\n                attributeFilter: [\"style\"],\n            });\n            return \"break\";\n        }\n    };\n    // Update the decorator element (the golden side strip thingy) to match the height of the textarea\n    // as it changes.\n    for (var prevNode = textarea.previousElementSibling; prevNode; prevNode = prevNode.previousElementSibling) {\n        var state_1 = _loop_1(prevNode);\n        if (state_1 === \"break\")\n            break;\n    }\n    textarea.addEventListener(\"keydown\", function (e) {\n        var _a, _b;\n        if (e.code === \"Escape\") {\n            // If the user presses Escape while a tooltip is being shown, close it and invoke the close\n            // listener.\n            (_b = (_a = getTextAreaData(textarea)) === null || _a === void 0 ? void 0 : _a.tooltipCloser) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n            setTextAreaTooltip(textarea, null);\n        }\n    });\n});\nvar handleCloseFormTooltip = function (textarea) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    data.isTabbingFormFields = false;\n    data.wasTabbingFormFields = false;\n    data.formFieldIndex = 0;\n    data.textBetweenFormFields = null;\n};\ndocument.addEventListener(\"selectionchange\", function () {\n    if (!isInstance(document.activeElement, HTMLTextAreaElement))\n        return;\n    var data = getTextAreaData(document.activeElement);\n    var textarea = document.activeElement;\n    // If this textarea does not have data associated with it, or we are not currently using it as a\n    // form, we don't need to do anything else.\n    if (!data || (!data.wasTabbingFormFields && !data.isTabbingFormFields))\n        return;\n    // Determine which field is currently focused by checking where the caret lies.\n    var caretPos = textarea.selectionStart;\n    var tabFieldIndices = getFormFieldIndices(textarea);\n    // If we aren't able to match the textfield's value with the form template, the form is broken and\n    // we can no longer use it as a form.\n    if (!tabFieldIndices) {\n        data.isTabbingFormFields = false;\n        data.wasTabbingFormFields = false;\n        data.textBetweenFormFields = null;\n        data.formFieldIndex = 0;\n        setTextAreaTooltip(textarea, null);\n        return;\n    }\n    var currentIndex = tabFieldIndices.length + 0.5;\n    for (var fieldIndex = 0; fieldIndex < tabFieldIndices.length; fieldIndex++) {\n        var _a = __read(tabFieldIndices[fieldIndex], 2), start = _a[0], end = _a[1];\n        if (caretPos < start) {\n            currentIndex = fieldIndex + 0.5;\n            break;\n        }\n        else if (caretPos <= end) {\n            currentIndex = fieldIndex + 1;\n            break;\n        }\n    }\n    if (currentIndex % 1 === 0) {\n        // We are focusing on a specific field. We can show the exact number in the tooltip.\n        data.isTabbingFormFields = true;\n        data.wasTabbingFormFields = false;\n        data.formFieldIndex = currentIndex;\n        setTextAreaTooltip(textarea, \"Use <kbd>Tab</kbd> to move to the next field (\".concat(currentIndex, \"/\").concat(tabFieldIndices.length, \")\"), function () { return handleCloseFormTooltip(textarea); });\n    }\n    else {\n        // We are focusing on some index in between fields. Instead of showing the exact number, show a\n        // \"?\" to indicate that we are not focused on any of the fields.\n        data.isTabbingFormFields = false;\n        data.wasTabbingFormFields = true;\n        data.formFieldIndex = currentIndex;\n        setTextAreaTooltip(textarea, \"Use <kbd>Tab</kbd> to move to the next field (?/\".concat(tabFieldIndices.length, \")\"), function () { return handleCloseFormTooltip(textarea); });\n    }\n});\n/**\n * Given a textarea, returns its type.\n * @param textarea The textarea to get the text for.\n * @returns The textarea's type.\n */\nexport var getTextAreaType = function (textarea) {\n    var id = textarea.id;\n    var ticketType = getTicketType();\n    var isNewTicket = getIsNewTicket();\n    if (id === \"activity-stream-textarea\") {\n        var type = textarea.dataset.streamTextInput;\n        if (type === null || type === void 0 ? void 0 : type.includes(\"comments\")) {\n            return TextAreaType.Comments;\n        }\n        else if (type === null || type === void 0 ? void 0 : type.includes(\"work_notes\")) {\n            return TextAreaType.WorkNotes;\n        }\n        else {\n            return null;\n        }\n    }\n    else if (id.includes(\"work_notes\") &&\n        (id.includes(\"activity-stream\") || isNewTicket)) {\n        return TextAreaType.WorkNotes;\n    }\n    else if (id.includes(\"comments\") &&\n        (ticketType === TicketType.Task ||\n            id.includes(\"activity-stream\") ||\n            isNewTicket)) {\n        return TextAreaType.Comments;\n    }\n    else if (id.includes(\"close_notes\")) {\n        return TextAreaType.CloseNotes;\n    }\n    else {\n        return null;\n    }\n};\nexport var writeToTextArea = function (textarea, value, passedCaretPositions) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    passedCaretPositions = Array.isArray(passedCaretPositions)\n        ? passedCaretPositions.length === 2 &&\n            typeof passedCaretPositions[0] === \"number\" &&\n            typeof passedCaretPositions[1] === \"number\"\n            ? [passedCaretPositions]\n            : passedCaretPositions\n        : [];\n    // Resolve any replacements in the text.\n    var _a = __read(resolveReplacements(value, passedCaretPositions), 2), resolvedValue = _a[0], caretPositions = _a[1];\n    if (textarea.offsetParent)\n        textarea.focus();\n    if (textarea.value !== resolvedValue) {\n        // Check if the browser will let us carry out the proper commands.\n        var insertHTMLAllowed = document.queryCommandSupported(\"insertHTML\") &&\n            document.queryCommandEnabled(\"insertHTML\");\n        var insertTextAllowed = document.queryCommandSupported(\"insertText\") &&\n            document.queryCommandEnabled(\"insertText\");\n        // Instead of replacing the entire textarea's value, we just want to replace the subsection\n        // that changes. For example, if the textarea already says \"this is some text\", and we want to\n        // write \"this is example text\", we only need to replace \"some\" with \"example\". This makes it\n        // easier for undoing and redoing.\n        // Calculate where the first difference is.\n        var startIndex = -1;\n        for (var i = 0; i < Math.max(resolvedValue.length, textarea.value.length); i++) {\n            if (resolvedValue[i] !== textarea.value[i]) {\n                startIndex = i;\n                break;\n            }\n        }\n        // Do the same from the end.\n        var endIndex = -1;\n        for (var i = 0; i < Math.max(resolvedValue.length, textarea.value.length); i++) {\n            if (resolvedValue[resolvedValue.length - i - 1] !==\n                textarea.value[textarea.value.length - i - 1]) {\n                endIndex = i;\n                break;\n            }\n        }\n        var hasBeenReplaced = false;\n        var replacementValue = resolvedValue.substring(startIndex, resolvedValue.length - endIndex);\n        data.suppressInputs = true;\n        if (insertHTMLAllowed && document.activeElement === textarea) {\n            textarea.setSelectionRange(startIndex, textarea.value.length - endIndex);\n            // We set the textarea's value using insertHTML to allow for undoing/redoing, and because\n            // insertHTML seems to perform much faster than insertText in some browsers.\n            hasBeenReplaced = document.execCommand(\"insertHTML\", false, escapeHTML(replacementValue) +\n                (replacementValue[replacementValue.length - 1] === \"\\n\" ? \"<br>\" : \"\"));\n        }\n        else if (insertTextAllowed && document.activeElement === data.element) {\n            textarea.setSelectionRange(startIndex, textarea.value.length - endIndex);\n            // Fall back to insertText if insertHTML is not enabled (Firefox).\n            hasBeenReplaced = document.execCommand(\"insertText\", false, replacementValue);\n        }\n        if (!hasBeenReplaced) {\n            // Set the value directly if all else fails.\n            textarea.value = resolvedValue;\n        }\n        data.suppressInputs = false;\n    }\n    // If we have multiple places to insert a caret, turn this into a form with multiple fields to\n    // tab to.\n    if (caretPositions.length > 1) {\n        setTextAreaTooltip(textarea, \"Use <kbd>Tab</kbd> to move to the next field (1/\".concat(caretPositions.length, \")\"), function () { return handleCloseFormTooltip(textarea); });\n        data.isTabbingFormFields = true;\n        data.formFieldIndex = 1;\n        data.textBetweenFormFields = new Array(caretPositions.length + 1);\n        for (var i = 0, lastIndex = 0; i < caretPositions.length; i++) {\n            data.textBetweenFormFields[i] = resolvedValue.substring(lastIndex, caretPositions[i][0]);\n            lastIndex = caretPositions[i][1];\n        }\n        data.textBetweenFormFields[caretPositions.length] = resolvedValue.substring(caretPositions[caretPositions.length - 1][1]);\n    }\n    if (caretPositions.length > 0) {\n        textarea.setSelectionRange.apply(textarea, __spreadArray([], __read(caretPositions[0]), false));\n    }\n};\nexport var resolveReplacements = function (value, passedCaretPositions) {\n    var _a = __read(resolveReplacementsRecursive(0, value, Array.isArray(passedCaretPositions)\n        ? passedCaretPositions.length === 2 &&\n            typeof passedCaretPositions[0] === \"number\" &&\n            typeof passedCaretPositions[1] === \"number\"\n            ? [passedCaretPositions]\n            : passedCaretPositions\n        : []), 2), resolvedText = _a[0], caretPositions = _a[1];\n    // Sort caret positions by their starting index.\n    caretPositions.sort(function (a, b) { return a[0] - b[0]; });\n    return [resolvedText, caretPositions];\n};\n/**\n * The recursive function used by `resolveReplacements`. Each call will look for {{replacement}}s in\n * the passed-in string and resolve one layer, calling itself recursively to resolve any nested\n * replacements.\n * @param level The current level of recursion. Each recursive call adds 1 to this value, and stops\n *    `   once it reaches `constants.MAX_REPLACEMENT_RECURSION_DEPTH`.\n * @param value The string to resolve replacements for.\n * @param caretPositions A list of caret positions to maintain and add to when making replacements.\n * @returns A 2-tuple where the first item is the string with replacements resolved, and the second\n *        item is an array of caret positions.\n */\nvar resolveReplacementsRecursive = function (level, value, caretPositions) {\n    var lastIndex = value.length;\n    var startIndex;\n    var _loop_2 = function () {\n        // Check if there is a closing delimiter that follows this starting delimiter.\n        var endIndex = value.indexOf(constants.REPLACEMENT_DELIMITERS.END, startIndex);\n        // No end delimiter indicates there are no more replacements to make.\n        if (!~endIndex) {\n            return \"break\";\n        }\n        // Get the string between the two delimiters.\n        var nestedString = value.substring(startIndex + constants.REPLACEMENT_DELIMITERS.START.length, endIndex);\n        var _a = __read(expandString(level + 1, nestedString), 3), expansion = _a[0], extraCaretPositions = _a[1], gotExpanded = _a[2];\n        // Move over any existing carets to account for the new replacement.\n        caretPositions = caretPositions.map(function (_a) {\n            var _b = __read(_a, 2), leftCaretPos = _b[0], rightCaretPos = _b[1];\n            var newLeftPos = leftCaretPos;\n            var newRightPos = rightCaretPos;\n            if (gotExpanded &&\n                endIndex + constants.REPLACEMENT_DELIMITERS.END.length <= rightCaretPos) {\n                // If the caret position is after the current replacement, we need to move it to account\n                // for the new characters.\n                newRightPos +=\n                    expansion.length -\n                        (endIndex + constants.REPLACEMENT_DELIMITERS.END.length - startIndex);\n            }\n            else if (gotExpanded && startIndex < newRightPos) {\n                // If the caretPosition is in between the starting end ending delimiters, we move the\n                // caret position to be right after the replacement.\n                newRightPos = startIndex + expansion.length;\n            }\n            else {\n                // Otherwise we don't need to move the caret at all.\n            }\n            // Do the same for the left caret position.\n            if (gotExpanded &&\n                endIndex + constants.REPLACEMENT_DELIMITERS.END.length <= leftCaretPos) {\n                newLeftPos +=\n                    expansion.length -\n                        (endIndex + constants.REPLACEMENT_DELIMITERS.END.length - startIndex);\n            }\n            else if (gotExpanded && startIndex < newLeftPos) {\n                newLeftPos = startIndex + expansion.length;\n            }\n            return [newLeftPos, newRightPos];\n        });\n        // Add the new caret positions to the list, after moving them over as well.\n        caretPositions = caretPositions.concat(extraCaretPositions.map(function (_a) {\n            var _b = __read(_a, 2), leftCaretPos = _b[0], rightCaretPos = _b[1];\n            return [\n                leftCaretPos + startIndex,\n                rightCaretPos + startIndex,\n            ];\n        }));\n        value =\n            value.substring(0, startIndex) +\n                expansion +\n                value.substring(endIndex + constants.REPLACEMENT_DELIMITERS.END.length);\n        // Update lastIndex so we only look for opening delimiters from before the current point.\n        lastIndex = startIndex - 1;\n    };\n    // Get the position of the last opening delimiter in the string and repeat until we're done.\n    while (~(startIndex = value.lastIndexOf(constants.REPLACEMENT_DELIMITERS.START, lastIndex)) &&\n        lastIndex >= 0) {\n        var state_2 = _loop_2();\n        if (state_2 === \"break\")\n            break;\n    }\n    // Return the value with replacements resolved, along with an array of cursor positions.\n    return [value, caretPositions];\n};\n/**\n * Replaces the value inside replacement delimiters with the corresponding replacement. Since\n * replacements may contain other replacements, this function is recursive and has a maximum\n * recursion depth of `constants.MAX_REPLACEMENT_RECURSION_DEPTH`.\n * @param string The text inside replacement delimiters.\n * @param level The current level of nesting.\n * @returns A 3-tuple where the first item is the resolved string, the second item is a list of\n *        CaretPositions that were generated by this replacement, and the third item is a boolean\n *        indicating whether or not the string was expanded correctly. The second item can be false\n *        for a replacement that does not exist.\n */\nvar expandString = function (level, string) {\n    var _a;\n    if (level >= constants.MAX_REPLACEMENT_RECURSION_DEPTH) {\n        return [\"[Maximum recursion depth exceeded]\", [], true];\n    }\n    var unchanged = string;\n    var caretPositions = [];\n    // Check if this replacement has arguments by looking for a colon.\n    var colonIndex = string.indexOf(\":\");\n    // If there is a colon, we have to parse out parameters for the replacement.\n    var parameters = [];\n    if (~colonIndex) {\n        // Resolve any replacements in the parameters as well.\n        parameters = parseReplacementParameters(string.substring(colonIndex + 1));\n        string = string.substring(0, colonIndex);\n    }\n    string = string.trim().toLowerCase();\n    var replacedValue;\n    if (string === \"cursor\") {\n        // Handle the \"cursor\" replacement as a special one.\n        replacedValue = parameters[0] || \"\";\n        caretPositions.push([0, replacedValue.length]);\n    }\n    else if (string in replacementByTrigger) {\n        // If this string is a valid trigger, replace it with its replacement value.\n        var replacement = replacementByTrigger[string];\n        // Check if the value is a function. If it is, we need to run that function to get the\n        // value.\n        if (\"exec\" in replacement) {\n            var value = replacement.exec.apply(replacement, __spreadArray([], __read(parameters), false));\n            // If the function returns null, it means we shouldn't expand to anything.\n            if (value == null) {\n                return [withReplacementDelimiters(unchanged), [], false];\n            }\n            // Otherwise, save the dedented value to `replacedValue`.\n            replacedValue = dedent(value);\n        }\n        else {\n            // If it is not a function, we can just return the value directly, which was already dedented.\n            replacedValue = replacement.value;\n        }\n    }\n    else {\n        // No trigger with this name; return the value unchanged.\n        return [withReplacementDelimiters(unchanged), [], false];\n    }\n    // Now that we have the replaced value, check for nested replacements.\n    _a = __read(resolveReplacementsRecursive(level, replacedValue, caretPositions), 2), replacedValue = _a[0], caretPositions = _a[1];\n    return [replacedValue, caretPositions, true];\n};\n/**\n * Given a string of parameters for a replacement, parses them into a list of strings.\n * @param string The string to parse parameters from.\n * @returns A list of stringified parameters.\n */\nvar parseReplacementParameters = function (string) {\n    // Add a comma to the end of the string so we can handle the final parameter like any other.\n    string += \",\";\n    var closingQuote = null;\n    var params = [];\n    var lastIndex = 0;\n    for (var i = 0; i < string.length; i++) {\n        if (closingQuote == null && string[i] === \",\") {\n            params.push(string.substring(lastIndex, i));\n            // Skip over the next space if there is one.\n            if (string[i + 1] === \" \")\n                i++;\n            lastIndex = i + 1;\n        }\n        if (closingQuote == null &&\n            lastIndex === i &&\n            (string[i] === '\"' || string[i] === \"'\")) {\n            // Make sure there is a closing quote somewhere in the string.\n            var hasClosing = !!~string.indexOf(string[i], i + 1);\n            if (!hasClosing) {\n                // If there is no closing quote, don't consider this quote as a special character.\n                continue;\n            }\n            closingQuote = string[i];\n            lastIndex++;\n        }\n        else if (closingQuote != null && string[i] === closingQuote) {\n            // Check if the next char (after trimming) is a comma.\n            if (string.substring(i + 1).trim()[0] === \",\") {\n                // This is a valid closing quote. Delete this quote so we don't include it in the params.\n                // Also trim the space that follows so the next character is the comma.\n                string = string.substring(0, i) + string.substring(i + 1).trimStart();\n                // Decrement i so that when it gets incremented again, it will be at the comma.\n                i--;\n            }\n            else {\n                // This isn't a valid closing quote, and we should add the original quote back to the\n                // string.\n                lastIndex--;\n            }\n            closingQuote = null;\n        }\n        else if (string[i] === \"\\\\\") {\n            // Delete this backslash and let the i counter move on to the next character so we can handle\n            // escape sequences..\n            string = string.substring(0, i) + string.substring(i + 1);\n        }\n    }\n    return params;\n};\n/**\n * Allows you to insert an element in the sidebar underneath a textarea.\n * @param callback A callback that returns an element to add to the sub bar, or null.\n */\nexport var addToSubBar = function (callback) {\n    addTextAreaCallback(function (textarea) {\n        var data = getTextAreaData(textarea);\n        if (!data)\n            return;\n        var element = callback(textarea);\n        if (!element)\n            return;\n        data.subBar.appendChild(element);\n        textarea.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-has-sub-bar\"), \"true\");\n    });\n};\n/**\n * Copies over styles from one CSS selector to another based on the stylesheets in the document.\n * Each CSS style that references the `oldSelector` will be copied and changed such that any\n * occurrence of `oldSelector` is replaced with `newSelector`, allowing elements that match\n * `newSelector` to have the same styles as elements that match `oldSelector`.\n * @param oldSelector The selector we want to replace with the `newSelector`.\n * @param newSelector The selector we want to replace `oldSelector` with.\n */\nexport var interceptStyles = function (oldSelector, newSelector) {\n    // Call `interceptStylesWithinWindow` for every ancestor window and the current window.\n    var currWindow = window;\n    while (currWindow) {\n        interceptStylesWithinWindow(oldSelector, newSelector, currWindow);\n        if (currWindow.parent === currWindow)\n            break;\n        currWindow = currWindow.parent;\n    }\n};\n/**\n * The function used by `interceptStyles` to intercept styles in one particular window.\n * @see interceptStyles\n * @param oldSelector The old selector to replace with `newSelector`.\n * @param newSelector The new selector to replace `oldSelector` with.\n * @param window The window whose stylesheets should be intercepted.\n */\nvar interceptStylesWithinWindow = function (oldSelector, newSelector, window) {\n    var e_1, _a;\n    var stylesheets = Array.from(window.document.styleSheets);\n    var _loop_3 = function (stylesheet) {\n        // Skip over any stylesheets that don't mention the oldSelector we're looking for.\n        if (isInstance(stylesheet.ownerNode, HTMLStyleElement) &&\n            !stylesheet.ownerNode.innerHTML.includes(oldSelector)) {\n            return \"continue\";\n        }\n        replaceSheetSelector(oldSelector, newSelector, window, stylesheet);\n        if (!isInstance(stylesheet.ownerNode, HTMLStyleElement) &&\n            !isInstance(stylesheet.ownerNode, HTMLLinkElement)) {\n            return \"continue\";\n        }\n        var styleElem = stylesheet.ownerNode;\n        // Add a MutationObserver for this stylesheet in case it changes.\n        new MutationObserver(function () {\n            var sheet = styleElem.sheet;\n            if (!sheet)\n                return;\n            replaceSheetSelector(oldSelector, newSelector, window, sheet);\n        }).observe(styleElem, {\n            characterData: styleElem.nodeName === \"STYLE\",\n            childList: styleElem.nodeName === \"STYLE\",\n            attributes: styleElem.nodeName === \"LINK\",\n            attributeFilter: [\"href\"],\n        });\n    };\n    try {\n        for (var stylesheets_1 = __values(stylesheets), stylesheets_1_1 = stylesheets_1.next(); !stylesheets_1_1.done; stylesheets_1_1 = stylesheets_1.next()) {\n            var stylesheet = stylesheets_1_1.value;\n            _loop_3(stylesheet);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (stylesheets_1_1 && !stylesheets_1_1.done && (_a = stylesheets_1.return)) _a.call(stylesheets_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    // Add an observer in case new stylesheets are added later.\n    new MutationObserver(function (mutationRecords) {\n        var e_2, _a, e_3, _b;\n        try {\n            for (var mutationRecords_1 = __values(mutationRecords), mutationRecords_1_1 = mutationRecords_1.next(); !mutationRecords_1_1.done; mutationRecords_1_1 = mutationRecords_1.next()) {\n                var record = mutationRecords_1_1.value;\n                var _loop_4 = function (node) {\n                    if (isInstance(node, HTMLStyleElement)) {\n                        // <style>s always have a .sheet property right away since their CSS is parsed\n                        // synchronously.\n                        if (node.sheet)\n                            replaceSheetSelector(oldSelector, newSelector, window, node.sheet);\n                    }\n                    else if (isInstance(node, HTMLLinkElement) &&\n                        node.rel.toLowerCase() === \"stylesheet\") {\n                        // <link>s make a request to get a stylesheet from another link, so they are loaded\n                        // asynchronously and thus may already have a .sheet, or may not be loaded yet. We take\n                        // care of both of these cases here.\n                        if (node.sheet) {\n                            replaceSheetSelector(oldSelector, newSelector, window, node.sheet);\n                        }\n                        else {\n                            node.addEventListener(\"load\", function () {\n                                if (node.sheet)\n                                    replaceSheetSelector(oldSelector, newSelector, window, node.sheet);\n                            });\n                        }\n                    }\n                };\n                try {\n                    for (var _c = (e_3 = void 0, __values(Array.from(record.addedNodes))), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var node = _d.value;\n                        _loop_4(node);\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (mutationRecords_1_1 && !mutationRecords_1_1.done && (_a = mutationRecords_1.return)) _a.call(mutationRecords_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }).observe(window.document.head, {\n        childList: true,\n    });\n};\n/**\n * The function used by `interceptStylesWithinWindow` to replace styles within an individual\n * CSSStyleSheet object.\n * @see interceptStylesWithinWindow\n * @param oldSelector The old selector to replace with `newSelector`.\n * @param newSelector The new selector to replace `oldSelector` with.\n * @param window The window that the `stylesheet` belongs to.\n * @param stylesheet The `CSSStyleSheet` to replace styles in.\n */\nvar replaceSheetSelector = function (oldSelector, newSelector, window, stylesheet) {\n    var e_4, _a, _b;\n    var newRules = [];\n    var oldRules = Array.from(stylesheet.cssRules).filter(\n    // instanceof CSSStyleSheet doesn't work for whatever reason, and MDM recommends using\n    // `constructor.name` to differentiate between different types of CSSRules.\n    function (rule) { return rule.constructor.name === \"CSSStyleRule\"; });\n    try {\n        // Iterate through the stylesheet's rules to look for any that mention the oldSelector. Add those\n        // styles to newRules and replace oldSelector with newSelector.\n        for (var oldRules_1 = __values(oldRules), oldRules_1_1 = oldRules_1.next(); !oldRules_1_1.done; oldRules_1_1 = oldRules_1.next()) {\n            var rule = oldRules_1_1.value;\n            if (rule.selectorText.includes(oldSelector)) {\n                newRules.push(rule.cssText.replaceAll(oldSelector, newSelector));\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (oldRules_1_1 && !oldRules_1_1.done && (_a = oldRules_1.return)) _a.call(oldRules_1);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    // Insert this replacement stylesheet into the DOM.\n    if (newRules.length) {\n        window.document.head.appendChild(makeElement(\"style\", (_b = {},\n            _b[\"data-\".concat(constants.EXTENSION_PREFIX, \"-intercepted-stylesheet\")] = \"true\",\n            _b), newRules.join(\"\\n\")));\n    }\n};\n/**\n *\n * @param state The state to convert into a state string.\n * @returns A string representing the ticket state.\n */\nexport var ticketStateToString = function (state) {\n    var _a, _b, _c, _d, _e;\n    var states = (_a = {},\n        _a[TicketState.New] = (_b = {},\n            _b[TicketType.Incident] = \"New\",\n            _b[TicketType.SupportRequest] = \"Open\",\n            _b[TicketType.Task] = \"Open\",\n            _b),\n        _a[TicketState.Active] = (_c = {},\n            _c[TicketType.Incident] = \"Active\",\n            _c[TicketType.SupportRequest] = \"Open\",\n            _c[TicketType.Task] = \"Open\",\n            _c),\n        _a[TicketState.Pending] = (_d = {},\n            _d[TicketType.Incident] = \"Awaiting User Info\",\n            _d[TicketType.SupportRequest] = \"Hold - Awaiting user information\",\n            _d[TicketType.Task] = \"Pending\",\n            _d),\n        _a[TicketState.Resolved] = (_e = {},\n            _e[TicketType.Incident] = \"Resolved\",\n            _e[TicketType.SupportRequest] = \"Resolved\",\n            _e[TicketType.Task] = \"Closed Complete\",\n            _e),\n        _a);\n    return states[state][getTicketType()];\n};\n/**\n * Returns whether the current ticket is \"new\". A \"new\" ticket hasn't been saved to ServiceNow's\n * database yet. It is editable by the user still, and is created once they save the ticket.\n * @returns A boolean indicating whether this is a new, uncreated ticket.\n */\nexport var getIsNewTicket = function () {\n    // New tickets have their sys_id unassigned to -1 still, which we can get from the URL.\n    return new URLSearchParams(location.search).get(\"sys_id\") === \"-1\";\n};\nexport var getTextAreaOfType = function (type) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    var ticketType = getTicketType();\n    var isNewTicket = getIsNewTicket();\n    switch (ticketType) {\n        case TicketType.Incident:\n        case TicketType.SupportRequest: {\n            switch (type) {\n                case TextAreaType.WorkNotes: {\n                    // Determine if the single or multiple inputs view is being shown.\n                    var multipleEntries = document.getElementById(\"multiple-input-journal-entry\");\n                    if (isNewTicket) {\n                        return ((_b = (_a = document.getElementById(\"incident.work_notes\")) !== null && _a !== void 0 ? _a : document.getElementById(\"ticket.work_notes\")) !== null && _b !== void 0 ? _b : null);\n                    }\n                    else if (multipleEntries === null || multipleEntries === void 0 ? void 0 : multipleEntries.offsetParent) {\n                        return ((_c = document.getElementById(\"activity-stream-work_notes-textarea\")) !== null && _c !== void 0 ? _c : null);\n                    }\n                    else {\n                        var element = document.getElementById(\"activity-stream-textarea\");\n                        return element &&\n                            element.getAttribute(\"data-stream-text-input\") === \"work_notes\"\n                            ? element\n                            : null;\n                    }\n                }\n                case TextAreaType.Comments: {\n                    // Determine if the single or multiple inputs view is being shown.\n                    var multipleEntries = document.getElementById(\"multiple-input-journal-entry\");\n                    if (isNewTicket) {\n                        return ((_e = (_d = document.getElementById(\"incident.comments\")) !== null && _d !== void 0 ? _d : document.getElementById(\"ticket.comments\")) !== null && _e !== void 0 ? _e : null);\n                    }\n                    else if (multipleEntries === null || multipleEntries === void 0 ? void 0 : multipleEntries.offsetParent) {\n                        return ((_f = document.getElementById(\"activity-stream-comments-textarea\")) !== null && _f !== void 0 ? _f : null);\n                    }\n                    else {\n                        var element = document.getElementById(\"activity-stream-textarea\");\n                        return element &&\n                            element.getAttribute(\"data-stream-text-input\") === \"comments\"\n                            ? element\n                            : null;\n                    }\n                }\n                case TextAreaType.CloseNotes: {\n                    // \"New\" ticket close notes have the same ID as normal tickets.\n                    return ((_g = document.getElementById(ticketType === TicketType.Incident\n                        ? \"incident.close_notes\"\n                        : \"ticket.close_notes\")) !== null && _g !== void 0 ? _g : null);\n                }\n            }\n            break;\n        }\n        case TicketType.Task: {\n            // \"New\" task tickets don't have any textareas, so we don't need to worry about those here.\n            switch (type) {\n                case TextAreaType.Comments: {\n                    return ((_h = document.getElementById(\"sc_task.parent.comments\")) !== null && _h !== void 0 ? _h : null);\n                }\n                case TextAreaType.WorkNotes: {\n                    return ((_j = document.getElementById(\"activity-stream-textarea\")) !== null && _j !== void 0 ? _j : null);\n                }\n                case TextAreaType.CloseNotes: {\n                    // Task tickets do not have close notes.\n                    return null;\n                }\n            }\n            break;\n        }\n    }\n};\n/**\n * A mapped version of Math.min that returns the minimum item in an iterable after mapping each item\n * to a number.\n * @param map The function to call on each item in `items` to map it to a number. Any non-number is\n *        discarded.\n * @param items The items to return the minimum of.\n * @returns An item from `items` that mapped to the minimal value, or `undefined` if `items` is\n *        empty.\n */\nexport var mappedMin = function (map) {\n    var e_5, _a;\n    var items = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        items[_i - 1] = arguments[_i];\n    }\n    var minValue = Infinity;\n    var minItem = undefined;\n    try {\n        for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n            var item = items_1_1.value;\n            var value = map(item);\n            if (typeof value !== \"number\")\n                continue;\n            if (value < minValue) {\n                minValue = value;\n                minItem = item;\n            }\n        }\n    }\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\n    finally {\n        try {\n            if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n        }\n        finally { if (e_5) throw e_5.error; }\n    }\n    return minItem;\n};\n/**\n * A mapped version of Math.max that returns the maximum item in an iterable after mapping each item\n * to a number.\n * @param map The function to call on each item in `items` to map it to a number. Any non-number is\n *        discarded.\n * @param items The items to return the maximum of.\n * @returns An item from `items` that mapped to the maximal value, or `undefined` if `items` is\n *        empty.\n */\nexport var mappedMax = function (map) {\n    var e_6, _a;\n    var items = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        items[_i - 1] = arguments[_i];\n    }\n    var maxValue = Infinity;\n    var maxItem = undefined;\n    try {\n        for (var items_2 = __values(items), items_2_1 = items_2.next(); !items_2_1.done; items_2_1 = items_2.next()) {\n            var item = items_2_1.value;\n            var value = map(item);\n            if (typeof value !== \"number\")\n                continue;\n            if (value > maxValue) {\n                maxValue = value;\n                maxItem = item;\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (items_2_1 && !items_2_1.done && (_a = items_2.return)) _a.call(items_2);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return maxItem;\n};\nexport var getDisplayOrderForNetDB = function (ordering) {\n    var options = new URLSearchParams();\n    for (var i = 0; i < ordering.length; i++) {\n        options.append(\"display_order.\" + ordering[i], (i + 1).toString());\n    }\n    return options.toString();\n};\n","/**\n * Joins two objects together recursively. If the two objects have nested objects under the same\n * key, those two objects will be joined together as well. If any of the arguments is not an object,\n * `source` is returned.\n * @param target The object to join to.\n * @param source The object to join from.\n * @returns `target` with the properties of `source` merged in recursively, or `source` if `source`\n *        or `target` is not an object.\n */\nexport var joinObjects = function (target, source) {\n    if (typeof source !== \"object\" ||\n        typeof target !== \"object\" ||\n        source === null ||\n        target === null) {\n        return source;\n    }\n    for (var key in source) {\n        var value = source[key];\n        if (key in target) {\n            target[key] = joinObjects(target[key], value);\n        }\n        else {\n            target[key] = value;\n        }\n    }\n    return target;\n};\nexport default joinObjects;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar _a;\nimport { dedent, TextAreaType, withReplacementDelimiters } from \"./helpers\";\nimport constants from \"./constants.json\";\nimport joinObjects from \"./helpers/joinObjects\";\nimport { replacementByTrigger } from \"./replacements/data\";\nexport var defaultValues = {\n    signature: dedent(\"\\n    Best,\\n    \".concat(withReplacementDelimiters(\"current_user.first_name\"), \"\\n    Student Technical Support\\n  \")),\n    autoCompletes: (_a = {},\n        _a[TextAreaType.CloseNotes] = dedent(\"\\n      Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n      \").concat(withReplacementDelimiters(\"cursor:Thanks for letting us know the issue was resolved. \"), \"We'll go ahead and close your ticket now. Please feel free to reach out to us if you run into any more issues in the future.\\n\\n      \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n    \")),\n        _a[TextAreaType.Comments] = dedent(\"\\n      Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n      \\n      \").concat(withReplacementDelimiters(\"cursor\"), \"\\n\\n      Please let us know if you have any questions or issues.\\n      \\n      \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n    \")),\n        _a[TextAreaType.WorkNotes] = \"\",\n        _a),\n    enabled: {\n        servicenow: {\n            autocomplete: true,\n            macros: true,\n            markdown: true,\n            smart_text: true,\n        },\n        netdb: {\n            mac_links: true,\n            history_highlight: true,\n            node_history_links: true,\n        },\n        dhcp_log: {\n            ip_links: true,\n        },\n    },\n};\n/**\n * A memoized version of the config option. It is only fetched once at the beginning and then\n * mutated over time to match the actual config option.\n */\nvar memo = null;\n/**\n * Asynchronously returns the entire config object.\n * @returns A Promise resolving to the config object.\n */\nvar getConfig = function () { return __awaiter(void 0, void 0, void 0, function () {\n    var stringified;\n    return __generator(this, function (_a) {\n        // Use the memoized value if we can.\n        if (memo) {\n            return [2 /*return*/, memo];\n        }\n        stringified = localStorage.getItem(\"\".concat(constants.EXTENSION_PREFIX, \"-config\"));\n        if (stringified) {\n            memo = JSON.parse(stringified);\n        }\n        else {\n            memo = defaultValues;\n        }\n        return [2 /*return*/, memo];\n    });\n}); };\nwindow.addEventListener(\"storage\", function () {\n    // Update `memo` to match `localStorage`.\n    var stringified = localStorage.getItem(\"\".concat(constants.EXTENSION_PREFIX, \"-config\"));\n    if (!stringified || !memo)\n        return;\n    var parsed = JSON.parse(stringified);\n    var keys = new Set(Object.keys(parsed));\n    for (var key in parsed) {\n        if (!keys.has(key)) {\n            delete memo[key];\n        }\n    }\n    for (var key in parsed) {\n        memo[key] = parsed[key];\n    }\n    if (\"current_user.signature\" in replacementByTrigger &&\n        \"value\" in replacementByTrigger[\"current_user.signature\"]) {\n        replacementByTrigger[\"current_user.signature\"].value = memo.signature;\n    }\n});\n/**\n * An object with `getAsync` and `setAsync` methods for interacting with the config object.\n */\nvar config = {\n    getAsync: function (options) { return __awaiter(void 0, void 0, void 0, function () {\n        var config, ret, options_1, options_1_1, item;\n        var e_1, _a;\n        return __generator(this, function (_b) {\n            switch (_b.label) {\n                case 0: return [4 /*yield*/, getConfig()];\n                case 1:\n                    config = _b.sent();\n                    if (options == null) {\n                        return [2 /*return*/, config];\n                    }\n                    if (typeof options === \"string\") {\n                        return [2 /*return*/, config[options]];\n                    }\n                    ret = {};\n                    try {\n                        for (options_1 = __values(options), options_1_1 = options_1.next(); !options_1_1.done; options_1_1 = options_1.next()) {\n                            item = options_1_1.value;\n                            ret[item] = config[item];\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (options_1_1 && !options_1_1.done && (_a = options_1.return)) _a.call(options_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                    return [2 /*return*/, ret];\n            }\n        });\n    }); },\n    setAsync: function (option, value) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!!memo) return [3 /*break*/, 2];\n                    return [4 /*yield*/, getConfig()];\n                case 1:\n                    memo = _a.sent();\n                    _a.label = 2;\n                case 2:\n                    if (typeof option === \"string\") {\n                        memo[option] = value;\n                    }\n                    else {\n                        joinObjects(memo, option);\n                    }\n                    // await chrome.storage.sync.set({ config: memo });\n                    localStorage.setItem(\"\".concat(constants.EXTENSION_PREFIX, \"-config\"), JSON.stringify(memo));\n                    return [2 /*return*/];\n            }\n        });\n    }); },\n};\nexport var getConfigAsync = config.getAsync;\nexport var setConfigAsync = config.setAsync;\nexport default config;\n","/**\n * marked - a markdown parser\n * Copyright (c) 2011-2022, Christopher Jeffrey. (MIT Licensed)\n * https://github.com/markedjs/marked\n */\n\n/**\n * DO NOT EDIT THIS FILE\n * The code in this file is generated from files in ./src/\n */\n\nfunction getDefaults() {\n  return {\n    async: false,\n    baseUrl: null,\n    breaks: false,\n    extensions: null,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartypants: false,\n    tokenizer: null,\n    walkTokens: null,\n    xhtml: false\n  };\n}\n\nlet defaults = getDefaults();\n\nfunction changeDefaults(newDefaults) {\n  defaults = newDefaults;\n}\n\n/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\n/**\n * @param {string} html\n */\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\n\n/**\n * @param {string | RegExp} regex\n * @param {string} opt\n */\nfunction edit(regex, opt) {\n  regex = typeof regex === 'string' ? regex : regex.source;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\n\n/**\n * @param {boolean} sanitize\n * @param {string} base\n * @param {string} href\n */\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\n/**\n * @param {string} base\n * @param {string} href\n */\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  // First/last cell in a row cannot be empty if it has no leading/trailing pipe\n  if (!cells[0].trim()) { cells.shift(); }\n  if (cells.length > 0 && !cells[cells.length - 1].trim()) { cells.pop(); }\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n/**\n * Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n * /c*$/ is vulnerable to REDOS.\n *\n * @param {string} str\n * @param {string} c\n * @param {boolean} invert Remove suffix of non-c chars instead. Default falsey.\n */\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.slice(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\n// copied from https://stackoverflow.com/a/5450113/806777\n/**\n * @param {string} pattern\n * @param {number} count\n */\nfunction repeatString(pattern, count) {\n  if (count < 1) {\n    return '';\n  }\n  let result = '';\n  while (count > 1) {\n    if (count & 1) {\n      result += pattern;\n    }\n    count >>= 1;\n    pattern += pattern;\n  }\n  return result + pattern;\n}\n\nfunction outputLink(cap, link, raw, lexer) {\n  const href = link.href;\n  const title = link.title ? escape(link.title) : null;\n  const text = cap[1].replace(/\\\\([\\[\\]])/g, '$1');\n\n  if (cap[0].charAt(0) !== '!') {\n    lexer.state.inLink = true;\n    const token = {\n      type: 'link',\n      raw,\n      href,\n      title,\n      text,\n      tokens: lexer.inlineTokens(text)\n    };\n    lexer.state.inLink = false;\n    return token;\n  }\n  return {\n    type: 'image',\n    raw,\n    href,\n    title,\n    text: escape(text)\n  };\n}\n\nfunction indentCodeCompensation(raw, text) {\n  const matchIndentToCode = raw.match(/^(\\s+)(?:```)/);\n\n  if (matchIndentToCode === null) {\n    return text;\n  }\n\n  const indentToCode = matchIndentToCode[1];\n\n  return text\n    .split('\\n')\n    .map(node => {\n      const matchIndentInNode = node.match(/^\\s+/);\n      if (matchIndentInNode === null) {\n        return node;\n      }\n\n      const [indentInNode] = matchIndentInNode;\n\n      if (indentInNode.length >= indentToCode.length) {\n        return node.slice(indentToCode.length);\n      }\n\n      return node;\n    })\n    .join('\\n');\n}\n\n/**\n * Tokenizer\n */\nclass Tokenizer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  space(src) {\n    const cap = this.rules.block.newline.exec(src);\n    if (cap && cap[0].length > 0) {\n      return {\n        type: 'space',\n        raw: cap[0]\n      };\n    }\n  }\n\n  code(src) {\n    const cap = this.rules.block.code.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ {1,4}/gm, '');\n      return {\n        type: 'code',\n        raw: cap[0],\n        codeBlockStyle: 'indented',\n        text: !this.options.pedantic\n          ? rtrim(text, '\\n')\n          : text\n      };\n    }\n  }\n\n  fences(src) {\n    const cap = this.rules.block.fences.exec(src);\n    if (cap) {\n      const raw = cap[0];\n      const text = indentCodeCompensation(raw, cap[3] || '');\n\n      return {\n        type: 'code',\n        raw,\n        lang: cap[2] ? cap[2].trim() : cap[2],\n        text\n      };\n    }\n  }\n\n  heading(src) {\n    const cap = this.rules.block.heading.exec(src);\n    if (cap) {\n      let text = cap[2].trim();\n\n      // remove trailing #s\n      if (/#$/.test(text)) {\n        const trimmed = rtrim(text, '#');\n        if (this.options.pedantic) {\n          text = trimmed.trim();\n        } else if (!trimmed || / $/.test(trimmed)) {\n          // CommonMark requires space before trailing #s\n          text = trimmed.trim();\n        }\n      }\n\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[1].length,\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  hr(src) {\n    const cap = this.rules.block.hr.exec(src);\n    if (cap) {\n      return {\n        type: 'hr',\n        raw: cap[0]\n      };\n    }\n  }\n\n  blockquote(src) {\n    const cap = this.rules.block.blockquote.exec(src);\n    if (cap) {\n      const text = cap[0].replace(/^ *>[ \\t]?/gm, '');\n\n      return {\n        type: 'blockquote',\n        raw: cap[0],\n        tokens: this.lexer.blockTokens(text, []),\n        text\n      };\n    }\n  }\n\n  list(src) {\n    let cap = this.rules.block.list.exec(src);\n    if (cap) {\n      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine,\n        line, nextLine, rawLine, itemContents, endEarly;\n\n      let bull = cap[1].trim();\n      const isordered = bull.length > 1;\n\n      const list = {\n        type: 'list',\n        raw: '',\n        ordered: isordered,\n        start: isordered ? +bull.slice(0, -1) : '',\n        loose: false,\n        items: []\n      };\n\n      bull = isordered ? `\\\\d{1,9}\\\\${bull.slice(-1)}` : `\\\\${bull}`;\n\n      if (this.options.pedantic) {\n        bull = isordered ? bull : '[*+-]';\n      }\n\n      // Get next list item\n      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[\\t ][^\\\\n]*)?(?:\\\\n|$))`);\n\n      // Check if current bullet point can start a new List Item\n      while (src) {\n        endEarly = false;\n        if (!(cap = itemRegex.exec(src))) {\n          break;\n        }\n\n        if (this.rules.block.hr.test(src)) { // End list if bullet was actually HR (possibly move into itemRegex?)\n          break;\n        }\n\n        raw = cap[0];\n        src = src.substring(raw.length);\n\n        line = cap[2].split('\\n', 1)[0];\n        nextLine = src.split('\\n', 1)[0];\n\n        if (this.options.pedantic) {\n          indent = 2;\n          itemContents = line.trimLeft();\n        } else {\n          indent = cap[2].search(/[^ ]/); // Find first non-space char\n          indent = indent > 4 ? 1 : indent; // Treat indented code blocks (> 4 spaces) as having only 1 indent\n          itemContents = line.slice(indent);\n          indent += cap[1].length;\n        }\n\n        blankLine = false;\n\n        if (!line && /^ *$/.test(nextLine)) { // Items begin with at most one blank line\n          raw += nextLine + '\\n';\n          src = src.substring(nextLine.length + 1);\n          endEarly = true;\n        }\n\n        if (!endEarly) {\n          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\\\d{1,9}[.)])((?: [^\\\\n]*)?(?:\\\\n|$))`);\n          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$)`);\n          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\\`\\`\\`|~~~)`);\n          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);\n\n          // Check if following lines should be included in List Item\n          while (src) {\n            rawLine = src.split('\\n', 1)[0];\n            line = rawLine;\n\n            // Re-align to follow commonmark nesting rules\n            if (this.options.pedantic) {\n              line = line.replace(/^ {1,4}(?=( {4})*[^ ])/g, '  ');\n            }\n\n            // End list item if found code fences\n            if (fencesBeginRegex.test(line)) {\n              break;\n            }\n\n            // End list item if found start of new heading\n            if (headingBeginRegex.test(line)) {\n              break;\n            }\n\n            // End list item if found start of new bullet\n            if (nextBulletRegex.test(line)) {\n              break;\n            }\n\n            // Horizontal rule found\n            if (hrRegex.test(src)) {\n              break;\n            }\n\n            if (line.search(/[^ ]/) >= indent || !line.trim()) { // Dedent if possible\n              itemContents += '\\n' + line.slice(indent);\n            } else if (!blankLine) { // Until blank line, item doesn't need indentation\n              itemContents += '\\n' + line;\n            } else { // Otherwise, improper indentation ends this item\n              break;\n            }\n\n            if (!blankLine && !line.trim()) { // Check if current line is blank\n              blankLine = true;\n            }\n\n            raw += rawLine + '\\n';\n            src = src.substring(rawLine.length + 1);\n          }\n        }\n\n        if (!list.loose) {\n          // If the previous item ended with a blank line, the list is loose\n          if (endsWithBlankLine) {\n            list.loose = true;\n          } else if (/\\n *\\n *$/.test(raw)) {\n            endsWithBlankLine = true;\n          }\n        }\n\n        // Check for task list items\n        if (this.options.gfm) {\n          istask = /^\\[[ xX]\\] /.exec(itemContents);\n          if (istask) {\n            ischecked = istask[0] !== '[ ] ';\n            itemContents = itemContents.replace(/^\\[[ xX]\\] +/, '');\n          }\n        }\n\n        list.items.push({\n          type: 'list_item',\n          raw,\n          task: !!istask,\n          checked: ischecked,\n          loose: false,\n          text: itemContents\n        });\n\n        list.raw += raw;\n      }\n\n      // Do not consume newlines at end of final item. Alternatively, make itemRegex *start* with any newlines to simplify/speed up endsWithBlankLine logic\n      list.items[list.items.length - 1].raw = raw.trimRight();\n      list.items[list.items.length - 1].text = itemContents.trimRight();\n      list.raw = list.raw.trimRight();\n\n      const l = list.items.length;\n\n      // Item child tokens handled here at end because we needed to have the final item to trim it first\n      for (i = 0; i < l; i++) {\n        this.lexer.state.top = false;\n        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);\n        const spacers = list.items[i].tokens.filter(t => t.type === 'space');\n        const hasMultipleLineBreaks = spacers.every(t => {\n          const chars = t.raw.split('');\n          let lineBreaks = 0;\n          for (const char of chars) {\n            if (char === '\\n') {\n              lineBreaks += 1;\n            }\n            if (lineBreaks > 1) {\n              return true;\n            }\n          }\n\n          return false;\n        });\n\n        if (!list.loose && spacers.length && hasMultipleLineBreaks) {\n          // Having a single line break doesn't mean a list is loose. A single line break is terminating the last list item\n          list.loose = true;\n          list.items[i].loose = true;\n        }\n      }\n\n      return list;\n    }\n  }\n\n  html(src) {\n    const cap = this.rules.block.html.exec(src);\n    if (cap) {\n      const token = {\n        type: 'html',\n        raw: cap[0],\n        pre: !this.options.sanitizer\n          && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n        text: cap[0]\n      };\n      if (this.options.sanitize) {\n        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);\n        token.type = 'paragraph';\n        token.text = text;\n        token.tokens = this.lexer.inline(text);\n      }\n      return token;\n    }\n  }\n\n  def(src) {\n    const cap = this.rules.block.def.exec(src);\n    if (cap) {\n      if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n      const tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n      return {\n        type: 'def',\n        tag,\n        raw: cap[0],\n        href: cap[2],\n        title: cap[3]\n      };\n    }\n  }\n\n  table(src) {\n    const cap = this.rules.block.table.exec(src);\n    if (cap) {\n      const item = {\n        type: 'table',\n        header: splitCells(cap[1]).map(c => { return { text: c }; }),\n        align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\\n[ \\t]*$/, '').split('\\n') : []\n      };\n\n      if (item.header.length === item.align.length) {\n        item.raw = cap[0];\n\n        let l = item.align.length;\n        let i, j, k, row;\n        for (i = 0; i < l; i++) {\n          if (/^ *-+: *$/.test(item.align[i])) {\n            item.align[i] = 'right';\n          } else if (/^ *:-+: *$/.test(item.align[i])) {\n            item.align[i] = 'center';\n          } else if (/^ *:-+ *$/.test(item.align[i])) {\n            item.align[i] = 'left';\n          } else {\n            item.align[i] = null;\n          }\n        }\n\n        l = item.rows.length;\n        for (i = 0; i < l; i++) {\n          item.rows[i] = splitCells(item.rows[i], item.header.length).map(c => { return { text: c }; });\n        }\n\n        // parse child tokens inside headers and cells\n\n        // header child tokens\n        l = item.header.length;\n        for (j = 0; j < l; j++) {\n          item.header[j].tokens = this.lexer.inline(item.header[j].text);\n        }\n\n        // cell child tokens\n        l = item.rows.length;\n        for (j = 0; j < l; j++) {\n          row = item.rows[j];\n          for (k = 0; k < row.length; k++) {\n            row[k].tokens = this.lexer.inline(row[k].text);\n          }\n        }\n\n        return item;\n      }\n    }\n  }\n\n  lheading(src) {\n    const cap = this.rules.block.lheading.exec(src);\n    if (cap) {\n      return {\n        type: 'heading',\n        raw: cap[0],\n        depth: cap[2].charAt(0) === '=' ? 1 : 2,\n        text: cap[1],\n        tokens: this.lexer.inline(cap[1])\n      };\n    }\n  }\n\n  paragraph(src) {\n    const cap = this.rules.block.paragraph.exec(src);\n    if (cap) {\n      const text = cap[1].charAt(cap[1].length - 1) === '\\n'\n        ? cap[1].slice(0, -1)\n        : cap[1];\n      return {\n        type: 'paragraph',\n        raw: cap[0],\n        text,\n        tokens: this.lexer.inline(text)\n      };\n    }\n  }\n\n  text(src) {\n    const cap = this.rules.block.text.exec(src);\n    if (cap) {\n      return {\n        type: 'text',\n        raw: cap[0],\n        text: cap[0],\n        tokens: this.lexer.inline(cap[0])\n      };\n    }\n  }\n\n  escape(src) {\n    const cap = this.rules.inline.escape.exec(src);\n    if (cap) {\n      return {\n        type: 'escape',\n        raw: cap[0],\n        text: escape(cap[1])\n      };\n    }\n  }\n\n  tag(src) {\n    const cap = this.rules.inline.tag.exec(src);\n    if (cap) {\n      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {\n        this.lexer.state.inLink = true;\n      } else if (this.lexer.state.inLink && /^<\\/a>/i.test(cap[0])) {\n        this.lexer.state.inLink = false;\n      }\n      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = true;\n      } else if (this.lexer.state.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n        this.lexer.state.inRawBlock = false;\n      }\n\n      return {\n        type: this.options.sanitize\n          ? 'text'\n          : 'html',\n        raw: cap[0],\n        inLink: this.lexer.state.inLink,\n        inRawBlock: this.lexer.state.inRawBlock,\n        text: this.options.sanitize\n          ? (this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0]))\n          : cap[0]\n      };\n    }\n  }\n\n  link(src) {\n    const cap = this.rules.inline.link.exec(src);\n    if (cap) {\n      const trimmedUrl = cap[2].trim();\n      if (!this.options.pedantic && /^</.test(trimmedUrl)) {\n        // commonmark requires matching angle brackets\n        if (!(/>$/.test(trimmedUrl))) {\n          return;\n        }\n\n        // ending angle bracket cannot be escaped\n        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), '\\\\');\n        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {\n          return;\n        }\n      } else {\n        // find closing parenthesis\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n      }\n      let href = cap[2];\n      let title = '';\n      if (this.options.pedantic) {\n        // split pedantic href and title\n        const link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n        if (link) {\n          href = link[1];\n          title = link[3];\n        }\n      } else {\n        title = cap[3] ? cap[3].slice(1, -1) : '';\n      }\n\n      href = href.trim();\n      if (/^</.test(href)) {\n        if (this.options.pedantic && !(/>$/.test(trimmedUrl))) {\n          // pedantic allows starting angle bracket without ending angle bracket\n          href = href.slice(1);\n        } else {\n          href = href.slice(1, -1);\n        }\n      }\n      return outputLink(cap, {\n        href: href ? href.replace(this.rules.inline._escapes, '$1') : href,\n        title: title ? title.replace(this.rules.inline._escapes, '$1') : title\n      }, cap[0], this.lexer);\n    }\n  }\n\n  reflink(src, links) {\n    let cap;\n    if ((cap = this.rules.inline.reflink.exec(src))\n        || (cap = this.rules.inline.nolink.exec(src))) {\n      let link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n      link = links[link.toLowerCase()];\n      if (!link || !link.href) {\n        const text = cap[0].charAt(0);\n        return {\n          type: 'text',\n          raw: text,\n          text\n        };\n      }\n      return outputLink(cap, link, cap[0], this.lexer);\n    }\n  }\n\n  emStrong(src, maskedSrc, prevChar = '') {\n    let match = this.rules.inline.emStrong.lDelim.exec(src);\n    if (!match) return;\n\n    // _ can't be between two alphanumerics. \\p{L}\\p{N} includes non-english alphabet/numbers as well\n    if (match[3] && prevChar.match(/[\\p{L}\\p{N}]/u)) return;\n\n    const nextChar = match[1] || match[2] || '';\n\n    if (!nextChar || (nextChar && (prevChar === '' || this.rules.inline.punctuation.exec(prevChar)))) {\n      const lLength = match[0].length - 1;\n      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;\n\n      const endReg = match[0][0] === '*' ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;\n      endReg.lastIndex = 0;\n\n      // Clip maskedSrc to same section of string as src (move to lexer?)\n      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);\n\n      while ((match = endReg.exec(maskedSrc)) != null) {\n        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];\n\n        if (!rDelim) continue; // skip single * in __abc*abc__\n\n        rLength = rDelim.length;\n\n        if (match[3] || match[4]) { // found another Left Delim\n          delimTotal += rLength;\n          continue;\n        } else if (match[5] || match[6]) { // either Left or Right Delim\n          if (lLength % 3 && !((lLength + rLength) % 3)) {\n            midDelimTotal += rLength;\n            continue; // CommonMark Emphasis Rules 9-10\n          }\n        }\n\n        delimTotal -= rLength;\n\n        if (delimTotal > 0) continue; // Haven't found enough closing delimiters\n\n        // Remove extra characters. *a*** -> *a*\n        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);\n\n        // Create `em` if smallest delimiter has odd char count. *a***\n        if (Math.min(lLength, rLength) % 2) {\n          const text = src.slice(1, lLength + match.index + rLength);\n          return {\n            type: 'em',\n            raw: src.slice(0, lLength + match.index + rLength + 1),\n            text,\n            tokens: this.lexer.inlineTokens(text)\n          };\n        }\n\n        // Create 'strong' if smallest delimiter has even char count. **a***\n        const text = src.slice(2, lLength + match.index + rLength - 1);\n        return {\n          type: 'strong',\n          raw: src.slice(0, lLength + match.index + rLength + 1),\n          text,\n          tokens: this.lexer.inlineTokens(text)\n        };\n      }\n    }\n  }\n\n  codespan(src) {\n    const cap = this.rules.inline.code.exec(src);\n    if (cap) {\n      let text = cap[2].replace(/\\n/g, ' ');\n      const hasNonSpaceChars = /[^ ]/.test(text);\n      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);\n      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {\n        text = text.substring(1, text.length - 1);\n      }\n      text = escape(text, true);\n      return {\n        type: 'codespan',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n\n  br(src) {\n    const cap = this.rules.inline.br.exec(src);\n    if (cap) {\n      return {\n        type: 'br',\n        raw: cap[0]\n      };\n    }\n  }\n\n  del(src) {\n    const cap = this.rules.inline.del.exec(src);\n    if (cap) {\n      return {\n        type: 'del',\n        raw: cap[0],\n        text: cap[2],\n        tokens: this.lexer.inlineTokens(cap[2])\n      };\n    }\n  }\n\n  autolink(src, mangle) {\n    const cap = this.rules.inline.autolink.exec(src);\n    if (cap) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[1]) : cap[1]);\n        href = 'mailto:' + text;\n      } else {\n        text = escape(cap[1]);\n        href = text;\n      }\n\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  url(src, mangle) {\n    let cap;\n    if (cap = this.rules.inline.url.exec(src)) {\n      let text, href;\n      if (cap[2] === '@') {\n        text = escape(this.options.mangle ? mangle(cap[0]) : cap[0]);\n        href = 'mailto:' + text;\n      } else {\n        // do extended autolink path validation\n        let prevCapZero;\n        do {\n          prevCapZero = cap[0];\n          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];\n        } while (prevCapZero !== cap[0]);\n        text = escape(cap[0]);\n        if (cap[1] === 'www.') {\n          href = 'http://' + text;\n        } else {\n          href = text;\n        }\n      }\n      return {\n        type: 'link',\n        raw: cap[0],\n        text,\n        href,\n        tokens: [\n          {\n            type: 'text',\n            raw: text,\n            text\n          }\n        ]\n      };\n    }\n  }\n\n  inlineText(src, smartypants) {\n    const cap = this.rules.inline.text.exec(src);\n    if (cap) {\n      let text;\n      if (this.lexer.state.inRawBlock) {\n        text = this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0];\n      } else {\n        text = escape(this.options.smartypants ? smartypants(cap[0]) : cap[0]);\n      }\n      return {\n        type: 'text',\n        raw: cap[0],\n        text\n      };\n    }\n  }\n}\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^(?: *(?:\\n|$))+/,\n  code: /^( {4}[^\\n]+(?:\\n(?: *(?:\\n|$))*)?)+/,\n  fences: /^ {0,3}(`{3,}(?=[^`\\n]*\\n)|~{3,})([^\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?=\\n|$)|$)/,\n  hr: /^ {0,3}((?:-[\\t ]*){3,}|(?:_[ \\t]*){3,}|(?:\\*[ \\t]*){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6})(?=\\s|$)(.*)(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3}bull)([ \\t][^\\n]+?)?(?:\\n|$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style|textarea)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?(?:\\\\?>\\\\n*|$)' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?(?:>\\\\n*|$)' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?(?:\\\\]\\\\]>\\\\n*|$)' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (6)\n    + '|<(?!script|pre|style|textarea)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) open tag\n    + '|</(?!script|pre|style|textarea)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:(?:\\\\n *)+\\\\n|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *(?:\\n *)?<?([^\\s>]+)>?(?:(?: +(?:\\n *)?| *\\n *)(title))? *(?:\\n+|$)/,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\\n)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\.|[^\\[\\]\\\\])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}[.)])/;\nblock.listItemStart = edit(/^( *)(bull) */)\n  .replace('bull', block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?(?:-->|$)/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('|table', '')\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  table: '^ *([^\\\\n ].*\\\\|.*)\\\\n' // Header\n    + ' {0,3}(?:\\\\| *)?(:?-+:? *(?:\\\\| *:?-+:? *)*)(?:\\\\| *)?' // Align\n    + '(?:\\\\n((?:(?! *\\\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\\\n|$))*)\\\\n*|$)' // Cells\n});\n\nblock.gfm.table = edit(block.gfm.table)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('blockquote', ' {0,3}>')\n  .replace('code', ' {4}[^\\\\n]')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // tables can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.gfm.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} ')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('table', block.gfm.table) // interrupt paragraphs with table\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}(?=[^`\\\\n]*\\\\n)|~{3,})[^\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|textarea|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^(#{1,6})(.*)(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(ref)\\]/,\n  nolink: /^!?\\[(ref)\\](?:\\[\\])?/,\n  reflinkSearch: 'reflink|nolink(?!\\\\()',\n  emStrong: {\n    lDelim: /^(?:\\*+(?:([punct_])|[^\\s*]))|^_+(?:([punct*])|([^\\s_]))/,\n    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.\n    //          () Skip orphan inside strong  () Consume to delim (1) #***                (2) a***#, a***                   (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a\n    rDelimAst: /^[^_*]*?\\_\\_[^_*]*?\\*[^_*]*?(?=\\_\\_)|[^*]+(?=[^*])|[punct_](\\*+)(?=[\\s]|$)|[^punct*_\\s](\\*+)(?=[punct_\\s]|$)|[punct_\\s](\\*+)(?=[^punct*_\\s])|[\\s](\\*+)(?=[punct_])|[punct_](\\*+)(?=[punct_])|[^punct*_\\s](\\*+)(?=[^punct*_\\s])/,\n    rDelimUnd: /^[^_*]*?\\*\\*[^_*]*?\\_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|[punct*](\\_+)(?=[\\s]|$)|[^punct*_\\s](\\_+)(?=[punct*\\s]|$)|[punct*\\s](\\_+)(?=[^punct*_\\s])|[\\s](\\_+)(?=[punct*])|[punct*](\\_+)(?=[punct*])/ // ^- Not allowed for _\n  },\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:(?= {2,}\\n)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*_]|\\b_|$)|[^ ](?= {2,}\\n)))/,\n  punctuation: /^([\\spunctuation])/\n};\n\n// list of punctuation marks from CommonMark spec\n// without * and _ to handle the different emphasis markers * and _\ninline._punctuation = '!\"#$%&\\'()+\\\\-.,/:;<=>?@\\\\[\\\\]`^{|}~';\ninline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();\n\n// sequences em should skip over [title](link), `code`, <html>\ninline.blockSkip = /\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>/g;\ninline.escapedEmSt = /\\\\\\*|\\\\_/g;\n\ninline._comment = edit(block._comment).replace('(?:-->|$)', '-->').getRegex();\n\ninline.emStrong.lDelim = edit(inline.emStrong.lDelim)\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, 'g')\n  .replace(/punct/g, inline._punctuation)\n  .getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', inline._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[(?:\\\\.|[^\\[\\]\\\\])*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\.|[^\\n<>\\\\])+>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.nolink = edit(inline.nolink)\n  .replace('ref', block._label)\n  .getRegex();\n\ninline.reflinkSearch = edit(inline.reflinkSearch, 'g')\n  .replace('reflink', inline.reflink)\n  .replace('nolink', inline.nolink)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: {\n    start: /^__|\\*\\*/,\n    middle: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n    endAst: /\\*\\*(?!\\*)/g,\n    endUnd: /__(?!_)/g\n  },\n  em: {\n    start: /^_|\\*/,\n    middle: /^()\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)|^_(?=\\S)([\\s\\S]*?\\S)_(?!_)/,\n    endAst: /\\*(?!\\*)/g,\n    endUnd: /_(?!_)/g\n  },\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^(~~?)(?=[^\\s~])([\\s\\S]*?[^\\s~])\\1(?=[^~]|$)/,\n  text: /^([`~]+|[^`~])(?:(?= {2,}\\n)|(?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)|[\\s\\S]*?(?:(?=[\\\\<!\\[`*~_]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@)))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\n/**\n * smartypants text replacement\n * @param {string} text\n */\nfunction smartypants(text) {\n  return text\n    // em-dashes\n    .replace(/---/g, '\\u2014')\n    // en-dashes\n    .replace(/--/g, '\\u2013')\n    // opening singles\n    .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n    // closing singles & apostrophes\n    .replace(/'/g, '\\u2019')\n    // opening doubles\n    .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n    // closing doubles\n    .replace(/\"/g, '\\u201d')\n    // ellipses\n    .replace(/\\.{3}/g, '\\u2026');\n}\n\n/**\n * mangle email addresses\n * @param {string} text\n */\nfunction mangle(text) {\n  let out = '',\n    i,\n    ch;\n\n  const l = text.length;\n  for (i = 0; i < l; i++) {\n    ch = text.charCodeAt(i);\n    if (Math.random() > 0.5) {\n      ch = 'x' + ch.toString(16);\n    }\n    out += '&#' + ch + ';';\n  }\n\n  return out;\n}\n\n/**\n * Block Lexer\n */\nclass Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.options.tokenizer = this.options.tokenizer || new Tokenizer();\n    this.tokenizer = this.options.tokenizer;\n    this.tokenizer.options = this.options;\n    this.tokenizer.lexer = this;\n    this.inlineQueue = [];\n    this.state = {\n      inLink: false,\n      inRawBlock: false,\n      top: true\n    };\n\n    const rules = {\n      block: block.normal,\n      inline: inline.normal\n    };\n\n    if (this.options.pedantic) {\n      rules.block = block.pedantic;\n      rules.inline = inline.pedantic;\n    } else if (this.options.gfm) {\n      rules.block = block.gfm;\n      if (this.options.breaks) {\n        rules.inline = inline.breaks;\n      } else {\n        rules.inline = inline.gfm;\n      }\n    }\n    this.tokenizer.rules = rules;\n  }\n\n  /**\n   * Expose Rules\n   */\n  static get rules() {\n    return {\n      block,\n      inline\n    };\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  }\n\n  /**\n   * Static Lex Inline Method\n   */\n  static lexInline(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.inlineTokens(src);\n  }\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n');\n\n    this.blockTokens(src, this.tokens);\n\n    let next;\n    while (next = this.inlineQueue.shift()) {\n      this.inlineTokens(next.src, next.tokens);\n    }\n\n    return this.tokens;\n  }\n\n  /**\n   * Lexing\n   */\n  blockTokens(src, tokens = []) {\n    if (this.options.pedantic) {\n      src = src.replace(/\\t/g, '    ').replace(/^ +$/gm, '');\n    } else {\n      src = src.replace(/^( *)(\\t+)/gm, (_, leading, tabs) => {\n        return leading + '    '.repeat(tabs.length);\n      });\n    }\n\n    let token, lastToken, cutSrc, lastParagraphClipped;\n\n    while (src) {\n      if (this.options.extensions\n        && this.options.extensions.block\n        && this.options.extensions.block.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // newline\n      if (token = this.tokenizer.space(src)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.length === 1 && tokens.length > 0) {\n          // if there's a single \\n as a spacer, it's terminating the last line,\n          // so move it there so that we don't get unecessary paragraph tags\n          tokens[tokens.length - 1].raw += '\\n';\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.code(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // fences\n      if (token = this.tokenizer.fences(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // heading\n      if (token = this.tokenizer.heading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // hr\n      if (token = this.tokenizer.hr(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // blockquote\n      if (token = this.tokenizer.blockquote(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // list\n      if (token = this.tokenizer.list(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // html\n      if (token = this.tokenizer.html(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // def\n      if (token = this.tokenizer.def(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && (lastToken.type === 'paragraph' || lastToken.type === 'text')) {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.raw;\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else if (!this.tokens.links[token.tag]) {\n          this.tokens.links[token.tag] = {\n            href: token.href,\n            title: token.title\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (token = this.tokenizer.table(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // lheading\n      if (token = this.tokenizer.lheading(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // top-level paragraph\n      // prevent paragraph consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startBlock) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startBlock.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {\n        lastToken = tokens[tokens.length - 1];\n        if (lastParagraphClipped && lastToken.type === 'paragraph') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        lastParagraphClipped = (cutSrc.length !== src.length);\n        src = src.substring(token.raw.length);\n        continue;\n      }\n\n      // text\n      if (token = this.tokenizer.text(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += '\\n' + token.raw;\n          lastToken.text += '\\n' + token.text;\n          this.inlineQueue.pop();\n          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    this.state.top = true;\n    return tokens;\n  }\n\n  inline(src, tokens = []) {\n    this.inlineQueue.push({ src, tokens });\n    return tokens;\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  inlineTokens(src, tokens = []) {\n    let token, lastToken, cutSrc;\n\n    // String with links masked to avoid interference with em and strong\n    let maskedSrc = src;\n    let match;\n    let keepPrevChar, prevChar;\n\n    // Mask out reflinks\n    if (this.tokens.links) {\n      const links = Object.keys(this.tokens.links);\n      if (links.length > 0) {\n        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {\n          if (links.includes(match[0].slice(match[0].lastIndexOf('[') + 1, -1))) {\n            maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);\n          }\n        }\n      }\n    }\n    // Mask out other blocks\n    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '[' + repeatString('a', match[0].length - 2) + ']' + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);\n    }\n\n    // Mask out escaped em & strong delimiters\n    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {\n      maskedSrc = maskedSrc.slice(0, match.index) + '++' + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);\n    }\n\n    while (src) {\n      if (!keepPrevChar) {\n        prevChar = '';\n      }\n      keepPrevChar = false;\n\n      // extensions\n      if (this.options.extensions\n        && this.options.extensions.inline\n        && this.options.extensions.inline.some((extTokenizer) => {\n          if (token = extTokenizer.call({ lexer: this }, src, tokens)) {\n            src = src.substring(token.raw.length);\n            tokens.push(token);\n            return true;\n          }\n          return false;\n        })) {\n        continue;\n      }\n\n      // escape\n      if (token = this.tokenizer.escape(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // tag\n      if (token = this.tokenizer.tag(src)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // link\n      if (token = this.tokenizer.link(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // reflink, nolink\n      if (token = this.tokenizer.reflink(src, this.tokens.links)) {\n        src = src.substring(token.raw.length);\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && token.type === 'text' && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      // em & strong\n      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // code\n      if (token = this.tokenizer.codespan(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // br\n      if (token = this.tokenizer.br(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // del (gfm)\n      if (token = this.tokenizer.del(src)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // autolink\n      if (token = this.tokenizer.autolink(src, mangle)) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {\n        src = src.substring(token.raw.length);\n        tokens.push(token);\n        continue;\n      }\n\n      // text\n      // prevent inlineText consuming extensions by clipping 'src' to extension start\n      cutSrc = src;\n      if (this.options.extensions && this.options.extensions.startInline) {\n        let startIndex = Infinity;\n        const tempSrc = src.slice(1);\n        let tempStart;\n        this.options.extensions.startInline.forEach(function(getStartIndex) {\n          tempStart = getStartIndex.call({ lexer: this }, tempSrc);\n          if (typeof tempStart === 'number' && tempStart >= 0) { startIndex = Math.min(startIndex, tempStart); }\n        });\n        if (startIndex < Infinity && startIndex >= 0) {\n          cutSrc = src.substring(0, startIndex + 1);\n        }\n      }\n      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {\n        src = src.substring(token.raw.length);\n        if (token.raw.slice(-1) !== '_') { // Track prevChar before string of ____ started\n          prevChar = token.raw.slice(-1);\n        }\n        keepPrevChar = true;\n        lastToken = tokens[tokens.length - 1];\n        if (lastToken && lastToken.type === 'text') {\n          lastToken.raw += token.raw;\n          lastToken.text += token.text;\n        } else {\n          tokens.push(token);\n        }\n        continue;\n      }\n\n      if (src) {\n        const errMsg = 'Infinite loop on byte: ' + src.charCodeAt(0);\n        if (this.options.silent) {\n          console.error(errMsg);\n          break;\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n\n    return tokens;\n  }\n}\n\n/**\n * Renderer\n */\nclass Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    code = code.replace(/\\n$/, '') + '\\n';\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>\\n';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang, true)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  }\n\n  /**\n   * @param {string} quote\n   */\n  blockquote(quote) {\n    return `<blockquote>\\n${quote}</blockquote>\\n`;\n  }\n\n  html(html) {\n    return html;\n  }\n\n  /**\n   * @param {string} text\n   * @param {string} level\n   * @param {string} raw\n   * @param {any} slugger\n   */\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      const id = this.options.headerPrefix + slugger.slug(raw);\n      return `<h${level} id=\"${id}\">${text}</h${level}>\\n`;\n    }\n\n    // ignore IDs\n    return `<h${level}>${text}</h${level}>\\n`;\n  }\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  }\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  }\n\n  /**\n   * @param {string} text\n   */\n  listitem(text) {\n    return `<li>${text}</li>\\n`;\n  }\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  }\n\n  /**\n   * @param {string} text\n   */\n  paragraph(text) {\n    return `<p>${text}</p>\\n`;\n  }\n\n  /**\n   * @param {string} header\n   * @param {string} body\n   */\n  table(header, body) {\n    if (body) body = `<tbody>${body}</tbody>`;\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  }\n\n  /**\n   * @param {string} content\n   */\n  tablerow(content) {\n    return `<tr>\\n${content}</tr>\\n`;\n  }\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? `<${type} align=\"${flags.align}\">`\n      : `<${type}>`;\n    return tag + content + `</${type}>\\n`;\n  }\n\n  /**\n   * span level renderer\n   * @param {string} text\n   */\n  strong(text) {\n    return `<strong>${text}</strong>`;\n  }\n\n  /**\n   * @param {string} text\n   */\n  em(text) {\n    return `<em>${text}</em>`;\n  }\n\n  /**\n   * @param {string} text\n   */\n  codespan(text) {\n    return `<code>${text}</code>`;\n  }\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  }\n\n  /**\n   * @param {string} text\n   */\n  del(text) {\n    return `<del>${text}</del>`;\n  }\n\n  /**\n   * @param {string} href\n   * @param {string} title\n   * @param {string} text\n   */\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  }\n\n  /**\n   * @param {string} href\n   * @param {string} title\n   * @param {string} text\n   */\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = `<img src=\"${href}\" alt=\"${text}\"`;\n    if (title) {\n      out += ` title=\"${title}\"`;\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  }\n\n  text(text) {\n    return text;\n  }\n}\n\n/**\n * TextRenderer\n * returns only the textual part of the token\n */\nclass TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  html(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n}\n\n/**\n * Slugger generates header id\n */\nclass Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * @param {string} value\n   */\n  serialize(value) {\n    return value\n      .toLowerCase()\n      .trim()\n      // remove html tags\n      .replace(/<[!\\/a-z].*?>/ig, '')\n      // remove unwanted chars\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n  }\n\n  /**\n   * Finds the next safe (unique) slug to use\n   * @param {string} originalSlug\n   * @param {boolean} isDryRun\n   */\n  getNextSafeSlug(originalSlug, isDryRun) {\n    let slug = originalSlug;\n    let occurenceAccumulator = 0;\n    if (this.seen.hasOwnProperty(slug)) {\n      occurenceAccumulator = this.seen[originalSlug];\n      do {\n        occurenceAccumulator++;\n        slug = originalSlug + '-' + occurenceAccumulator;\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    if (!isDryRun) {\n      this.seen[originalSlug] = occurenceAccumulator;\n      this.seen[slug] = 0;\n    }\n    return slug;\n  }\n\n  /**\n   * Convert string to unique id\n   * @param {object} [options]\n   * @param {boolean} [options.dryrun] Generates the next unique slug without\n   * updating the internal accumulator.\n   */\n  slug(value, options = {}) {\n    const slug = this.serialize(value);\n    return this.getNextSafeSlug(slug, options.dryrun);\n  }\n}\n\n/**\n * Parsing & Compiling\n */\nclass Parser {\n  constructor(options) {\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.textRenderer = new TextRenderer();\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  }\n\n  /**\n   * Static Parse Inline Method\n   */\n  static parseInline(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parseInline(tokens);\n  }\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens, top = true) {\n    let out = '',\n      i,\n      j,\n      k,\n      l2,\n      l3,\n      row,\n      cell,\n      header,\n      body,\n      token,\n      ordered,\n      start,\n      loose,\n      itemBody,\n      item,\n      checked,\n      task,\n      checkbox,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['space', 'hr', 'heading', 'code', 'table', 'blockquote', 'list', 'html', 'paragraph', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'space': {\n          continue;\n        }\n        case 'hr': {\n          out += this.renderer.hr();\n          continue;\n        }\n        case 'heading': {\n          out += this.renderer.heading(\n            this.parseInline(token.tokens),\n            token.depth,\n            unescape(this.parseInline(token.tokens, this.textRenderer)),\n            this.slugger);\n          continue;\n        }\n        case 'code': {\n          out += this.renderer.code(token.text,\n            token.lang,\n            token.escaped);\n          continue;\n        }\n        case 'table': {\n          header = '';\n\n          // header\n          cell = '';\n          l2 = token.header.length;\n          for (j = 0; j < l2; j++) {\n            cell += this.renderer.tablecell(\n              this.parseInline(token.header[j].tokens),\n              { header: true, align: token.align[j] }\n            );\n          }\n          header += this.renderer.tablerow(cell);\n\n          body = '';\n          l2 = token.rows.length;\n          for (j = 0; j < l2; j++) {\n            row = token.rows[j];\n\n            cell = '';\n            l3 = row.length;\n            for (k = 0; k < l3; k++) {\n              cell += this.renderer.tablecell(\n                this.parseInline(row[k].tokens),\n                { header: false, align: token.align[k] }\n              );\n            }\n\n            body += this.renderer.tablerow(cell);\n          }\n          out += this.renderer.table(header, body);\n          continue;\n        }\n        case 'blockquote': {\n          body = this.parse(token.tokens);\n          out += this.renderer.blockquote(body);\n          continue;\n        }\n        case 'list': {\n          ordered = token.ordered;\n          start = token.start;\n          loose = token.loose;\n          l2 = token.items.length;\n\n          body = '';\n          for (j = 0; j < l2; j++) {\n            item = token.items[j];\n            checked = item.checked;\n            task = item.task;\n\n            itemBody = '';\n            if (item.task) {\n              checkbox = this.renderer.checkbox(checked);\n              if (loose) {\n                if (item.tokens.length > 0 && item.tokens[0].type === 'paragraph') {\n                  item.tokens[0].text = checkbox + ' ' + item.tokens[0].text;\n                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === 'text') {\n                    item.tokens[0].tokens[0].text = checkbox + ' ' + item.tokens[0].tokens[0].text;\n                  }\n                } else {\n                  item.tokens.unshift({\n                    type: 'text',\n                    text: checkbox\n                  });\n                }\n              } else {\n                itemBody += checkbox;\n              }\n            }\n\n            itemBody += this.parse(item.tokens, loose);\n            body += this.renderer.listitem(itemBody, task, checked);\n          }\n\n          out += this.renderer.list(body, ordered, start);\n          continue;\n        }\n        case 'html': {\n          // TODO parse inline content if parameter markdown=1\n          out += this.renderer.html(token.text);\n          continue;\n        }\n        case 'paragraph': {\n          out += this.renderer.paragraph(this.parseInline(token.tokens));\n          continue;\n        }\n        case 'text': {\n          body = token.tokens ? this.parseInline(token.tokens) : token.text;\n          while (i + 1 < l && tokens[i + 1].type === 'text') {\n            token = tokens[++i];\n            body += '\\n' + (token.tokens ? this.parseInline(token.tokens) : token.text);\n          }\n          out += top ? this.renderer.paragraph(body) : body;\n          continue;\n        }\n\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Parse Inline Tokens\n   */\n  parseInline(tokens, renderer) {\n    renderer = renderer || this.renderer;\n    let out = '',\n      i,\n      token,\n      ret;\n\n    const l = tokens.length;\n    for (i = 0; i < l; i++) {\n      token = tokens[i];\n\n      // Run any renderer extensions\n      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {\n        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);\n        if (ret !== false || !['escape', 'html', 'link', 'image', 'strong', 'em', 'codespan', 'br', 'del', 'text'].includes(token.type)) {\n          out += ret || '';\n          continue;\n        }\n      }\n\n      switch (token.type) {\n        case 'escape': {\n          out += renderer.text(token.text);\n          break;\n        }\n        case 'html': {\n          out += renderer.html(token.text);\n          break;\n        }\n        case 'link': {\n          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'image': {\n          out += renderer.image(token.href, token.title, token.text);\n          break;\n        }\n        case 'strong': {\n          out += renderer.strong(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'em': {\n          out += renderer.em(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'codespan': {\n          out += renderer.codespan(token.text);\n          break;\n        }\n        case 'br': {\n          out += renderer.br();\n          break;\n        }\n        case 'del': {\n          out += renderer.del(this.parseInline(token.tokens, renderer));\n          break;\n        }\n        case 'text': {\n          out += renderer.text(token.text);\n          break;\n        }\n        default: {\n          const errMsg = 'Token with \"' + token.type + '\" type was not found.';\n          if (this.options.silent) {\n            console.error(errMsg);\n            return;\n          } else {\n            throw new Error(errMsg);\n          }\n        }\n      }\n    }\n    return out;\n  }\n}\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (typeof opt === 'function') {\n    callback = opt;\n    opt = null;\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  if (callback) {\n    const highlight = opt.highlight;\n    let tokens;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    const done = function(err) {\n      let out;\n\n      if (!err) {\n        try {\n          if (opt.walkTokens) {\n            marked.walkTokens(tokens, opt.walkTokens);\n          }\n          out = Parser.parse(tokens, opt);\n        } catch (e) {\n          err = e;\n        }\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!tokens.length) return done();\n\n    let pending = 0;\n    marked.walkTokens(tokens, function(token) {\n      if (token.type === 'code') {\n        pending++;\n        setTimeout(() => {\n          highlight(token.text, token.lang, function(err, code) {\n            if (err) {\n              return done(err);\n            }\n            if (code != null && code !== token.text) {\n              token.text = code;\n              token.escaped = true;\n            }\n\n            pending--;\n            if (pending === 0) {\n              done();\n            }\n          });\n        }, 0);\n      }\n    });\n\n    if (pending === 0) {\n      done();\n    }\n\n    return;\n  }\n\n  function onError(e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n\n  try {\n    const tokens = Lexer.lex(src, opt);\n    if (opt.walkTokens) {\n      if (opt.async) {\n        return Promise.all(marked.walkTokens(tokens, opt.walkTokens))\n          .then(() => {\n            return Parser.parse(tokens, opt);\n          })\n          .catch(onError);\n      }\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parse(tokens, opt);\n  } catch (e) {\n    onError(e);\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Use Extension\n */\n\nmarked.use = function(...args) {\n  const opts = merge({}, ...args);\n  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };\n  let hasExtensions;\n\n  args.forEach((pack) => {\n    // ==-- Parse \"addon\" extensions --== //\n    if (pack.extensions) {\n      hasExtensions = true;\n      pack.extensions.forEach((ext) => {\n        if (!ext.name) {\n          throw new Error('extension name required');\n        }\n        if (ext.renderer) { // Renderer extensions\n          const prevRenderer = extensions.renderers ? extensions.renderers[ext.name] : null;\n          if (prevRenderer) {\n            // Replace extension with func to run new extension but fall back if false\n            extensions.renderers[ext.name] = function(...args) {\n              let ret = ext.renderer.apply(this, args);\n              if (ret === false) {\n                ret = prevRenderer.apply(this, args);\n              }\n              return ret;\n            };\n          } else {\n            extensions.renderers[ext.name] = ext.renderer;\n          }\n        }\n        if (ext.tokenizer) { // Tokenizer Extensions\n          if (!ext.level || (ext.level !== 'block' && ext.level !== 'inline')) {\n            throw new Error(\"extension level must be 'block' or 'inline'\");\n          }\n          if (extensions[ext.level]) {\n            extensions[ext.level].unshift(ext.tokenizer);\n          } else {\n            extensions[ext.level] = [ext.tokenizer];\n          }\n          if (ext.start) { // Function to check for start of token\n            if (ext.level === 'block') {\n              if (extensions.startBlock) {\n                extensions.startBlock.push(ext.start);\n              } else {\n                extensions.startBlock = [ext.start];\n              }\n            } else if (ext.level === 'inline') {\n              if (extensions.startInline) {\n                extensions.startInline.push(ext.start);\n              } else {\n                extensions.startInline = [ext.start];\n              }\n            }\n          }\n        }\n        if (ext.childTokens) { // Child tokens to be visited by walkTokens\n          extensions.childTokens[ext.name] = ext.childTokens;\n        }\n      });\n    }\n\n    // ==-- Parse \"overwrite\" extensions --== //\n    if (pack.renderer) {\n      const renderer = marked.defaults.renderer || new Renderer();\n      for (const prop in pack.renderer) {\n        const prevRenderer = renderer[prop];\n        // Replace renderer with func to run extension, but fall back if false\n        renderer[prop] = (...args) => {\n          let ret = pack.renderer[prop].apply(renderer, args);\n          if (ret === false) {\n            ret = prevRenderer.apply(renderer, args);\n          }\n          return ret;\n        };\n      }\n      opts.renderer = renderer;\n    }\n    if (pack.tokenizer) {\n      const tokenizer = marked.defaults.tokenizer || new Tokenizer();\n      for (const prop in pack.tokenizer) {\n        const prevTokenizer = tokenizer[prop];\n        // Replace tokenizer with func to run extension, but fall back if false\n        tokenizer[prop] = (...args) => {\n          let ret = pack.tokenizer[prop].apply(tokenizer, args);\n          if (ret === false) {\n            ret = prevTokenizer.apply(tokenizer, args);\n          }\n          return ret;\n        };\n      }\n      opts.tokenizer = tokenizer;\n    }\n\n    // ==-- Parse WalkTokens extensions --== //\n    if (pack.walkTokens) {\n      const walkTokens = marked.defaults.walkTokens;\n      opts.walkTokens = function(token) {\n        let values = [];\n        values.push(pack.walkTokens.call(this, token));\n        if (walkTokens) {\n          values = values.concat(walkTokens.call(this, token));\n        }\n        return values;\n      };\n    }\n\n    if (hasExtensions) {\n      opts.extensions = extensions;\n    }\n\n    marked.setOptions(opts);\n  });\n};\n\n/**\n * Run callback for every token\n */\n\nmarked.walkTokens = function(tokens, callback) {\n  let values = [];\n  for (const token of tokens) {\n    values = values.concat(callback.call(marked, token));\n    switch (token.type) {\n      case 'table': {\n        for (const cell of token.header) {\n          values = values.concat(marked.walkTokens(cell.tokens, callback));\n        }\n        for (const row of token.rows) {\n          for (const cell of row) {\n            values = values.concat(marked.walkTokens(cell.tokens, callback));\n          }\n        }\n        break;\n      }\n      case 'list': {\n        values = values.concat(marked.walkTokens(token.items, callback));\n        break;\n      }\n      default: {\n        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) { // Walk any extensions\n          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {\n            values = values.concat(marked.walkTokens(token[childTokens], callback));\n          });\n        } else if (token.tokens) {\n          values = values.concat(marked.walkTokens(token.tokens, callback));\n        }\n      }\n    }\n  }\n  return values;\n};\n\n/**\n * Parse Inline\n * @param {string} src\n */\nmarked.parseInline = function(src, opt) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked.parseInline(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked.parseInline(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  opt = merge({}, marked.defaults, opt || {});\n  checkSanitizeDeprecation(opt);\n\n  try {\n    const tokens = Lexer.lexInline(src, opt);\n    if (opt.walkTokens) {\n      marked.walkTokens(tokens, opt.walkTokens);\n    }\n    return Parser.parseInline(tokens, opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if (opt.silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n};\n\n/**\n * Expose\n */\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\nmarked.Tokenizer = Tokenizer;\nmarked.Slugger = Slugger;\nmarked.parse = marked;\n\nconst options = marked.options;\nconst setOptions = marked.setOptions;\nconst use = marked.use;\nconst walkTokens = marked.walkTokens;\nconst parseInline = marked.parseInline;\nconst parse = marked;\nconst parser = Parser.parse;\nconst lexer = Lexer.lex;\n\nexport { Lexer, Parser, Renderer, Slugger, TextRenderer, Tokenizer, defaults, getDefaults, lexer, marked, options, parse, parseInline, parser, setOptions, use, walkTokens };\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      \n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = (element) => {\n                  var clones = [];\n                  // Add a clone of the element to every parent window (but not the current one\n                  // since the original `element` goes there).\n                  for (\n                    var currWindow = window.parent;\n                    currWindow !== window;\n                    currWindow = currWindow.parent\n                  ) {\n                    var clone = element.cloneNode(true);\n                    clones.push(clone);\n                    currWindow.document.head.appendChild(clone);\n                    if (currWindow.parent === currWindow) break;\n                  }\n                  // Update the clones every time the original changes.\n                  if (typeof window.MutationObserver !== \"undefined\") {\n                    new MutationObserver(function () {\n                      for (var i = 0; i < clones.length; i++) {\n                        clones[i].textContent = element.textContent;\n                      }\n                    }).observe(element, {\n                      childList: true,\n                      subtree: true,\n                      characterData: true,\n                    });\n                  }\n                  window.document.head.appendChild(element);\n                };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      \n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = (element) => {\n                  var clones = [];\n                  // Add a clone of the element to every parent window (but not the current one\n                  // since the original `element` goes there).\n                  for (\n                    var currWindow = window.parent;\n                    currWindow !== window;\n                    currWindow = currWindow.parent\n                  ) {\n                    var clone = element.cloneNode(true);\n                    clones.push(clone);\n                    currWindow.document.head.appendChild(clone);\n                    if (currWindow.parent === currWindow) break;\n                  }\n                  // Update the clones every time the original changes.\n                  if (typeof window.MutationObserver !== \"undefined\") {\n                    new MutationObserver(function () {\n                      for (var i = 0; i < clones.length; i++) {\n                        clones[i].textContent = element.textContent;\n                      }\n                    }).observe(element, {\n                      childList: true,\n                      subtree: true,\n                      characterData: true,\n                    });\n                  }\n                  window.document.head.appendChild(element);\n                };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { getDisplayOrderForNetDB, isInstance, makeElement, mappedMin, turnNoIndexInto, waitForElements, withMaxTimeout, } from \"../helpers\";\nimport constants from \"../constants.json\";\nimport \"./styles.scss\";\nimport stylesAsString from \"!!to-string-loader!css-loader?importLoaders=1!postcss-loader!sass-loader!../../prepend-sass-variables-loader.js!./styles.scss\";\nvar MAC_ADDRESS_REGEX = /\\b(?:[a-f\\d]{12}(?![a-f\\d])|[a-f\\d]{4}(?:[-–][a-f\\d]{4}){2}|[a-f\\d]{4}([^a-z\\d\\s])[a-f\\d]{4}\\1[a-f\\d]{4}(?!\\1?[a-f\\d])|[a-f\\d]{2}(?:[-–][a-f\\d]{2}){5}|[a-f\\d]{2}([^a-z\\d])[a-f\\d]{2}(?:\\2[a-f\\d]{2}){4})(?!\\2?[a-f\\d])/i;\nvar IP_ADDRESS_REGEX = /(^|[^.])\\b((?:[1-9]?\\d|1\\d\\d|2[0-4]\\d|25[0-5])(?:\\.(?:[1-9]?\\d|1\\d\\d|2[0-4]\\d|25[0-5])){3})\\b(?!\\.\\d)/;\nvar NODE_NAME_REGEX = /\\b(rescomp-\\d+-\\d+|sr\\d+-[\\da-f]+)(?:\\.stanford\\.edu)?\\b/;\nvar TICKET_REGEX = /\\b(?:CALL|CHG|INC|REQ|RITM|SR|TASK)\\d+\\b/;\nvar OUIsPopulated = new Promise(function (resolve, reject) {\n    var url = \"https://gitlab.com/wireshark/wireshark/-/raw/master/manuf\";\n    var primaryFailed = false;\n    var fallbackFailed = false;\n    var fallback = null;\n    // Try to fetch up-to-date information from the `url` above. This *usually* works, but not always\n    // because it needs to go through allorigins.win to get through CORS. If this fetch succeeds,resolve\n    // right away. If it fails, fallback to the second fetch.\n    withMaxTimeout(fetch(\"https://api.allorigins.win/get?url=\".concat(encodeURIComponent(url), \"&timestamp=\").concat(new Date().valueOf())), 5000)\n        .then(function (response) { return response.json(); })\n        .then(function (response) { return response.contents; })\n        .then(resolve, function () {\n        if (fallback)\n            return resolve(fallback);\n        if (fallbackFailed)\n            return reject();\n        primaryFailed = true;\n    });\n    fetch(\"https://raw.githubusercontent.com/FiggChristian/PTS-Scripts/main/OUI_list.txt?timestamp=\".concat(new Date().valueOf()))\n        .then(function (response) { return response.text(); })\n        .then(function (text) {\n        if (primaryFailed)\n            return resolve(text);\n        fallback = text;\n    }),\n        function () {\n            if (primaryFailed)\n                return reject();\n            fallbackFailed = true;\n        };\n}).then(function (text) { return getOUIObject(text); });\nvar getOUIObject = function (response) {\n    // The list of OUIs we will populate.\n    var OUIs = {};\n    // Separate the response into lines.\n    for (var index = 0; ~(index = response.indexOf(\"\\n\", index)); index++) {\n        // If the beginning of this line starts with a \"#\", it is a comment and we can ignore it.\n        if (response[index + 1] === \"#\" || response[index + 1] === \"\\n\") {\n            continue;\n        }\n        // Get the line as a standalone string.\n        var line = response.substring(index + 1, response.indexOf(\"\\n\", index + 1));\n        // Split it by tabs to get the individual components.\n        var components = line.split(\"\\t\");\n        // The 0th item is the MAC address prefix. It can be in the form of 6 digits or a full MAC\n        // address followed by a \"/\" and number. The number indicates how many digits the prefix is.\n        // E.g., \"A1:B2:C3:D4:E5:F6/36\" indicates we should look at the first 36/4=9 digits only.\n        // A six-digit MAC address is treated as the full six digits.\n        if (components[0].length === 8) {\n            // 6 digits plus 2 colons\n            // The 2nd item is the full name of the vendor. The 1st item is the shortened name of the\n            // vendor. We prefer to use the full name but go to the short name when that's not available\n            OUIs[components[0]] = components[2] || components[1];\n        }\n        else if (components[0][17] === \"/\") {\n            // If we find a prefix length other than 6, we overwrite the OUI for the six digit version\n            // with the new length.\n            var digits = parseInt(components[0].substring(18)) / 4;\n            var prefix = components[0].substring(0, digits + Math.ceil(digits / 2 - 1));\n            OUIs[components[0].substring(0, 8)] = prefix.length;\n            OUIs[prefix] = components[2] || components[1];\n        }\n        else {\n            continue;\n        }\n    }\n    return OUIs;\n};\nvar getOUI = function (OUIs, macAddress) {\n    var prefix = macAddress.substring(0, 8);\n    var item = OUIs[prefix];\n    if (typeof item === \"string\") {\n        return item;\n    }\n    else if (typeof item === \"number\") {\n        prefix = macAddress.substring(0, OUIs[prefix]);\n        if (prefix in OUIs) {\n            return OUIs[prefix];\n        }\n        else {\n            return null;\n        }\n    }\n    else {\n        return null;\n    }\n};\n/**\n * Returns whether a node is a Text node.\n * @param node The node to check.\n * @returns A boolean indicating whether the node is a Text node.\n */\nvar isTextNode = function (node) {\n    return (node === null || node === void 0 ? void 0 : node.nodeType) === Node.TEXT_NODE;\n};\n/**\n * Returns whether a node is an Element node.\n * @param node The node to check.\n * @returns A boolean indicating whether the node is an Element node.\n */\nvar isElementNode = function (node) {\n    return (node === null || node === void 0 ? void 0 : node.nodeType) === Node.ELEMENT_NODE;\n};\n/**\n * Returns whether a node is a DocumentFragment node.\n * @param node The node to check.\n * @returns A boolean indicating whether the node is a Document Fragment node.\n */\nvar isDocumentFragmentNode = function (node) { return (node === null || node === void 0 ? void 0 : node.nodeType) === Node.DOCUMENT_FRAGMENT_NODE; };\n/**\n * Adds smart text replacements within an node. This function is called recursively on every child\n * node from the starting node.\n * @param node The node to make smart text replacements within.\n */\nexport var replaceSmartText = function (node) {\n    var _a;\n    if (isTextNode(node)) {\n        var macAddressMatch = void 0;\n        var ipAddressMatch = void 0;\n        var nodeNameMatch = void 0;\n        var ticketMatch = void 0;\n        var _loop_1 = function () {\n            var _c, _d, _e, _f;\n            var textContent = (_a = node.textContent) !== null && _a !== void 0 ? _a : \"\";\n            macAddressMatch = MAC_ADDRESS_REGEX.exec(textContent);\n            ipAddressMatch = IP_ADDRESS_REGEX.exec(textContent);\n            nodeNameMatch = NODE_NAME_REGEX.exec(textContent);\n            ticketMatch = TICKET_REGEX.exec(textContent);\n            var firstMatch = mappedMin(function (match) { return match === null || match === void 0 ? void 0 : match.index; }, macAddressMatch, ipAddressMatch, nodeNameMatch, ticketMatch);\n            // Break if there are no matches.\n            if (firstMatch == null) {\n                return \"break\";\n            }\n            if (firstMatch === macAddressMatch) {\n                // Links sometimes have random numbers in them that look like they could be a MAC address,\n                // but are usually just random numbers as part of the link. To check if that's the case, we\n                // look at the the location in the text where the MAC address is. We check for a space\n                // before and after the MAC address and then check if that \"word\" that the MAC address is in\n                // is a URL.\n                // `preText` is all the text inside any text nodes that precede the current text node. If\n                // there's a link such as https://example.com/a1b2c3d4e5f6-a1b2c3d4e5f6, it has two \"MAC\n                // addresses\" in it. The first one will be detected and not replaced with smart text. Instead\n                // it gets replaced with its own text node so we can move on to the next thing. The text\n                // nodes (after finding it and replacing it) will be:\n                // \"https://example.com/\",\n                // \"a1b2c3d4e5f6\", and\n                // \"-a1b2c3d4e5f6\".\n                // The next text node after will be looked at, and the second MAC address will be seen as\n                // well. Since that text node's content is only \"-a1b2c3d4e5f6\", we won't recognize that as\n                // a URL because the URL has been broken up into multiple text nodes, but we still *do* want\n                // to to recognize that it's just a second MAC address in a URL. `preText` is filled with all\n                // the text content that precedes the current text node. In that case, it would be\n                // \"https://example.com/a1b2c3d4e5f6\". When we concatenate it with the text node's content,\n                // we get the full URL back as one contiguous string, and we can detect that the entire\n                // string is in fact a URL.\n                var preText_1 = \"\";\n                for (var preNode = node.previousSibling; isTextNode(preNode); preNode = preNode.previousSibling) {\n                    preText_1 = preNode.textContent + preText_1;\n                }\n                var prevWhiteSpaceIndex = Math.max.apply(Math, __spreadArray([0], __read([\" \", \"\\t\", \"\\n\"].map(function (whitespaceChar) {\n                    return (preText_1 + node.textContent).lastIndexOf(whitespaceChar, firstMatch.index + preText_1.length);\n                })), false));\n                var nextWhiteSpaceIndex = mappedMin.apply(void 0, __spreadArray([function (value) { return turnNoIndexInto(Infinity, value); },\n                    textContent.length + preText_1.length], __read([\" \", \"\\t\", \"\\n\"].map(function (whitespaceChar) {\n                    return (preText_1 + node.textContent).indexOf(whitespaceChar, firstMatch.index + firstMatch[0].length + preText_1.length);\n                })), false));\n                // Get the entire \"word\" the MAC address is in. In most cases, it's just the MAC address on\n                // its own, or it's a URL.\n                var macWord = (preText_1 + node.textContent).substring(prevWhiteSpaceIndex, nextWhiteSpaceIndex);\n                // Check if it's a valid URL by using the URL builtin constructor.\n                var isURL = false;\n                try {\n                    // Check if value can be parsed as a URL.\n                    var url = new URL(macWord);\n                    // Make sure this is a \"normal\" URL. This means other URL protocols like \"chrome:\" or\n                    // \"data:\" will not be counted as URLs, which can create some false negatives, but this\n                    // also prevents MAC addresses from being counted as a URL. \"AB:CD:EF:12:34:56\" for\n                    // example can be read as a URL with protocol \"ab:\", which would result in false\n                    // positives, and this happens way more often since no one really sends non-http(s) URLs\n                    // anyway.\n                    isURL =\n                        url.protocol === \"https:\" ||\n                            url.protocol === \"http:\" ||\n                            url.protocol === \"file:\";\n                }\n                catch (_g) {\n                    /* pass */\n                }\n                // If this MAC address looks like it's in a URL, we don't highlight it. Instead, we keep it\n                // as-is in its own text node.\n                if (isURL && node.parentNode) {\n                    node.parentNode.insertBefore(document.createTextNode(textContent.substring(0, firstMatch.index)), node);\n                    node.parentNode.insertBefore(document.createTextNode(firstMatch[0]), node);\n                    node.textContent = textContent.substring(macAddressMatch.index + firstMatch[0].length);\n                    return \"continue\";\n                }\n                var formatted_1 = macAddressMatch[0]\n                    .toUpperCase()\n                    .replace(/[^A-F\\d]/g, \"\")\n                    .replace(/(.{2})/g, \":$1\")\n                    .substring(1);\n                var macSpan = makeElement(\"span\", (_c = {\n                        className: \"\".concat(constants.EXTENSION_PREFIX, \"-smart-text-span \").concat(constants.EXTENSION_PREFIX, \"-smart-text-span-mac-address\")\n                    },\n                    _c[\"data-\".concat(constants.EXTENSION_PREFIX, \"-mac-address\")] = formatted_1,\n                    _c), \n                // prettier-ignore\n                \"\\n            <input value=\\\"\".concat(formatted_1, \"\\\" readonly/>\\n            <span>\\n              <span class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-smart-text-anchor-text\\\">\").concat(firstMatch[0], \"</span>\\n              <ul class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-smart-text-popup dropdown-menu\\\">\\n                <li>MAC Address</li>\\n                <li class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-mac-address-oui\\\" style=\\\"font-style:italic\\\">Loading OUIs...</li>\\n                <li>\\n                  <button class=\\\"btn \").concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\\\">Copy</button>\\n                </li>\\n                <li>Search in:</li>\\n                <li>\\n                  <ul>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://netdb.stanford.edu/fs_node_result?\").concat(getDisplayOrderForNetDB([\"hardware_address\", \"object\", \"ip_address\", \"node_state\", \"make_and_model\", \"os\", \"department\", \"user\"]), \"&column=Name&direction=ascending&purge=&hardware_address=\").concat(formatted_1, \"\\\">NetDB</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"http://day.stanford.edu:9696/manage/dhcplog/check_db?input=\").concat(formatted_1, \"#ACK\\\">DHCP Log</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://archer.stanford.edu/webacs/welcomeAction.do#pageId=full_search_pageId&query=\").concat(encodeURIComponent(formatted_1), \"&forceLoad=true\\\">Cisco Prime</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://mydevices.stanford.edu/group/mydevices?\").concat(encodeURIComponent(\"\".concat(constants.EXTENSION_PREFIX, \"-search-mac\")), \"=\").concat(encodeURIComponent(formatted_1), \"\\\">MyDevices</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://iprequest.stanford.edu/iprequest/process/search.jsp?ipaddr=&macaddress=\").concat(encodeURIComponent(formatted_1), \"&search=0&sort=UPPER%28lastname%29%2C+UPPER%28firstname%29\\\">IPRequest</a>\\n                    </li>\\n                  </ul>\\n                </li>\\n              </ul>\\n            </span>\\n          \"));\n                macSpan.addEventListener(\"click\", function (e) {\n                    return e.stopPropagation();\n                });\n                var input_1 = macSpan.firstElementChild;\n                var anchorText_1 = macSpan.querySelector(\".\".concat(constants.EXTENSION_PREFIX, \"-smart-text-anchor-text\"));\n                var OUISpan_1 = macSpan.querySelector(\".\".concat(constants.EXTENSION_PREFIX, \"-mac-address-oui\"));\n                OUIsPopulated.then(function (OUIs) {\n                    var OUI = getOUI(OUIs, formatted_1);\n                    if (OUI === null) {\n                        OUISpan_1.textContent = \"Unregistered OUI\";\n                        OUISpan_1.style.color = \"#C00\";\n                        anchorText_1.style.color = \"#C00\";\n                        anchorText_1.style.fontWeight = \"bold\";\n                    }\n                    else {\n                        OUISpan_1.textContent = \"OUI: \".concat(OUI);\n                        OUISpan_1.style.fontStyle = \"initial\";\n                    }\n                }, function () {\n                    OUISpan_1.textContent = \"Couldn't Load OUIs\";\n                });\n                var copySpan = macSpan.querySelector(\".\".concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\"));\n                copySpan.addEventListener(\"click\", function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    try {\n                        navigator.clipboard.writeText(formatted_1);\n                    }\n                    catch (e) {\n                        input_1.focus();\n                        if (!document.execCommand(\"selectAll\", false)) {\n                            input_1.setSelectionRange(0, input_1.value.length);\n                        }\n                        document.execCommand(\"copy\", false);\n                    }\n                });\n                if (node.parentNode) {\n                    node.parentNode.insertBefore(document.createTextNode(textContent.substring(0, macAddressMatch.index)), node);\n                    node.parentNode.insertBefore(macSpan, node);\n                    node.textContent = textContent.substring(macAddressMatch.index + macAddressMatch[0].length);\n                }\n            }\n            else if (firstMatch === ipAddressMatch) {\n                var formatted_2 = firstMatch[2];\n                var ipSpan = makeElement(\"span\", (_d = {\n                        className: \"\".concat(constants.EXTENSION_PREFIX, \"-smart-text-span \").concat(constants.EXTENSION_PREFIX, \"-smart-text-ip-address\")\n                    },\n                    _d[\"data-\".concat(constants.EXTENSION_PREFIX, \"-ip-address\")] = formatted_2,\n                    _d), \n                // prettier-ignore\n                \"\\n            <input value=\\\"\".concat(formatted_2, \"\\\" readonly/>\\n            <span>\\n              <span>\").concat(firstMatch[2], \"</span>\\n              <ul class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-smart-text-popup dropdown-menu\\\">\\n                <li>IP Address</li>\\n                <li>\\n                  <button class=\\\"btn \").concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\\\">Copy</button>\\n                </li>\\n                <li>Search in:</li>\\n                <li>\\n                  <ul>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://netdb.stanford.edu/fs_network_result?\").concat(getDisplayOrderForNetDB([\"object\", \"address_space\", \"location\", \"comment\"]), \"&column=Name&direction=ascending&purge=&address_space=\").concat(formatted_2, \"\\\">NetDB</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://archer.stanford.edu/webacs/welcomeAction.do#pageId=full_search_pageId&query=\").concat(encodeURIComponent(formatted_2), \"&forceLoad=true\\\">Cisco Prime</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://iprequest.stanford.edu/iprequest/process/search.jsp?ipaddr=\").concat(encodeURIComponent(formatted_2), \"&macaddress=&search=0&sort=UPPER%28lastname%29%2C+UPPER%28firstname%29\\\">IPRequest</a>\\n                    </li>\\n                  </ul>\\n                </li>\\n              </ul>\\n            </span>\\n          \"));\n                ipSpan.addEventListener(\"click\", function (e) {\n                    return e.stopPropagation();\n                });\n                var input_2 = ipSpan.firstElementChild;\n                var copySpan = ipSpan.querySelector(\".\".concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\"));\n                copySpan.addEventListener(\"click\", function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    try {\n                        navigator.clipboard.writeText(formatted_2);\n                    }\n                    catch (e) {\n                        input_2.focus();\n                        if (!document.execCommand(\"selectAll\", false)) {\n                            input_2.setSelectionRange(0, input_2.value.length);\n                        }\n                        document.execCommand(\"copy\", false);\n                    }\n                });\n                if (node.parentElement) {\n                    node.parentElement.insertBefore(document.createTextNode(textContent.substring(0, firstMatch.index + firstMatch[1].length)), node);\n                    node.parentElement.insertBefore(ipSpan, node);\n                    node.textContent = textContent.substring(firstMatch.index + firstMatch[0].length);\n                }\n            }\n            else if (firstMatch === nodeNameMatch) {\n                var formatted_3 = firstMatch[1];\n                var nodeSpan = makeElement(\"span\", (_e = {\n                        className: \"\".concat(constants.EXTENSION_PREFIX, \"-smart-text-span \").concat(constants.EXTENSION_PREFIX, \"-smart-text-node-name\")\n                    },\n                    _e[\"data-\".concat(constants.EXTENSION_PREFIX, \"-node-name\")] = formatted_3,\n                    _e), \n                // prettier-ignore\n                \"\\n            <input value=\\\"\".concat(formatted_3, \"\\\" readonly/>\\n            <span>\\n              <span>\").concat(firstMatch[0], \"</span>\\n              <ul class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-smart-text-popup dropdown-menu\\\">\\n                <li>Node Name</li>\\n                <li>\\n                  <button class=\\\"btn \").concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\\\">Copy</button>\\n                </li>\\n                <li>Search in:</li>\\n                <li>\\n                  <ul>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://netdb.stanford.edu/node_info?name=\").concat(formatted_3, \".stanford.edu\\\">NetDB</a>\\n                    </li>\\n                    <li>\\n                      <a target=\\\"_blank\\\" href=\\\"https://iprequest.stanford.edu/iprequest/process/search.jsp?ipaddr=&macaddress=&hostname=\").concat(encodeURIComponent(formatted_3), \"&search=0&sort=UPPER%28lastname%29%2C+UPPER%28firstname%29\\\">IPRequest</a>\\n                    </li>\\n                  </ul>\\n                </li>\\n              </ul>\\n            </span>\\n          \"));\n                nodeSpan.addEventListener(\"click\", function (e) {\n                    return e.stopPropagation();\n                });\n                var input_3 = nodeSpan.firstElementChild;\n                var copySpan = nodeSpan.querySelector(\".\".concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\"));\n                copySpan.addEventListener(\"click\", function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    try {\n                        navigator.clipboard.writeText(formatted_3);\n                    }\n                    catch (e) {\n                        input_3.focus();\n                        if (!document.execCommand(\"selectAll\", false)) {\n                            input_3.setSelectionRange(0, input_3.value.length);\n                        }\n                        document.execCommand(\"copy\", false);\n                    }\n                });\n                if (node.parentElement) {\n                    node.parentElement.insertBefore(document.createTextNode(textContent.substring(0, firstMatch.index)), node);\n                    node.parentElement.insertBefore(nodeSpan, node);\n                    node.textContent = textContent.substring(firstMatch.index + firstMatch[0].length);\n                }\n            }\n            else if (firstMatch === ticketMatch) {\n                var formatted_4 = firstMatch[0];\n                var ticketSpan = makeElement(\"span\", (_f = {\n                        className: \"\".concat(constants.EXTENSION_PREFIX, \"-smart-text-span \").concat(constants.EXTENSION_PREFIX, \"-smart-text-ticket\")\n                    },\n                    _f[\"data-\".concat(constants.EXTENSION_PREFIX, \"-ticket\")] = formatted_4,\n                    _f), \n                // prettier-ignore\n                \"\\n            <input value=\\\"\".concat(formatted_4, \"\\\" readonly/>\\n            <span>\\n              <span>\").concat(firstMatch[0], \"</span>\\n              <ul class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-smart-text-popup dropdown-menu\\\">\\n                <li>Ticket Number</li>\\n                <li>\\n                  <button class=\\\"btn \").concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\\\">Copy</button>\\n                </li>\\n                <li>Search in:</li>\\n                <li>\\n                  <ul>\\n                    <li>\\n                      <a href=\\\"https://stanford.service-now.com/text_search_exact_match.do?sysparm_search=\").concat(formatted_4, \"\\\">ServiceNow</a>\\n                    </li>\\n                  </ul>\\n                </li>\\n              </ul>\\n            </span>\\n          \"));\n                ticketSpan.addEventListener(\"click\", function (e) {\n                    return e.stopPropagation();\n                });\n                var input_4 = ticketSpan.firstElementChild;\n                var copySpan = ticketSpan.querySelector(\".\".concat(constants.EXTENSION_PREFIX, \"-smart-text-copy\"));\n                copySpan.addEventListener(\"click\", function (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    try {\n                        navigator.clipboard.writeText(formatted_4);\n                    }\n                    catch (e) {\n                        input_4.focus();\n                        if (!document.execCommand(\"selectAll\", false)) {\n                            input_4.setSelectionRange(0, input_4.value.length);\n                        }\n                        document.execCommand(\"copy\", false);\n                    }\n                });\n                if (node.parentElement) {\n                    node.parentElement.insertBefore(document.createTextNode(textContent.substring(0, firstMatch.index)), node);\n                    node.parentElement.insertBefore(ticketSpan, node);\n                    node.textContent = textContent.substring(firstMatch.index + firstMatch[0].length);\n                }\n            }\n        };\n        for (;;) {\n            var state_1 = _loop_1();\n            if (state_1 === \"break\")\n                break;\n        }\n    }\n    else if (isElementNode(node) && node.shadowRoot) {\n        var root = node.shadowRoot;\n        if (!root.firstElementChild ||\n            !root.firstElementChild.classList.contains(\"\".concat(constants.EXTENSION_PREFIX, \"-shadow-style\"))) {\n            var stylesheet = makeElement(\"style\", {\n                className: \"\".concat(constants.EXTENSION_PREFIX, \"-shadow-style\"),\n            }, stylesAsString);\n            node.shadowRoot.insertBefore(stylesheet, root.firstChild);\n        }\n        replaceSmartText(root);\n    }\n    else if (isElementNode(node) || isDocumentFragmentNode(node)) {\n        // Make `<a>` open in a new tab instead of on the same page. This isn't really \"smart text\", but\n        // it just makes it a lot easier when there are links in tickets.\n        try {\n            if (isInstance(node, HTMLAnchorElement) &&\n                new URL(node.href).hostname !== location.hostname) {\n                node.target = \"_blank\";\n            }\n        }\n        catch (_b) {\n            /* pass */\n        }\n        // Iterate through the child nodes in reverse order so that nodes can be added without affecting\n        // the ordering.\n        for (var i = node.childNodes.length - 1; i >= 0; i--) {\n            replaceSmartText(node.childNodes[i]);\n        }\n    }\n};\n/**\n * Initialize smart text replacement.\n */\nvar init = function (config) {\n    if (!config.enabled.servicenow.smart_text)\n        return;\n    waitForElements([\n        \".sn-widget-textblock-body\",\n        \".sn-widget-list-table-cell\",\n        \"sn-html-content-wrapper\",\n    ], function (comments) {\n        var e_1, _a;\n        try {\n            for (var comments_1 = __values(comments), comments_1_1 = comments_1.next(); !comments_1_1.done; comments_1_1 = comments_1.next()) {\n                var comment = comments_1_1.value;\n                for (var node = comment; node; node = node.parentElement) {\n                    node.style.overflow = \"visible\";\n                    if (isInstance(node, HTMLLIElement)) {\n                        node.style.display = \"inline-block\";\n                        node.style.width = \"100%\";\n                    }\n                    else if (node.classList.contains(\"h-card-wrapper\") &&\n                        node.classList.contains(\"activities-form\")) {\n                        break;\n                    }\n                }\n                replaceSmartText(comment);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (comments_1_1 && !comments_1_1.done && (_a = comments_1.return)) _a.call(comments_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    });\n    waitForElements(\".doctype-stream.form-stream\", function (streams) {\n        var e_2, _a;\n        try {\n            for (var streams_1 = __values(streams), streams_1_1 = streams_1.next(); !streams_1_1.done; streams_1_1 = streams_1.next()) {\n                var stream = streams_1_1.value;\n                stream.style.overflow = \"visible\";\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (streams_1_1 && !streams_1_1.done && (_a = streams_1.return)) _a.call(streams_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    });\n};\nexport default init;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { marked } from \"marked\";\nimport \"./styles.scss\";\nimport constants from \"../constants.json\";\nimport { addTextAreaData, addToSubBar, cloneNode, escapeHTML, getTextAreaData, getTextAreaType, interceptStyles, isInstance, makeElement, TextAreaType, turnNoIndexInto, waitForElements, withCodeDelimiters, writeToTextArea, } from \"../helpers\";\nimport { replaceSmartText } from \"../smarttext\";\nvar hasInitialized = false;\n/**\n * A map of styles that get added with the Markdown if each of these tags are used at least once.\n * These additional styles help to keep the Markdown text look somewhat decent.\n */\nvar REPLACEMENT_SUBSTYLES = {\n    code: \":not(pre)>code{background-color:#F5F5F5;border:1px solid#CCC;color:#4A4A4A;border-radius:.2em;font-size:90%;padding:0 .2em}\",\n    table: \"table{border-collapse:collapse}table>*{vertical-align:top}\",\n    tr: \"thead+tbody tr,tr+tr{border-top:1px solid#AAA}td+td{border-left:1px solid#AAA}td{padding:.1em .3em}\",\n    img: \"img{max-width:100%}\",\n};\n/**\n * Configures Marked so that it will work with ServiceNow's version of HTML. It adds [code][/code]\n * blocks around the appropriate HTML so that Markdown is parsed correctly by ServiceNow, and also\n * adds some additional functionality to the Markdown parser. Should only be called once.\n */\nvar configureMarked = function () {\n    marked.use({\n        tokenizer: {\n            // Disable HTML block-level elements so that they are treated as normal paragraphs instead.\n            html: function () { return false; },\n        },\n        renderer: {\n            code: function (code) {\n                return withCodeDelimiters(\"<pre><code>\") +\n                    code.replace(/\\n/g, withCodeDelimiters(\"<br>\")) +\n                    withCodeDelimiters(\"</code></pre>\");\n            },\n            blockquote: function (quote) {\n                return withCodeDelimiters(\"<blockquote>\") +\n                    quote +\n                    withCodeDelimiters(\"</blockquote>\");\n            },\n            // HTML is treated as plain text instead of trying to render it, so we don't wrap it in\n            // [code] ... [/code] blocks.\n            // html: (html) => {},\n            heading: function (text, level) {\n                return withCodeDelimiters(\"<h\".concat(level, \">\")) +\n                    text +\n                    withCodeDelimiters(\"</h\".concat(level, \">\"));\n            },\n            hr: function () { return withCodeDelimiters(\"<hr/>\"); },\n            list: function (body, ordered, start) {\n                return withCodeDelimiters(\"<\".concat(ordered ? \"ol\".concat(start === 1 ? \"\" : \" start=\\\"\".concat(start, \"\\\"\")) : \"ul\", \">\")) +\n                    body +\n                    withCodeDelimiters(ordered ? \"</ol>\" : \"</ul>\");\n            },\n            listitem: function (text) {\n                return withCodeDelimiters(\"<li>\") + text + withCodeDelimiters(\"</li>\");\n            },\n            checkbox: function (checked) {\n                return withCodeDelimiters(\"<input type=\\\"checkbox\\\"\".concat(checked ? \" checked\" : \"\", \">\"));\n            },\n            paragraph: function (text) {\n                return withCodeDelimiters(\"<p>\") + text + withCodeDelimiters(\"</p>\");\n            },\n            table: function (header, body) {\n                return withCodeDelimiters(\"<table><thead>\") +\n                    header +\n                    withCodeDelimiters(\"</thead><tbody>\") +\n                    body +\n                    withCodeDelimiters(\"</tbody></table>\");\n            },\n            tablerow: function (content) {\n                return withCodeDelimiters(\"<tr>\") + content + withCodeDelimiters(\"</tr>\");\n            },\n            tablecell: function (content, flags) {\n                return withCodeDelimiters(\"<td\".concat(flags.align ? \" style=\\\"text-align:\".concat(flags.align, \"\\\"\") : \"\", \">\")) +\n                    content +\n                    withCodeDelimiters(\"</td>\");\n            },\n            strong: function (text) {\n                return withCodeDelimiters(\"<strong>\") + text + withCodeDelimiters(\"</strong>\");\n            },\n            em: function (text) {\n                return withCodeDelimiters(\"<em>\") + text + withCodeDelimiters(\"</em>\");\n            },\n            codespan: function (code) {\n                return withCodeDelimiters(\"<code>\") + code + withCodeDelimiters(\"</code>\");\n            },\n            br: function () { return withCodeDelimiters(\"<br/>\"); },\n            del: function (text) {\n                return withCodeDelimiters('<span style=\"text-decoration:line-through\"><del>') +\n                    text +\n                    withCodeDelimiters(\"</del></span>\");\n            },\n            link: function (href, title, text) {\n                return withCodeDelimiters(\"<a href=\\\"\".concat(href, \"\\\"\").concat(title ? \" title=\\\"\".concat(title, \"\\\"\") : \"\", \">\")) +\n                    text +\n                    withCodeDelimiters(\"</a>\");\n            },\n            image: function (src, title, alt) {\n                return withCodeDelimiters(\"<img src=\\\"\".concat(src, \"\\\"\").concat(alt ? \" alt=\\\"\".concat(alt, \"\\\"\") : \"\").concat(title ? \" title=\\\"\".concat(title, \"\\\"\") : \"\", \"/>\"));\n            },\n            text: function (text) { return text.replace(/\\n/g, withCodeDelimiters(\"<br/>\")); },\n        },\n        extensions: [\n            /**\n             * This extension ensures [code][/code] blocks are kept intact. \"[code][/code](link)\"\n             * for example would be parsed as \"[code]\" followed by a link \"[/code](link)\", so this\n             * extension prevents that from happening so that \"[code][/code]\" blocks that are passed\n             * in will always come out as normal.\n             */\n            {\n                name: \"codeBlock\",\n                level: \"inline\",\n                start: function (src) {\n                    return turnNoIndexInto(src.length, src.indexOf(constants.CODE_DELIMITERS.START + constants.CODE_DELIMITERS.END));\n                },\n                tokenizer: function (src) {\n                    if (src.startsWith(constants.CODE_DELIMITERS.START + constants.CODE_DELIMITERS.END)) {\n                        return {\n                            type: \"codeBlock\",\n                            raw: constants.CODE_DELIMITERS.START + constants.CODE_DELIMITERS.END,\n                            tokens: [],\n                        };\n                    }\n                },\n                renderer: function (token) {\n                    if (token.type === \"codeBlock\") {\n                        return token.raw;\n                    }\n                    else\n                        return false;\n                },\n            },\n            /**\n             * This extension makes all stanford.edu links recognized automatically. Normally, only\n             * links that begin with http:// or www. (e.g., https://google.com or www.google.com) are\n             * recognized while links like google.com or cloud.google.com are not recognized. This\n             * ensures that any stanford.edu link, including ones like iprequest.stanford.edu or just\n             * stanford.edu are recognized as links even though they are missing the URL scheme at the\n             * beginning (we just assume https:// here). It uses the same code (modified a little) that\n             * Marked uses for recognizing other URLs.\n             * @see {@link https://github.com/markedjs/marked/blob/e93f800ad610a42897351ed61ab521ab61874a15/src/Tokenizer.js#L702}\n             */\n            {\n                name: \"autoStanfordLink\",\n                level: \"inline\",\n                start: function (src) {\n                    var match = src.match(/([a-zA-Z0-9-]+\\.)*stanford\\.edu(\\/[^\\s<]*|(?!\\B))/i);\n                    return match ? match.index : src.length;\n                },\n                tokenizer: function (src) {\n                    var match = /^([a-zA-Z0-9-]+\\.)*stanford\\.edu(\\/[^\\s<]*|(?!\\B))/i.exec(src);\n                    if (match) {\n                        var prevMatch = void 0;\n                        do {\n                            prevMatch = match[0];\n                            var newMatch = /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/.exec(match[0]);\n                            if (newMatch) {\n                                match[0] = newMatch[0];\n                            }\n                        } while (prevMatch !== match[0]);\n                        var text = escape(match[0]);\n                        var href = \"https://\" + text;\n                        return {\n                            // We return a \"link\" instead of \"autoStanfordLinks\" the way we're supposed\n                            // to, so that the token is parsed as a link like normal.\n                            type: \"link\",\n                            raw: match[0],\n                            text: text,\n                            href: href,\n                            tokens: [\n                                {\n                                    type: \"text\",\n                                    raw: text,\n                                    text: text,\n                                },\n                            ],\n                        };\n                    }\n                },\n            },\n            /**\n             * This extension converts forms into <tables>. As an example, instead of:\n             * ```\n             * key: value\n             * form field: form value\n             * some label: corresponding text\n             * ```\n             * we can treat this as a table:\n             * ```html\n             * <table>\n             *   <tbody>\n             *     <tr>\n             *       <td>key</td>\n             *       <td>value</td>\n             *     <tr>\n             *     ...\n             *   </tbody>\n             * </table>\n             * ```\n             * This is particularly helpful for macro forms, like Net Trouble Report. Only forms that\n             * have at least three rows will be treated as tables to prevent converting just one or two\n             * lines into a table.\n             * The values can span multiple lines, e.g.,\n             * ```\n             * form field: a line of text\n             * that spans multiple lines\n             * ```\n             * will be one row in the table, and the second cell will span two lines. Since it can span\n             * multiple lines, it's hard to differentiate between a multi-line cell and a new row. E.g.,\n             * form field: this is a multi-line string of\n             * text with a colon \":\" on the second line\n             * That'll be translated as two rows instead of one row with a multi-line cell. To ensure it\n             * is treated as the latter, you can add two spaces at the beginning of the line:\n             * ```\n             * form field: this is a multi-line string of\n             *   text with a colon \":\" that won't be translated as a new row.\n             * ```\n             * That'll ensure the second line doesn't get translated as a new row in the table.\n             */\n            {\n                name: \"formTable\",\n                level: \"block\",\n                tokenizer: function (src) {\n                    var e_1, _a;\n                    var match = /^(?!\\n)(?:(?:[^.\\n]|\\.\\S)*?:(?:[^\\S\\n].+?|[^\\S\\n]*?)(?:\\n.+)*?)(?:\\n(?! |\\t).*?:(?:[^\\S\\n].+?|[^\\S\\n]*?)(?:\\n.+)*?){2,}(?=\\n?$|\\n\\n)/.exec(src);\n                    if (match) {\n                        var rows = [];\n                        var newSrc = src.trimStart();\n                        while (newSrc) {\n                            var rowMatch = /^(?:.*?:(?:[^\\S\\n].+?|[^\\S\\n]*?)(?:\\n.+)*?)(?=\\n(?! {2}|\\t).*?:([^\\S\\n].+?|[^\\S\\n]*?)(?:\\n.+)*?|\\n\\n|\\n?$)/.exec(newSrc);\n                            if (!rowMatch)\n                                break;\n                            var row = rowMatch[0];\n                            rows.push(row);\n                            newSrc = newSrc.substring(row.length);\n                            // Break if there are two lines between these rows, indicating a\n                            // paragraph break.\n                            if (/^\\n[^\\S\\n]*\\n/.test(newSrc))\n                                break;\n                            newSrc = newSrc.trimStart();\n                        }\n                        var used = src.substring(0, src.length - newSrc.length);\n                        var rowTokens = [];\n                        try {\n                            for (var rows_1 = __values(rows), rows_1_1 = rows_1.next(); !rows_1_1.done; rows_1_1 = rows_1.next()) {\n                                var row = rows_1_1.value;\n                                var colonIndex = row.indexOf(\":\");\n                                var _b = __read([\n                                    row.substring(0, colonIndex),\n                                    row.substring(colonIndex + 1),\n                                ], 2), before = _b[0], after = _b[1];\n                                before = before.trim();\n                                after = after\n                                    .split(\"\\n\")\n                                    .map(function (line) { return line.trim(); })\n                                    .join(\"\\n\");\n                                var token = {\n                                    type: \"formTableRow\",\n                                    before: [],\n                                    after: [],\n                                    raw: row,\n                                };\n                                this.lexer.inline(before.trim(), token.before);\n                                this.lexer.inline(after.trim(), token.after);\n                                rowTokens.push(token);\n                            }\n                        }\n                        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                        finally {\n                            try {\n                                if (rows_1_1 && !rows_1_1.done && (_a = rows_1.return)) _a.call(rows_1);\n                            }\n                            finally { if (e_1) throw e_1.error; }\n                        }\n                        return {\n                            type: \"formTable\",\n                            raw: used,\n                            // marked.Token does not include marked.Tokens.Generic for whatever\n                            // reason, so we have to typecast it ourselves.\n                            tokens: rowTokens,\n                        };\n                    }\n                },\n                renderer: function (token) {\n                    var e_2, _a;\n                    var rows = token.tokens;\n                    var html = withCodeDelimiters(\"<table><tbody>\");\n                    try {\n                        for (var rows_2 = __values(rows), rows_2_1 = rows_2.next(); !rows_2_1.done; rows_2_1 = rows_2.next()) {\n                            var row = rows_2_1.value;\n                            html +=\n                                withCodeDelimiters(\"<tr><td>\") +\n                                    this.parser.parseInline(row.before) +\n                                    withCodeDelimiters(\"</td><td>\") +\n                                    this.parser.parseInline(row.after) +\n                                    withCodeDelimiters(\"</td></tr>\");\n                        }\n                    }\n                    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                    finally {\n                        try {\n                            if (rows_2_1 && !rows_2_1.done && (_a = rows_2.return)) _a.call(rows_2);\n                        }\n                        finally { if (e_2) throw e_2.error; }\n                    }\n                    html += withCodeDelimiters(\"</tbody></table>\");\n                    return html;\n                },\n            },\n        ],\n    });\n};\n/**\n * Sets up a callback that replaces Save buttons in ServiceNow's UI with a clone of the buttons but\n * with additional functionality. Specifically, the Save buttons will convert textarea text into\n * Markdown, wait a few milliseconds, and then call the normal Save button's click handler so that\n * ServiceNow will treat the textareas as HTML instead of plain text. Should only be called once.\n */\nvar duplicateSaveButtons = function () {\n    waitForElements([\n        \"[id*=sysverb_update]:not([data-\".concat(constants.EXTENSION_PREFIX, \"-save-button-cloned])\"),\n        \"[id*=sysverb_insert]:not([data-\".concat(constants.EXTENSION_PREFIX, \"-save-button-cloned])\"),\n        \"button.activity-submit:not([data-\".concat(constants.EXTENSION_PREFIX, \"-save-button-cloned])\"),\n        \"button[data-action=\\\"save\\\"]:not([data-\".concat(constants.EXTENSION_PREFIX, \"-save-button-cloned])\"),\n    ], function (buttons) {\n        var e_3, _a;\n        var _loop_1 = function (button) {\n            // Let TypeScript know this is an HTMLElement\n            if (!isInstance(button, HTMLElement))\n                return \"continue\";\n            button.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-save-button-cloned\"), \"true\");\n            // Clone the button and remove any click event listener attributes to ensure it does not\n            // inherit any click listeners from the original button.\n            var previousOnClick = button.getAttribute(\"onclick\");\n            button.removeAttribute(\"onclick\");\n            var clone = cloneNode(button, true);\n            if (previousOnClick)\n                button.setAttribute(\"onclick\", previousOnClick);\n            // Give this new clone a different ID\n            if (button.id) {\n                clone.id = \"\".concat(constants.EXTENSION_PREFIX, \"-clone-of-\") + button.id;\n            }\n            // Insert the clone where the actual button should be.\n            if (button.parentNode)\n                button.parentNode.insertBefore(clone, button);\n            // Hide the actual button so that the clone looks like it has replaced it\n            // completely.\n            button.style.opacity = \"0\";\n            button.style.position = \"absolute\";\n            button.style.pointerEvents = \"none\";\n            button.tabIndex = -1;\n            var onClick = function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                var needsDelay = prepareTextAreasForTicketSave();\n                if (needsDelay) {\n                    // If at least one textarea was changed, we need to give ServiceNow a small delay for it\n                    // to see the change and then update after that.\n                    setTimeout(function () {\n                        button.click();\n                    }, 200);\n                }\n                else {\n                    // If there weren't any changes, we can tell ServiceNow to execute the original button\n                    // click handler immediately.\n                    button.click();\n                }\n            };\n            // When we click the cloned button, replace textarea values with Markdown escaped\n            // text, and then click the original button.\n            clone.addEventListener(\"click\", onClick);\n        };\n        try {\n            for (var buttons_1 = __values(buttons), buttons_1_1 = buttons_1.next(); !buttons_1_1.done; buttons_1_1 = buttons_1.next()) {\n                var button = buttons_1_1.value;\n                _loop_1(button);\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (buttons_1_1 && !buttons_1_1.done && (_a = buttons_1.return)) _a.call(buttons_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    });\n};\n/**\n * Initializes textarea data needed for displaying Markdown. Should only be called once.\n */\nvar configureTextAreaData = function () {\n    addTextAreaData(function (textarea) {\n        // If the element before this has the class \"sn-stream-input-decorator\", keep track of it so we\n        // can hide it later.\n        var decorator;\n        for (decorator = textarea.previousElementSibling; decorator; decorator = decorator.previousElementSibling) {\n            if (decorator.classList.contains(\"sn-stream-input-decorator\")) {\n                break;\n            }\n        }\n        var markdownPreviewer = makeElement(\"div\", {\n            className: \"\".concat(constants.EXTENSION_PREFIX, \"-markdown-previewer form-control\"),\n            style: \"display: none;\",\n        });\n        var shadowRoot = markdownPreviewer.attachShadow({\n            mode: \"open\",\n        });\n        shadowRoot.innerHTML = \"\\n        <link href=\\\"styles/activity_encapsulated.css\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\">\\n        <style>:host img{max-width:100%;height:auto;overflow:hidden}</style>\\n        <div></div>\\n    \";\n        if (textarea.parentNode) {\n            textarea.parentNode.insertBefore(markdownPreviewer, decorator && textarea.previousElementSibling === decorator\n                ? decorator\n                : textarea);\n        }\n        return {\n            isPreviewingMarkdown: false,\n            markdownPreviewer: markdownPreviewer,\n            decorator: decorator,\n            // Makes the character counter underneath textareas show a more accurate character count.\n            // The value is parsed as Markdown so that the character count *after* parsing Markdown is\n            // shown instead.\n            characterCounterFunction: function (value) { return parseMarkdown(value).length; },\n            // markdownPreviewerSubBarIndex:\n        };\n    });\n};\n/**\n * Parses text inside textareas and replaces the text with ServiceNow-friendly HTML. Only textareas\n * that actually allow HTML are parsed.\n * @returns A boolean indicating whether at least one text area had its value changed.\n */\nvar prepareTextAreasForTicketSave = function () {\n    var e_4, _a;\n    var textareas = Array.from(document.getElementsByTagName(\"textarea\")).filter(function (textarea) {\n        var type = getTextAreaType(textarea);\n        // Only Comments and Work Notes allow HTML.\n        return type === TextAreaType.Comments || type === TextAreaType.WorkNotes;\n    });\n    var atLeastOneChanged = false;\n    try {\n        for (var textareas_1 = __values(textareas), textareas_1_1 = textareas_1.next(); !textareas_1_1.done; textareas_1_1 = textareas_1.next()) {\n            var textarea = textareas_1_1.value;\n            // Make sure the textarea isn't in previewing mode.\n            changeTextAreaMarkdownPreviewerVisibility(textarea, false);\n            var parsedValue = parseMarkdown(textarea.value);\n            if (parsedValue !== textarea.value) {\n                writeToTextArea(textarea, parsedValue);\n                atLeastOneChanged = true;\n            }\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (textareas_1_1 && !textareas_1_1.done && (_a = textareas_1.return)) _a.call(textareas_1);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    return atLeastOneChanged;\n};\n/**\n * Changes whether a textarea's markdown previewer is visible or not.\n * @param textarea The textarea to toggle the previewer for.\n * @param visible A boolean indicating whether the previewer should be visible or not.\n */\nvar changeTextAreaMarkdownPreviewerVisibility = function (textarea, visible) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    data.isPreviewingMarkdown = visible;\n    var previewerBtn = Array.from(data.subBar.children).find(function (child) {\n        return child.classList.contains(\"\".concat(constants.EXTENSION_PREFIX, \"-markdown-previewer-btn\"));\n    });\n    if (previewerBtn) {\n        previewerBtn.classList[visible ? \"add\" : \"remove\"](\"\".concat(constants.EXTENSION_PREFIX, \"-is-previewing-markdown\"));\n    }\n    data.markdownPreviewer.classList[visible ? \"add\" : \"remove\"](\"\".concat(constants.EXTENSION_PREFIX, \"-is-previewing-markdown\"));\n    if (data.isPreviewingMarkdown) {\n        // Parse the textarea's value.\n        var parsed = parseMarkdown(textarea.value);\n        // The returned string will have [code] blocks that we need to remove and evaluate. Everything\n        // inside the code blocks will be left as-is, but everything outside will be escaped. We don't\n        // have to worry about nested [code] blocks because parseMarkdown gets rid of those for us\n        // already.\n        var translated = \"\";\n        var index = void 0;\n        while (~(index = parsed.indexOf(constants.CODE_DELIMITERS.START))) {\n            var closer = turnNoIndexInto(parsed.length, parsed.indexOf(constants.CODE_DELIMITERS.END));\n            translated += escapeHTML(parsed.substring(0, index));\n            translated += parsed.substring(index + constants.CODE_DELIMITERS.START.length, closer);\n            parsed = parsed.substring(closer + constants.CODE_DELIMITERS.END.length);\n        }\n        // Add the rest of the string that's left over to the translated value.\n        translated += escapeHTML(parsed);\n        // Insert the parsed markdown into the previewer's shadow root.\n        data.markdownPreviewer.shadowRoot.lastElementChild.innerHTML = translated;\n        // Update the previewer's styles to match the textarea's as closely as possible.\n        data.markdownPreviewer.style.paddingLeft = data.elementStyles.paddingLeft;\n        data.markdownPreviewer.style.paddingRight = data.elementStyles.paddingRight;\n        data.markdownPreviewer.style.paddingTop = data.elementStyles.paddingTop;\n        data.markdownPreviewer.style.paddingBottom =\n            data.elementStyles.paddingBottom;\n        replaceSmartText(data.markdownPreviewer);\n        // Hide the textarea and show the previewer.\n        data.markdownPreviewer.style.display = \"block\";\n        textarea.style.display = \"none\";\n        if (data.decorator) {\n            data.decorator.style.display = \"none\";\n        }\n    }\n    else {\n        // Hide the previewer and show the textarea.\n        data.markdownPreviewer.style.display = \"none\";\n        textarea.style.display = \"\";\n        if (data.decorator) {\n            data.decorator.style.display = \"\";\n        }\n    }\n};\n/**\n * Parses a string of Markdown into ServiceNow-friendly HTML. ServiceNow only looks at code in\n * between [code] ... [/code] tags, so this will convert Markdown into HTML where the appropriate\n * HTML is sandwiched between [code] blocks so ServiceNow will render it correctly.\n * @param text The Markdown text to parse.\n * @returns A string where Markdown has been converted into ServiceNow-friendly HTML.\n */\nvar parseMarkdown = function (text) {\n    // First, we go through the text looking for [code] ... [/code] delimiters. Delimiters that are\n    // empty or only have spaces in between them are unwrapped and replaced with its inner contents\n    // since there is no code inside them that matters, and it will allow the markdown parser to read\n    // them as spaces instead of \"[code][/code]\" text. Any [code] blocks that were not removed because\n    // they have non-space content inside them are completely emptied out to leave only\n    // \"[code][/code]\". When Marked parses the text, that will allow it to ignore all the text inside\n    // inside the [code] blocks and treat it as a regular span of text. Once it has been parsed, we go\n    // back through and replace each \"[code][/code]\" marker with all the text was originally inside\n    // them so that the text inside remains unparsed.\n    var e_5, _a, e_6, _b;\n    // To allow for <!-- HTML comments --> inside the text, we go through and remove any right away so\n    // that it doesn't get parsed by Marked.\n    text = text.replace(/<!--[\\s\\S]*?-->/g, \"\");\n    // If the entire text is just \"[code][/code]\", we return as normal instead of returning \"\".\n    if (text === withCodeDelimiters(\"\"))\n        return text;\n    /**\n     * `filteredText` is the text once all the [code] blocks have been filtered out.\n     */\n    var filteredText = \"\";\n    /**\n     * Keeps track of the text we find inside [code] blocks so we can insert it back into the text at\n     * the end.\n     */\n    var codeBlocks = [];\n    var startIndex;\n    while (~(startIndex = text.indexOf(constants.CODE_DELIMITERS.START))) {\n        // Add all the text up to the \"[code]\".\n        filteredText += text.substring(0, startIndex);\n        // Remove the text up to and including the \"[code]\".\n        text = text.substring(startIndex + constants.CODE_DELIMITERS.START.length);\n        // Keep track of the text inside the current code block.\n        var codeBlock = \"\";\n        // Keep track of how many nested \"[code] ... [/code]\" blocks we find. Start at 1 since we just\n        // found the first \"[code]\".\n        var codeInstances = 1;\n        // Keep going until we get to 0 codeInstances to indicate we found a matching closing \"[/code]\".\n        while (codeInstances) {\n            // Get the indices for the next \"[code]\" and \"[/code]\".\n            var startIndex_1 = text.indexOf(constants.CODE_DELIMITERS.START);\n            var endIndex = text.indexOf(constants.CODE_DELIMITERS.END);\n            // If there is no \"[/code]\" block, it means we've reached the end of the string without being\n            // able to close it. Add on an extra \"[/code]\" to the end so we can parse it on the next\n            // iteration.\n            if (!~endIndex) {\n                text += \"[/code]\";\n                continue;\n            }\n            if (~startIndex_1 && startIndex_1 < endIndex) {\n                // If there is a \"[code]\" that comes before a \"[/code]\", it means we found a nested\n                // \"[code]\", and will need to find an extra \"[/code]\". Nested [code]s are ignored by\n                // ServiceNow, so we can just remove the \"[code]\" and \"[/code]\" altogether.\n                // Add the text up to the \"[code]\" to the code block's text.\n                codeBlock += text.substring(0, startIndex_1);\n                // Remove the text up to and including the \"[code]\" so we can parse inside of it.\n                text = text.substring(startIndex_1 + constants.CODE_DELIMITERS.START.length);\n                // Increment codeInstances we know to look for an extra \"[/code]\" block.\n                codeInstances++;\n            }\n            else {\n                // If we found a closing \"[/code]\", we add all the text up to the \"[/code]\" to the code\n                // block.\n                codeBlock += text.substring(0, endIndex);\n                // Remove the \"[/code]\" from the text so we can parse after it now.\n                text = text.substring(endIndex + constants.CODE_DELIMITERS.END.length);\n                // Decrement codeInstances so we know how many more \"[/code]\" blocks to look for.\n                codeInstances--;\n            }\n        }\n        // Now we've parsed all the text inside a \"[code][/code]\" block and removed any nested\n        // \"[code][/code]\" blocks that may have been inside. If the content of the code block is just\n        // spaces, or nothing, we don't need to add this [code] block to the filteredText so that Marked\n        // will just treat it as space instead of text.\n        if (codeBlock.replace(/ +/, \"\") === \"\") {\n            // Just add the spaces directly.\n            filteredText += codeBlock;\n        }\n        else {\n            // Otherwise, we will add a \"[code][/code]\" to serve as a marker for when we need to go back\n            // and insert the text again.\n            filteredText +=\n                constants.CODE_DELIMITERS.START + constants.CODE_DELIMITERS.END;\n            codeBlocks.push(codeBlock.replace(/\\n/g, \"<br/>\"));\n        }\n    }\n    // Now we need to add any remaining text to filteredText.\n    filteredText += text;\n    // We also want to escape any ampersands so that HTML entities are rendered as-is.\n    filteredText = filteredText.replace(/&/g, \"&amp;\");\n    // Use Marked to parse the text as Markdown.\n    filteredText = marked(filteredText, {\n        mangle: false,\n        headerIds: false,\n        smartLists: true,\n    });\n    // Get rid of any HTML entities that were produced by Marked.\n    filteredText = filteredText\n        .replace(/&lt;/g, \"<\")\n        .replace(/&gt;/g, \">\")\n        .replace(/&#39;/g, \"'\")\n        .replace(/&quot;/g, '\"')\n        .replace(/&amp;/g, \"&\");\n    // Now we go back through and replace instances of \"[code][/code]\" with the corresponding code\n    // block.\n    var codeIndex;\n    while (~(codeIndex = filteredText.lastIndexOf(constants.CODE_DELIMITERS.START + constants.CODE_DELIMITERS.END))) {\n        filteredText =\n            filteredText.substring(0, codeIndex + constants.CODE_DELIMITERS.START.length) +\n                codeBlocks.pop() +\n                filteredText.substring(codeIndex + constants.CODE_DELIMITERS.START.length);\n    }\n    // Sometimes, newlines (\"\\n\") seem to slip in sometimes, even though new lines in text are\n    // *supposed* to be converted to <br>s. We just replace any lingering newlines into \"\" to get rid\n    // of these.\n    filteredText = filteredText.replaceAll(\"\\n\", \"\");\n    // Now, to shorten the text a bit, get rid of any \"[/code][code]\" substrings (i.e., the end of a\n    // [code] block followed immediately by the start of a code block) so that we can just collapse\n    // adjacent [code] blocks.\n    filteredText = filteredText.replaceAll(constants.CODE_DELIMITERS.END + constants.CODE_DELIMITERS.START, \"\");\n    // At this point, we're basically done. ServiceNow likes to limit some textareas to 4000\n    // characters though, which is a problem because expanding something like \"https://example.com\" to\n    // Markdown becomes \"[code]<a href='https://example.com'>https://example.com</a>[/code]\", which is\n    // significantly longer. To make the expanded text as short as possible, we look for any\n    // redundancies that we can remove.\n    // Basically, we want to see where we can add \"[code]\" and \"[/code]\" to create the shortest\n    // strings possible. If we want to make a \"<p>paragraph</p>\" for example, we could write it as\n    // \"[code]<p>[/code]paragraph[code]</p>[/code]\", but an even shorter way to write it would be\n    // \"[code]<p>paragraph</p>[/code]\". But then, what if we wanted to write\n    // \"<p>&ltp&gt;paragraph&lt;/p&gt;</p>\" (i.e., show the literal text \"<p>paragraph</p>\" from\n    // within a <p> element), there are two options:\n    // 1. [code]<p>&lt;p&gt;paragraph&lt;/p&gt;</p>[/code]\n    //    -> Change the inner HTML so it is not interpreted as HTML\n    // 2. [code]<p>[/code]<p>paragraph</p>[code]</p>[/code]\n    //    -> Leave a [code] block so the inner HTML is interpreted as plain text\n    // In this case, 1. is shorter, so we need to figure out where it's most beneficial to add\n    // \"[code]\" and \"[/code]\" blocks.\n    // To do that, we use a dynamic programming approach in which we parse the text into three tokens:\n    // plain, code, and escaped. Code tokens are any characters inside [code] blocks that *must* be\n    // wrapped inside [code] blocks in the output. Escaped characters are HTML characters (\"<\", \">\",\n    // and \"&\"). These characters can be present inside or outside [code] blocks. If outside, we can\n    // leave them as-is (i.e., \"<\", \">\", \"&\"). If inside though, we have to escape them into \"&lt;\",\n    // \"&gt;\" and \"&amp;\" to prevent them from being rendered as actual HTML. Plain tokens are any\n    // other characters that can be present inside a code block or outside and we don't have to escape\n    // them (e.g., plain letter and numbers).\n    // Once we've parsed the text into these tokens, we iterate backwards through these tokens and\n    // keep track of two arrays of penalty values. Both start at 0 and represent the penalty up to\n    // that point if we are inside a [code] block, or outside a code block. When we run into a \"code\"\n    // token, we know our only choice is to be inside a [code] block, so the penalty for NOT being\n    // inside a [code] block will be Infinity. When we run into an \"escaped\" token, the penalty for\n    // being inside the code block will be the extra characters it takes to escape the character\n    // (e.g., the penalty for \"<\" is \"&lt;\".length - \"<\".length = 3). The penalty for being outside a\n    // code block is 0 since we don't have to add any characters, we can just keep the \"<\" exactly as-\n    // is. For \"plain\" tokens, the penalty for both is 0 because we don't have to add any characters\n    // to escape these tokens. When we want to switch from the outside-[code]-block penalty array to\n    // the inside-[code]-block array, we accumulate a penalty of \"[code]\".length because that's how\n    // many characters it would take to switch to inside a [code] block. When we want to switch from\n    // inside a code block to outside, we accumulate a penalty of \"[/code]\".length. Here's an example:\n    // The input \"[code]<p>[/code]<span>text</span>[code]</p>[/code]\" represents a paragraph `<p>`\n    // element with the text \"<span>text & more text</span>\" inside it as plain text. This would be\n    // parsed as:\n    //   {type: \"code\", value: \"<p>\"},\n    //   {type: \"escaped\", value: \"<\"},\n    //   {type: \"plain\", value: \"span\"},\n    //   {type: \"escaped\", value: \">\"},\n    //   {type: \"plain\", value: \"text \"},\n    //   {type: \"escapes\", value: \"&\"},\n    //   {type: \"plain\", value: \" more text\"},\n    //   {type: \"escaped\", value: \"<\"},\n    //   {type: \"plain\", value: \"/span\"},\n    //   {type: \"escaped\", value: \">\"},\n    //   {type: \"code\", value: \"</p>\"}\n    // We will start two penalty arrays:\n    //   inside-[code]: []\n    //   outside-[code]: []\n    // Since we have to end outside of a code block, we have to add a penalty to start with:\n    //   inside-[code]: [\"[/code]\".length] = [7]\n    //   outside-[code]: [0]               = [0]\n    // That keeps track of the final penalty so that we always end outside of a [code] block.\n    // Now we loop backwards and start with the \"</p>\" code token. Since it is inside a [code] block\n    // we have to put a penalty of Infinity for the outside-[code] penalty array (and add a penalty\n    // of 0 for inside-[code] since we don't need to add any characters):\n    //   inside-[code]: [0+7, 7]       = [       7, 7]\n    //   outside-[code]: [Infinity, 0] = [Infinity, 0]\n    // Now for the escaped \">\", we can stay within the [code] block at a penalty of \"&lt;\".length -\n    // \">\".length = 4 - 1 = 3. We can also leave the [code] block, at a cost of \"[code]\".length = 6:\n    //   inside-[code]: [3+7, 7, 7]         = [10,        7, 7]\n    //   outside-[code]: [6+7, Infinity, 0] = [13, Infinity, 0]\n    // A plain \"/span\" token has a penalty of 0 for both:\n    //   inside-[code]: [0+10, 10, 7, 7]        = [10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, Infinity, 0] = [13, 13, Infinity, 0]\n    // Another escaped \"<\" token that has an inside-[code] penalty of 3 and outside-[code] penalty\n    // of 0:\n    //   inside-[code]: [3+10, 10, 10, 7, 7]         = [13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, Infinity, 0] = [13, 13, 13, Infinity, 0]\n    // Another plain token doesn't do much (0 penalty):\n    //   inside-[code]: [0+13, 13, 10, 10, 7, 7]         = [13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, 13, Infinity, 0] = [13, 13, 13, 13, Infinity, 0]\n    // An escaped \"&\" token has an inside-[code] penalty of \"&amp;\".length - \"&\".length = 4.\n    //   inside-[code]: [4+13, 13, 13, 10, 10, 7, 7]         = [17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, 13, 13, Infinity, 0] = [13, 13, 13, 13, 13, Infinity, 0]\n    // Plain token adds 0 to both:\n    //   inside-[code]: [0+17, 17, 13, 13, 10, 10, 7, 7]         = [17, 17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, 13, 13, 13, Infinity, 0] = [13, 13, 13, 13, 13, 13, Infinity, 0]\n    // Another escape \">\" token with an inside-[code] penalty of 3:\n    //   inside-[code]: [3+17, 17, 17, 13, 13, 10, 10, 7, 7]         = [20, 17, 17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, 13, 13, 13, 13, Infinity, 0] = [13, 13, 13, 13, 13, 13, 13, Infinity, 0]\n    // Another plain token:\n    //   inside-[code]: [0+20, 20, 17, 17, 13, 13, 10, 10, 7, 7]         = [20, 20, 17, 17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0] = [13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0]\n    // This time, something new happens. We encounter an escaped \"<\" token, which has an\n    // inside-[code] penalty of 3, which would bring the penalty up to 3 + 20 = 23. The alternative\n    // option is to jump from outside-[code] to inside-[code] at a penalty of \"[/code]\".length plus\n    // whatever the outside-[code] penalty is, which is 13 at this point. \"[/code]\".length + 13 =\n    // 20, which is lower than 23, so we can use that instead:\n    //   inside-[code]: [\"[/code]\".length + 13, 20, 20, 17, 17, 13, 13, 10, 10, 7, 7] = [20, 20, 17, 17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [0+13, 13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0]          = [13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0]\n    // Last token, we have a code token, which has a penalty of Infinity for outside-[code]:\n    //   inside-[code]: [20, 20, 20, 20, 17, 17, 13, 13, 10, 10, 7, 7]               = [      20, 20, 20, 17, 17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [Infinity, 13, 13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0] = [Infinity, 13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0]\n    // To finish, we need to end outside a [code] block, which we can do by adding an infinite\n    // penalty to the inside-[code] array and 0 to the inside-[code] array. Since 0 + Infinity is a\n    // higher penalty than switching from inside-[code] to outside-[code], we instead add\n    // \"[code]\".length + whatever the penalty is for inside-[code] (6 + 26 = 26).\n    //   inside-[code]:  [Infinity,       20, 20, 20, 20, 17, 17, 13, 13, 10, 10,        7, 7]\n    //   outside-[code]: [      26, Infinity, 13, 13, 13, 13, 13, 13, 13, 13, 13, Infinity, 0]\n    // Now we go forwards through these arrays, starting outside of a code block. The first one, we\n    // switched from inside-[code] to outside-[code]. Since we're going forwards instead of backwards,\n    // this corresponds to adding a \"[code]\" to enter inside a [code] block:\n    //   output: \"[code]\"\n    // At the next step, we stay inside the [code] block so we just add the associated value:\n    //   output: \"[code]<p>\"\n    // Next step was where we switched from outside-[code] to inside-[code], which corresponds to\n    // adding \"[/code]\" (since we're going backwards):\n    //   output: \"[code]<p>[/code]\"\n    // Now, we're outside a [code] block and we don't switch for a while:\n    //   output: \"[code]<p>[/code]<\"\n    //   output: \"[code]<p>[/code]<span\"\n    //   output: \"[code]<p>[/code]<span>\"\n    //   output: \"[code]<p>[/code]<span>text \"\n    //   output: \"[code]<p>[/code]<span>text &\"\n    //   output: \"[code]<p>[/code]<span>text & more text\"\n    //   output: \"[code]<p>[/code]<span>text & more text<\"\n    //   output: \"[code]<p>[/code]<span>text & more text</span\"\n    //   output: \"[code]<p>[/code]<span>text & more text</span>\"\n    // Now, this is farther back in the penalty arrays, this is where we switched from inside-[code]\n    // to outside-[code] (when we added the 6+7), so we add a \"[code]\" and switch back into the\n    // inside-[code] penalty array:\n    //   output: \"[code]<p>[/code]<span>text & more text</span>[code]\"\n    // Now we add the code value:\n    //   output: \"[code]<p>[/code]<span>text & more text</span>[code]</p>\"\n    // The last one was where we added the 7 to end of the array to indicate that we should switch\n    // back out to ensure we end outside of a [code] block:\n    //   output: \"[code]<p>[/code]<span>text & more text</span>[code]</p>[/code]\"\n    // In this case, we ended up with exactly the same as the input, but if we had gone with another\n    // example, like \"[code]<p>[/code]<span>text</span>[code]</p>[/code]\", the output would have\n    // been \"[code]<p>&lt;span&gt;text&lt;/span&gt;</p>[/code]\" because the cheapest penalty would\n    // have been to *never* switch out of the inside-[code] block array until the end, so the entire\n    // text would have been inside a [code] block. The alternate, longer one would have been\n    // \"[code]<p>[/code]<span>text</span>[code]</p>[/code]\", which has a length of 50 compared to 49\n    // with the actual optimal solution.\n    /**\n     * textTokens keeps track of the tokens we are going to parse from the text. It starts with a\n     * custom start token that has an infinite penalty for inside-[code] to ensure we start outside of\n     * a [code] block.\n     */\n    var textTokens = [\n        {\n            type: \"start\",\n            insideCodeValue: null,\n            outsideCodeValue: \"\",\n            insideCodePenalty: Infinity,\n            outsideCodePenalty: 0,\n        },\n    ];\n    // Parse out any [code] blocks from the text into \"code\" tokens. We have not parsed out \"escaped\"\n    // tokens just yet.\n    var parsedFilteredText = filteredText;\n    codeIndex = 0;\n    while (~(codeIndex = parsedFilteredText.indexOf(constants.CODE_DELIMITERS.START))) {\n        if (codeIndex !== 0) {\n            textTokens.push({\n                type: \"plain\",\n                insideCodeValue: parsedFilteredText.substring(0, codeIndex),\n                outsideCodeValue: parsedFilteredText.substring(0, codeIndex),\n                insideCodePenalty: 0,\n                outsideCodePenalty: 0,\n            });\n        }\n        parsedFilteredText = parsedFilteredText.substring(codeIndex + constants.CODE_DELIMITERS.START.length);\n        codeIndex = parsedFilteredText.indexOf(constants.CODE_DELIMITERS.END);\n        if (!~codeIndex) {\n            codeIndex = parsedFilteredText.length;\n        }\n        textTokens.push({\n            type: \"code\",\n            insideCodeValue: parsedFilteredText.substring(0, codeIndex),\n            outsideCodeValue: null,\n            insideCodePenalty: 0,\n            outsideCodePenalty: Infinity,\n        });\n        parsedFilteredText = parsedFilteredText.substring(codeIndex + constants.CODE_DELIMITERS.END.length);\n    }\n    if (parsedFilteredText.length) {\n        textTokens.push({\n            type: \"plain\",\n            insideCodeValue: parsedFilteredText,\n            outsideCodeValue: parsedFilteredText,\n            insideCodePenalty: 0,\n            outsideCodePenalty: 0,\n        });\n    }\n    var firstCode = null;\n    // Go through the tokens and look for any code blocks. If we find one, we want to search for any\n    // elements that need to be styled. This is not directly related to the algorithm described\n    // above. This is purely for adding additional styles into the text to ensure <code> elements\n    // and the like are rendered with the proper styles.\n    var stylesToIgnore = new Set(Object.keys(REPLACEMENT_SUBSTYLES));\n    try {\n        for (var textTokens_1 = __values(textTokens), textTokens_1_1 = textTokens_1.next(); !textTokens_1_1.done; textTokens_1_1 = textTokens_1.next()) {\n            var token = textTokens_1_1.value;\n            if (token.type !== \"code\") {\n                continue;\n            }\n            firstCode = firstCode || token;\n            // Do a naive search for HTML elements. Instead of actually parsing the code block as HTML, we\n            // just search for opening HTML tags like \"<div>\" (but without the closing \">\" since it could\n            // also be \"<div attr=\"val\">\"). This can result in some false positives, for example if the text\n            // contains just \"not actually a <div element\", which would be rendered as plain text without\n            // any actual <div> elements. The likelihood of this is very low unless they intentionally add\n            // something like that, and even then, a false positive just adds a small amount of characters\n            // to the overall text, so it doesn't matter that much.\n            var value = token.insideCodeValue.toLowerCase();\n            try {\n                for (var stylesToIgnore_1 = (e_6 = void 0, __values(stylesToIgnore)), stylesToIgnore_1_1 = stylesToIgnore_1.next(); !stylesToIgnore_1_1.done; stylesToIgnore_1_1 = stylesToIgnore_1.next()) {\n                    var elemName = stylesToIgnore_1_1.value;\n                    if (value.includes(\"<\" + elemName.toLowerCase())) {\n                        // Remove this element name from the list of styles to ignore.\n                        stylesToIgnore.delete(elemName);\n                    }\n                }\n            }\n            catch (e_6_1) { e_6 = { error: e_6_1 }; }\n            finally {\n                try {\n                    if (stylesToIgnore_1_1 && !stylesToIgnore_1_1.done && (_b = stylesToIgnore_1.return)) _b.call(stylesToIgnore_1);\n                }\n                finally { if (e_6) throw e_6.error; }\n            }\n            if (stylesToIgnore.size === 0)\n                break;\n        }\n    }\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\n    finally {\n        try {\n            if (textTokens_1_1 && !textTokens_1_1.done && (_a = textTokens_1.return)) _a.call(textTokens_1);\n        }\n        finally { if (e_5) throw e_5.error; }\n    }\n    // Add the appropriate styles to stylesheetText.\n    var stylesheetText = \"\";\n    for (var elemName in REPLACEMENT_SUBSTYLES) {\n        if (stylesToIgnore.has(elemName))\n            continue;\n        stylesheetText +=\n            REPLACEMENT_SUBSTYLES[elemName];\n    }\n    // Insert the stylesheet inside the first [code] block. If there are no [code] blocks, it's okay\n    // because in that case we don't have any elements to style in the first place and\n    // stylesheetText will be empty.\n    if (firstCode && stylesheetText) {\n        firstCode.insideCodeValue =\n            \"<style>\".concat(stylesheetText, \"</style>\") + firstCode.insideCodeValue;\n    }\n    // Back to the algorithm: look through our current plain tokens and parse out any HTML characters\n    // that need to be escaped (\"<\", \">\", and \"&\") and insert these back in as \"escaped\" tokens.\n    for (var i = 0; i < textTokens.length - 1; i++) {\n        var token = textTokens[i];\n        if (token.type === \"plain\") {\n            var firstIndex = Math.min(turnNoIndexInto(Infinity, token.outsideCodeValue.indexOf(\"<\")), turnNoIndexInto(Infinity, token.outsideCodeValue.indexOf(\">\")), turnNoIndexInto(Infinity, token.outsideCodeValue.indexOf(\"&\")));\n            if (!isFinite(firstIndex)) {\n                continue;\n            }\n            var trailingText = token.outsideCodeValue.substring(firstIndex);\n            textTokens[i].outsideCodeValue = token.outsideCodeValue.substring(0, firstIndex);\n            textTokens[i].insideCodeValue = token.outsideCodeValue.substring(0, firstIndex);\n            var translated = {\n                \">\": \"&gt;\",\n                \"<\": \"&lt;\",\n                \"&\": \"&amp;\",\n            }[trailingText[0]];\n            textTokens.splice(i + 1, 0, {\n                type: \"escaped\",\n                insideCodeValue: translated,\n                outsideCodeValue: trailingText[0],\n                insideCodePenalty: translated.length - 1,\n                outsideCodePenalty: 0,\n            }, {\n                type: \"plain\",\n                insideCodeValue: trailingText.substring(1),\n                outsideCodeValue: trailingText.substring(1),\n                insideCodePenalty: 0,\n                outsideCodePenalty: 0,\n            });\n            i++;\n        }\n    }\n    // Start the inside-[code] and outside-[code] penalty arrays.\n    var insideCodePenalties = new Array(textTokens.length + 1);\n    var outsideCodePenalties = new Array(textTokens.length + 1);\n    // Each entry in the penalty array will be a 2-long array where the first item is the numerical\n    // penalty up to that point, and the second is a boolean indicating whether we are switching into\n    // the other array at that point. Here, we add Infinity to inside-[code] to ensure we end outside\n    // of a [code] block. The second item (the boolean) doesn't apply here since it's the end of the\n    // array, so we just have null.\n    insideCodePenalties[textTokens.length] = [Infinity, null];\n    outsideCodePenalties[textTokens.length] = [0, null];\n    // Now fill out the array backwards to forwards with the appropriate penalty values and keep track\n    // of when we switch between arrays.\n    for (var i = textTokens.length - 1; i >= 0; i--) {\n        var insideStayPenalty = insideCodePenalties[i + 1][0] + textTokens[i].insideCodePenalty + 0;\n        var insideTransitionPenalty = outsideCodePenalties[i + 1][0] +\n            textTokens[i].insideCodePenalty +\n            constants.CODE_DELIMITERS.END.length;\n        var outsideStayPenalty = outsideCodePenalties[i + 1][0] + textTokens[i].outsideCodePenalty + 0;\n        var outsideTransitionPenalty = insideCodePenalties[i + 1][0] +\n            textTokens[i].outsideCodePenalty +\n            constants.CODE_DELIMITERS.START.length;\n        // The \"<=\" instead of \"<\" for the inside-[code] penalty array ensures we stay *outside* of a\n        // [code] block when the penalties are the same since there's no extra penalty gain, and it\n        // means less text we have to parse into HTML later.\n        insideCodePenalties[i] = [\n            Math.min(insideTransitionPenalty, insideStayPenalty),\n            insideTransitionPenalty <= insideStayPenalty,\n        ];\n        outsideCodePenalties[i] = [\n            Math.min(outsideTransitionPenalty, outsideStayPenalty),\n            outsideTransitionPenalty < outsideStayPenalty,\n        ];\n    }\n    // Now we've built out both penalty arrays and all that's left is to go forwards through them and\n    // build out the shortened string.\n    var shortenedText = \"\";\n    // Start outside of a code block by setting to false to being with.\n    var isInsideCodeBlock = false;\n    for (var i = 0; i < textTokens.length; i++) {\n        // Add the appropriate token value depending on whether we are currently inside or outside a\n        // [code] block (i.e., a \"<\" will be added as \"<\" outside a [code] block and as \"&lt;\" inside a\n        // [code] block).\n        shortenedText += isInsideCodeBlock\n            ? textTokens[i].insideCodeValue\n            : textTokens[i].outsideCodeValue;\n        // Determine whether we are switching from one array to the other.\n        if ((isInsideCodeBlock ? insideCodePenalties[i] : outsideCodePenalties[i])[1]) {\n            isInsideCodeBlock = !isInsideCodeBlock;\n            // Add [code] or [/code] depending on whether we are switching in or out of a [code] block.\n            shortenedText += isInsideCodeBlock\n                ? constants.CODE_DELIMITERS.START\n                : constants.CODE_DELIMITERS.END;\n        }\n    }\n    return shortenedText;\n};\nvar addPreviewButton = function () {\n    addToSubBar(function (textarea) {\n        // Only the Comments and Work Notes textareas should have a Preview button since only those have\n        // their text parsed as Markdown.\n        var type = getTextAreaType(textarea);\n        if (type !== TextAreaType.Comments && type !== TextAreaType.WorkNotes)\n            return null;\n        var previewBtn = makeElement(\"button\", {\n            type: \"button\",\n            className: \"\".concat(constants.EXTENSION_PREFIX, \"-markdown-previewer-btn btn btn-default\"),\n        }, \"Preview\");\n        previewBtn.addEventListener(\"click\", function () {\n            var data = getTextAreaData(textarea);\n            if (!data)\n                return;\n            var newValue = !data.isPreviewingMarkdown;\n            changeTextAreaMarkdownPreviewerVisibility(textarea, newValue);\n        });\n        return previewBtn;\n    });\n};\nvar init = function (config) {\n    if (hasInitialized)\n        return;\n    hasInitialized = true;\n    if (!config.enabled.servicenow.markdown)\n        return;\n    configureMarked();\n    duplicateSaveButtons();\n    configureTextAreaData();\n    addPreviewButton();\n    // Make the Preview button looked like it is beng pressed down when the previewer is active.\n    interceptStyles(\".btn-default:active\", \".\".concat(constants.EXTENSION_PREFIX, \"-markdown-previewer-btn.\").concat(constants.EXTENSION_PREFIX, \"-is-previewing-markdown\"));\n};\nexport default init;\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { addTextAreaCallback, addTextAreaData, calculateTextPosition, getTextAreaData, getTextAreaType, resolveReplacements, setTextAreaTooltip, writeToTextArea, } from \"../helpers\";\nimport constants from \"../constants.json\";\nvar checkForAutoComplete = function (textarea, config) {\n    var _a, _b, _c, _d;\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    if (data.closedAutoComplete ||\n        textarea.value !== \"\" ||\n        document.activeElement !== textarea) {\n        textarea.style.height = (_a = data.previousHeight) !== null && _a !== void 0 ? _a : textarea.style.height;\n        data.closedAutoComplete = false;\n        data.isAutoCompleting = false;\n        data.activeAutoComplete = null;\n        textarea.placeholder = (_b = data.previousPlaceholder) !== null && _b !== void 0 ? _b : \"\";\n        textarea.removeAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-is-auto-completing\"));\n        setTextAreaTooltip(textarea, null);\n    }\n    else {\n        // We *should* be showing auto complete for this textarea.\n        var type = getTextAreaType(textarea);\n        if (type == null)\n            return;\n        var autoComplete = config.autoCompletes[type];\n        if (!autoComplete)\n            return;\n        data.isAutoCompleting = true;\n        data.activeAutoComplete = autoComplete;\n        (_c = data.previousPlaceholder) !== null && _c !== void 0 ? _c : (data.previousPlaceholder = textarea.placeholder);\n        (_d = data.previousHeight) !== null && _d !== void 0 ? _d : (data.previousHeight = textarea.style.height);\n        // Resolve any {{replacements}} so the person sees the actual replacement text, not a bunch of\n        // {{}}s.\n        var _e = __read(resolveReplacements(autoComplete), 1), resolvedAutoComplete = _e[0];\n        textarea.placeholder = resolvedAutoComplete;\n        var top_1 = calculateTextPosition(textarea, resolvedAutoComplete).top;\n        var newHeight = top_1 +\n            parseFloat(data.elementStyles.borderTopWidth) +\n            parseFloat(data.elementStyles.borderBottomWidth) +\n            parseFloat(data.elementStyles.paddingTop) +\n            parseFloat(data.elementStyles.paddingBottom);\n        textarea.style.height = \"\".concat(newHeight, \"px\");\n        textarea.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-is-auto-completing\"), \"true\");\n        setTextAreaTooltip(textarea, \"Press <kbd>Enter</kbd> to accept.\", function () {\n            data.closedAutoComplete = true;\n            checkForAutoComplete(textarea, config);\n        });\n    }\n};\nvar acceptAutoComplete = function (textarea, config) {\n    var data = getTextAreaData(textarea);\n    if (!data || !data.isAutoCompleting || data.activeAutoComplete == null)\n        return;\n    writeToTextArea(textarea, data.activeAutoComplete);\n    checkForAutoComplete(textarea, config);\n};\nvar init = function (config) {\n    if (!config.enabled.servicenow.autocomplete)\n        return;\n    addTextAreaData(function () { return ({\n        isAutoCompleting: false,\n    }); });\n    addTextAreaCallback(function (textarea) {\n        var cb = function () { return checkForAutoComplete(textarea, config); };\n        textarea.addEventListener(\"focus\", cb);\n        textarea.addEventListener(\"blur\", function () {\n            var data = getTextAreaData(textarea);\n            if ((data === null || data === void 0 ? void 0 : data.previousHeight) != null)\n                textarea.style.height = data.previousHeight;\n            cb();\n        });\n        textarea.addEventListener(\"input\", function () {\n            var data = getTextAreaData(textarea);\n            if (data)\n                data.previousHeight = null;\n            cb();\n        });\n        textarea.addEventListener(\"keypress\", function (e) {\n            if (e.key !== \"Enter\")\n                return;\n            var data = getTextAreaData(textarea);\n            if (!data || !data.isAutoCompleting)\n                return;\n            e.preventDefault();\n            acceptAutoComplete(textarea, config);\n        });\n    });\n};\nexport default init;\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      \n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = (element) => {\n                  var clones = [];\n                  // Add a clone of the element to every parent window (but not the current one\n                  // since the original `element` goes there).\n                  for (\n                    var currWindow = window.parent;\n                    currWindow !== window;\n                    currWindow = currWindow.parent\n                  ) {\n                    var clone = element.cloneNode(true);\n                    clones.push(clone);\n                    currWindow.document.head.appendChild(clone);\n                    if (currWindow.parent === currWindow) break;\n                  }\n                  // Update the clones every time the original changes.\n                  if (typeof window.MutationObserver !== \"undefined\") {\n                    new MutationObserver(function () {\n                      for (var i = 0; i < clones.length; i++) {\n                        clones[i].textContent = element.textContent;\n                      }\n                    }).observe(element, {\n                      childList: true,\n                      subtree: true,\n                      characterData: true,\n                    });\n                  }\n                  window.document.head.appendChild(element);\n                };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { addTextAreaCallback, addTextAreaData, calculateTextPosition, escapeHTML, getTextAreaData, isInstance, makeElement, turnNoIndexInto, writeToTextArea, } from \"../helpers\";\nimport constants from \"../constants.json\";\nimport { namespaces, replacementByTrigger, replacements } from \"./data\";\nimport \"./styles.scss\";\n/**\n * Gives a textarea, returns the trigger name the user is currently typing out. An incomplete\n * trigger name is the text from the user's current selection to the start replacement delimiter\n * that precedes it. If the user is not currently typing out a trigger name, this function returns\n * null.\n *\n * As an example, if the user has typed out `\"this is a {{test\"`, the incomplete trigger name will\n * be `\"test\"` since it is the start of a potential trigger, but is not yet complete (since it\n * doesn't have a closing replacement delimiter yet).\n *\n * @param textarea The textarea to get the incomplete trigger name from.\n * @returns The incomplete trigger name the user is in the process of typing, or null if there is\n *        none.\n */\nvar getIncompleteTriggerName = function (textarea) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return null;\n    // If there are less characters in the textarea than there are characters in\n    // constants.REPLACEMENT_DELIMITERS.START, there's no way that our caret is positioned after a\n    // start delimiter.\n    if (data.element.selectionStart < constants.REPLACEMENT_DELIMITERS.START.length) {\n        return null;\n    }\n    // Determine if our caret is positioned after a starting delimiter, but not if there is an end-\n    // ing delimiter that closes it.\n    var startDelimIndex = data.element.value.lastIndexOf(constants.REPLACEMENT_DELIMITERS.START, data.element.selectionStart - constants.REPLACEMENT_DELIMITERS.START.length);\n    var endDelimIndex = data.element.value.lastIndexOf(constants.REPLACEMENT_DELIMITERS.END, data.element.selectionStart - 1);\n    if (!~startDelimIndex ||\n        (~endDelimIndex && startDelimIndex < endDelimIndex)) {\n        return null;\n    }\n    // If there is a newline character between the start delimiter and our cursor, we don't want to\n    // show the auto filler because more than likely, the user will still want to use the up and\n    // down arrow keys to move the caret instead of scrolling through the auto filler menu.\n    var newLineIndex = data.element.value.indexOf(\"\\n\", startDelimIndex);\n    if (~newLineIndex && newLineIndex < data.element.selectionStart) {\n        return null;\n    }\n    // Return the text from the starting delimiter up to the caret.\n    return data.element.value.substring(startDelimIndex + constants.REPLACEMENT_DELIMITERS.START.length, data.element.selectionStart);\n};\n/**\n * Updates the position and content of a textarea's auto-filler. As the user types, the auto-filler\n * may need to change position and/or content, so calling this will do both of those.\n * @param textarea The textarea to update the auto-filler for.\n */\nvar updateAutoFiller = function (textarea) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    var incompleteTriggerName = getIncompleteTriggerName(textarea);\n    // If we are not currently typing out a macro, we can hide the autoFiller and return.\n    if (incompleteTriggerName === null || document.activeElement !== textarea) {\n        data.replacementAutoFiller.style.display = \"none\";\n        data.isReplacing = false;\n        data.replacementAutoFillerFocusedIndex = null;\n        return;\n    }\n    if (!data.isReplacing) {\n        // Otherwise, we want to show the autoFiller and calculate where to show it.\n        data.replacementAutoFiller.style.display = \"block\";\n        data.isReplacing = true;\n    }\n    // Copy the textarea's content to the mirror. We first paste all the text up to the starting\n    // delimiter. Then, we insert a <span> with the start delimiter, as well as the word that\n    // follows it (i.e., everything up to the next space). Then we calculate the vertical and\n    // horizontal position of the span to determine where to place the replacementAutoFiller box.\n    // Calculate the positions of the auto filler box by determining where the cursor is currently\n    // positioned.\n    var startDelimIndex = textarea.value.lastIndexOf(constants.REPLACEMENT_DELIMITERS.START, textarea.selectionStart - constants.REPLACEMENT_DELIMITERS.START.length);\n    var whiteSpaceIndex = Math.min(turnNoIndexInto(textarea.value.length, textarea.value.indexOf(\" \", startDelimIndex)), turnNoIndexInto(textarea.value.length, textarea.value.indexOf(\"\\n\", startDelimIndex)), turnNoIndexInto(textarea.value.length, textarea.value.indexOf(\"\\t\", startDelimIndex)));\n    var caretPosition = calculateTextPosition(textarea, textarea.value.substring(0, startDelimIndex), textarea.value.substring(startDelimIndex, whiteSpaceIndex));\n    // Now we can position the replacementAutoFiller directly underneath the opening delimiter.\n    data.replacementAutoFiller.style.left =\n        Math.min(caretPosition.left, parseFloat(data.mirror.style.width) - 260) +\n            parseFloat(data.elementStyles.paddingLeft) +\n            parseFloat(data.elementStyles.borderLeftWidth) +\n            textarea.offsetLeft -\n            textarea.scrollLeft +\n            \"px\";\n    data.replacementAutoFiller.style.top =\n        caretPosition.top +\n            parseFloat(data.elementStyles.paddingTop) +\n            parseFloat(data.elementStyles.borderTopWidth) +\n            textarea.offsetTop -\n            textarea.scrollTop +\n            \"px\";\n    // Set the replacementAutoFiller's artificial focus index to 0 (the first item in the list).\n    data.replacementAutoFillerFocusedIndex = 0;\n    populateAutoFiller(textarea, incompleteTriggerName);\n};\n/**\n * Populates a textarea's auto-filler with the appropriate replacements according to their current\n * search query. For example, if the user has entered \"link.\", only replacements withing the \"Links\"\n * namespace will be shown in the auto-filler.\n * @param textarea The textarea we want to populate the auto-filler for.\n * @param incompleteTriggerName The text that user has typed in for filtering search results.\n */\nvar populateAutoFiller = function (textarea, incompleteTriggerName) {\n    var e_1, _a, _b, e_2, _c, e_3, _d, e_4, _e, e_5, _f, _g;\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    incompleteTriggerName = incompleteTriggerName.trim().toLowerCase();\n    // Make a fragment where we will add all the results.\n    var fragment = document.createDocumentFragment();\n    // If there is no incomplete trigger name yet (i.e., we haven't typed anything yet), we want to\n    // show the list of namespaces instead of filtering results.\n    if (incompleteTriggerName.replace(/[^a-zA-Z\\d]+/g, \"\") === \"\") {\n        try {\n            for (var namespaces_1 = __values(namespaces), namespaces_1_1 = namespaces_1.next(); !namespaces_1_1.done; namespaces_1_1 = namespaces_1.next()) {\n                var namespace_object = namespaces_1_1.value;\n                // Each namespace gets its own <li>.\n                var li = makeElement(\"li\", (_b = {},\n                    _b[\"data-\".concat(constants.EXTENSION_PREFIX, \"-autofill-type\")] = \"namespace\",\n                    _b[\"data-\".concat(constants.EXTENSION_PREFIX, \"-insertion-text\")] = namespace_object.insert,\n                    _b[\"data-\".concat(constants.EXTENSION_PREFIX, \"-append-end-delimiter\")] = \"false\",\n                    _b), \"\\n          <div class=\\\"sn-card-component_accent-bar\\\"></div>\\n          <i class=\\\"icon-\".concat(namespace_object.icon, \"\\\"></i>\\n          <strong>\").concat(escapeHTML(namespace_object.name) || '\"\"', \"</strong>\\n          <i class=\\\"icon-arrow-right-rounded\\\"></i>\\n        \"));\n                configureListItem(li, textarea);\n                fragment.appendChild(li);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (namespaces_1_1 && !namespaces_1_1.done && (_a = namespaces_1.return)) _a.call(namespaces_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    }\n    else {\n        // Otherwise, we can treat the text as a search query and look for replacements that match.\n        // Treat the trigger name as a search query.\n        var searchQuery = incompleteTriggerName;\n        // Get a list of replacements that we are going to search through.\n        var searchableReplacements = Object.keys(replacementByTrigger);\n        var triggerSubstringIndex_1 = 0;\n        // Check if our search query has a namespace. If it does, filter out any macros that do not\n        // fall into that namespace.\n        var periodIndex = incompleteTriggerName.indexOf(\".\");\n        if (~periodIndex) {\n            var namespace_1 = incompleteTriggerName.substring(0, periodIndex + 1);\n            var matchingNamespace_1 = namespaces.filter(function (namespaceObject) { return namespace_1 === namespaceObject.insert; });\n            if (matchingNamespace_1.length === 1) {\n                searchableReplacements = searchableReplacements.filter(function (trigger) {\n                    return trigger.startsWith(matchingNamespace_1[0].insert);\n                });\n                searchQuery = incompleteTriggerName.substring(periodIndex + 1);\n                triggerSubstringIndex_1 = periodIndex + 1;\n            }\n        }\n        // Only show words that match each word of the search query.\n        var searchWords = searchQuery.split(/[^a-zA-Z\\d]+/);\n        var _loop_1 = function (word) {\n            searchableReplacements = searchableReplacements.filter(function (trigger) {\n                return trigger.substring(triggerSubstringIndex_1).includes(word);\n            });\n        };\n        try {\n            for (var searchWords_1 = __values(searchWords), searchWords_1_1 = searchWords_1.next(); !searchWords_1_1.done; searchWords_1_1 = searchWords_1.next()) {\n                var word = searchWords_1_1.value;\n                _loop_1(word);\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (searchWords_1_1 && !searchWords_1_1.done && (_c = searchWords_1.return)) _c.call(searchWords_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        // Now we have a list of triggers that correspond to a different replacement. Some triggers\n        // may correspond to the same replacement, so we need to filter them out. We do this by\n        // making a Map where each key is the replacement, and each key is the index of its\n        // .triggers array that corresponds to the trigger we searched for. We want to keep the\n        // earliest trigger in the list.\n        var replacementTriggerIndices = new Map();\n        try {\n            for (var searchableReplacements_1 = __values(searchableReplacements), searchableReplacements_1_1 = searchableReplacements_1.next(); !searchableReplacements_1_1.done; searchableReplacements_1_1 = searchableReplacements_1.next()) {\n                var trigger = searchableReplacements_1_1.value;\n                var replacement = replacementByTrigger[trigger];\n                if (replacementTriggerIndices.has(replacement)) {\n                    var prevIndex = replacementTriggerIndices.get(replacement);\n                    var newIndex = replacement.triggers.indexOf(trigger);\n                    if (newIndex < prevIndex) {\n                        replacementTriggerIndices.set(replacement, newIndex);\n                    }\n                }\n                else {\n                    replacementTriggerIndices.set(replacement, replacement.triggers.indexOf(trigger));\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (searchableReplacements_1_1 && !searchableReplacements_1_1.done && (_d = searchableReplacements_1.return)) _d.call(searchableReplacements_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        // Sort the filtered replacements according to the order they show up in in\n        // REPLACEMENTS.\n        var orderedReplacements = [];\n        try {\n            for (var replacements_1 = __values(replacements), replacements_1_1 = replacements_1.next(); !replacements_1_1.done; replacements_1_1 = replacements_1.next()) {\n                var replacement = replacements_1_1.value;\n                if (replacementTriggerIndices.has(replacement)) {\n                    orderedReplacements.push(replacement);\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (replacements_1_1 && !replacements_1_1.done && (_e = replacements_1.return)) _e.call(replacements_1);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        try {\n            // Now we can make the <li>s for each of the search results.\n            for (var orderedReplacements_1 = __values(orderedReplacements), orderedReplacements_1_1 = orderedReplacements_1.next(); !orderedReplacements_1_1.done; orderedReplacements_1_1 = orderedReplacements_1.next()) {\n                var replacement = orderedReplacements_1_1.value;\n                // Each replacement gets its own <li>.\n                var li = makeElement(\"li\", (_g = {},\n                    _g[\"data-\".concat(constants.EXTENSION_PREFIX, \"-autofill-type\")] = \"replacement\",\n                    _g[\"data-\".concat(constants.EXTENSION_PREFIX, \"-insertion-text\")] = replacement.triggers[replacementTriggerIndices.get(replacement)],\n                    _g[\"data-\".concat(constants.EXTENSION_PREFIX, \"-append-end-delimiter\")] = \"true\",\n                    _g), \"\\n          <div class=\\\"sn-card-component_accent-bar\\\"></div>\\n            <div>\\n              <strong>\".concat(constants.REPLACEMENT_DELIMITERS.START).concat(escapeHTML(replacement.triggers[replacementTriggerIndices.get(replacement)]) || \"\").concat(constants.REPLACEMENT_DELIMITERS.END, \"</strong>\\n              <small>\").concat(replacement.description, \"</small>\\n          </div>\\n          <i class=\\\"icon-chevron-right\\\"></i>\\n        \"));\n                configureListItem(li, textarea);\n                fragment.appendChild(li);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (orderedReplacements_1_1 && !orderedReplacements_1_1.done && (_f = orderedReplacements_1.return)) _f.call(orderedReplacements_1);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    }\n    // If the auto filler is empty, we want to hide it completely.\n    if (fragment.children.length === 0) {\n        data.replacementAutoFiller.style.display = \"none\";\n        data.isReplacing = false;\n        data.replacementAutoFillerFocusedIndex = null;\n        return;\n    }\n    data.replacementAutoFillerFocusedIndex = 0;\n    // Replace the content of the autoFiller with the new items.\n    data.replacementAutoFiller.innerText = \"\";\n    data.replacementAutoFiller.appendChild(fragment);\n    focusAutoFillItem(textarea);\n};\n/**\n * Adds the appropriate event listeners to a `<li>` element being added into a textarea's\n * auto-filler. This makes the `<li>` act like a button as well as an item in a list that can be\n * focused or pass focus onto another item in the list.\n * @param li The HTMLLIElement to configure.\n * @param textarea The textarea this `<li>` is being added to.\n */\nvar configureListItem = function (li, textarea) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    // Make the `<li>` focus-able like a button.\n    li.tabIndex = 0;\n    li.setAttribute(\"role\", \"button\");\n    // Add a click listener to make it insert the text.\n    li.addEventListener(\"click\", function (e) { return selectAutoFillerItem(e, textarea); });\n    // Also add a keydown listener for Enter and Spacebar to activate the click listener like how a\n    // button would.\n    li.addEventListener(\"keydown\", function (e) {\n        if (e.code === \"Enter\" || e.code === \"Space\")\n            selectAutoFillerItem(e, textarea);\n    });\n    // Add a hover-in listener for marking the item as being hovered.\n    li.addEventListener(\"mouseenter\", function () {\n        li.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-hovering\"), \"true\");\n        li.firstElementChild.classList.add(\"sn-card-component_accent-bar_dark\");\n    });\n    // Hover-out listener to un-highlight the item.\n    li.addEventListener(\"mouseleave\", function () {\n        li.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-hovering\"), \"false\");\n        if (li.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-focusing\")) !==\n            \"true\" &&\n            li.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-artificial-focusing\")) !== \"true\") {\n            li.firstElementChild.classList.remove(\"sn-card-component_accent-bar_dark\");\n        }\n    });\n    // Focusing on the item is treated the same same as hovering in.\n    li.addEventListener(\"focus\", function () {\n        li.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-focusing\"), \"true\");\n        li.firstElementChild.classList.add(\"sn-card-component_accent-bar_dark\");\n        // Also update the focusedIndex we have saved to match.\n        data.replacementAutoFillerFocusedIndex = Array.from(li.parentNode.children).indexOf(li);\n        focusAutoFillItem(textarea);\n    });\n    // Blurring the item is the same as hovering out.\n    li.addEventListener(\"blur\", function () {\n        li.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-focusing\"), \"false\");\n        if (li.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-hovering\")) !==\n            \"true\" &&\n            li.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-artificial-focusing\")) !== \"true\") {\n            li.firstElementChild.classList.remove(\"sn-card-component_accent-bar_dark\");\n        }\n    });\n};\n/**\n * Focuses a textarea's currently selected item in the auto-filler. The index to focus is determined\n * by the textarea's data object's `replacementAutoFillerFocusedIndex` property.\n * @param textarea The textarea we want to change the auto-filler focused item on.\n */\nvar focusAutoFillItem = function (textarea) {\n    var e_6, _a;\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    var options = data.replacementAutoFiller.children;\n    if (options.length === 0) {\n        data.replacementAutoFiller.style.display = \"none\";\n        data.isReplacing = false;\n        data.replacementAutoFillerFocusedIndex = null;\n        return;\n    }\n    if (data.replacementAutoFillerFocusedIndex < 0) {\n        data.replacementAutoFillerFocusedIndex = 0;\n    }\n    else if (data.replacementAutoFillerFocusedIndex >= options.length) {\n        data.replacementAutoFillerFocusedIndex = options.length - 1;\n    }\n    var index = data.replacementAutoFillerFocusedIndex;\n    try {\n        // Look for any children that were previously being focused.\n        for (var _b = __values(Array.from(data.replacementAutoFiller.children)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var li = _c.value;\n            li.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-artificial-focusing\"), \"false\");\n            if (li.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-hovering\")) !==\n                \"true\" &&\n                li.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-focusing\")) !== \"true\") {\n                li.firstElementChild.classList.remove(\"sn-card-component_accent-bar_dark\");\n            }\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    var focusedItem = options[index];\n    focusedItem.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-artificial-focusing\"), \"true\");\n    focusedItem.firstElementChild.classList.add(\"sn-card-component_accent-bar_dark\");\n    // Scroll it into view to appear as if it is focused.\n    if (typeof focusedItem.scrollIntoViewIfNeeded == \"function\") {\n        focusedItem.scrollIntoViewIfNeeded();\n    }\n};\n/**\n * Inserts the currently selected autocomplete item into the specified textarea. The textarea's text\n * will be updated to have the replaced value and the caret position may change.\n * @param e The Event that triggered the selection.\n * @param textarea The textarea we are inserting text into via the auto-filler.\n */\nvar selectAutoFillerItem = function (e, textarea) {\n    var data = getTextAreaData(textarea);\n    var item = e.currentTarget;\n    if (!data || !item)\n        return;\n    var name = item.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-insertion-text\"));\n    if (!name)\n        return;\n    var previousStartDelimIndex = textarea.value.lastIndexOf(constants.REPLACEMENT_DELIMITERS.START, data.element.selectionStart - constants.REPLACEMENT_DELIMITERS.START.length);\n    var nextStartDelimIndex = data.element.value.indexOf(constants.REPLACEMENT_DELIMITERS.START, data.element.selectionStart);\n    var nextEndDelimIndex = data.element.value.indexOf(constants.REPLACEMENT_DELIMITERS.END, data.element.selectionStart);\n    var newValue;\n    var newCaretPos;\n    if (~nextEndDelimIndex &&\n        (!~nextStartDelimIndex || nextEndDelimIndex > nextStartDelimIndex)) {\n        // If there is a closing delimiter after the current selection, and it is not the closing\n        // delimiter for another opening delimiter, we can replace up to that point.\n        newValue =\n            data.element.value.substring(0, previousStartDelimIndex + constants.REPLACEMENT_DELIMITERS.START.length) +\n                name +\n                data.element.value.substring(nextEndDelimIndex);\n        newCaretPos =\n            previousStartDelimIndex +\n                constants.REPLACEMENT_DELIMITERS.START.length +\n                name.length +\n                constants.REPLACEMENT_DELIMITERS.END.length;\n    }\n    else {\n        // Otherwise, we just want to replace from the start delimiter up to the caret, and insert\n        // the closing delimiter ourself.\n        var insertClosing = item.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-append-end-delimiter\")) === \"true\";\n        newValue =\n            data.element.value.substring(0, previousStartDelimIndex + constants.REPLACEMENT_DELIMITERS.START.length) +\n                name +\n                (insertClosing ? constants.REPLACEMENT_DELIMITERS.END : \"\") +\n                data.element.value.substring(Math.max(data.element.selectionStart, data.element.selectionEnd));\n        newCaretPos =\n            previousStartDelimIndex +\n                constants.REPLACEMENT_DELIMITERS.START.length +\n                name.length +\n                (insertClosing ? constants.REPLACEMENT_DELIMITERS.END.length : 0);\n    }\n    writeToTextArea(textarea, newValue, [newCaretPos, newCaretPos]);\n};\nvar init = function (config) {\n    addTextAreaData(function (textarea) {\n        var replacementAutoFiller = makeElement(\"ul\", {\n            className: \"\".concat(constants.EXTENSION_PREFIX, \"-auto-filler h-card dropdown-menu\"),\n            style: \"display: none;\",\n        });\n        if (textarea.parentNode) {\n            textarea.parentNode.appendChild(replacementAutoFiller);\n        }\n        return {\n            replacementAutoFiller: replacementAutoFiller,\n            isReplacing: false,\n            replacementAutoFillerFocusedIndex: null,\n        };\n    });\n    addTextAreaCallback(function (textarea) {\n        textarea.addEventListener(\"keydown\", function (e) {\n            var data = getTextAreaData(textarea);\n            if (!data)\n                return;\n            if (data.isReplacing) {\n                if (e.code === \"ArrowDown\") {\n                    data.replacementAutoFillerFocusedIndex++;\n                    focusAutoFillItem(textarea);\n                    e.preventDefault();\n                }\n                else if (e.code === \"ArrowUp\") {\n                    data.replacementAutoFillerFocusedIndex--;\n                    focusAutoFillItem(textarea);\n                    e.preventDefault();\n                }\n                else if (e.code === \"Enter\" || e.code === \"Tab\") {\n                    var focusedItem = data.replacementAutoFiller.children[data.replacementAutoFillerFocusedIndex];\n                    focusedItem.click();\n                    e.preventDefault();\n                }\n            }\n        });\n        if (textarea.parentNode) {\n            textarea.parentNode.addEventListener(\"focusout\", function (e) {\n                if (e.relatedTarget == null ||\n                    e.currentTarget == null ||\n                    (isInstance(e.relatedTarget, HTMLElement) &&\n                        !e.currentTarget.contains(e.relatedTarget))) {\n                    updateAutoFiller(textarea);\n                }\n            });\n        }\n    });\n    document.addEventListener(\"input\", function (e) {\n        if (!isInstance(e.target, HTMLTextAreaElement))\n            return;\n        var data = getTextAreaData(e.target);\n        if (!data)\n            return;\n        updateAutoFiller(e.target);\n        // Don't re-write to the textarea if we are suppressing input.\n        if (data.suppressInputs)\n            return;\n        // Write the same data to the textarea. This will take care of resolving replacements and\n        // handling caret positioning. If the textarea does not need to be changed, nothing will happen.\n        writeToTextArea(e.target, e.target.value);\n    });\n};\nexport default init;\n","import { withReplacementDelimiters } from \"../helpers\";\nimport { AssignmentGroup, TicketState } from \"./types\";\nexport var macros = [\n    {\n        name: \"Request MAC Address\",\n        description: \"Ask user to provide the MAC address for the device in question.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        Could you please provide the hardware address (also known as a MAC address) for this device? Here are instructions on how to find it: \").concat(withReplacementDelimiters(\"link.mac_address\"), \".\\n\\n        With this information we'll be able to look into your issue further.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Wireless Trouble\",\n        description: \"Gives the user instructions for troubleshooting Wi-Fi.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        Thank you for reporting your trouble with the wireless network connectivity on the Stanford campus. There are some easy steps to take that resolve wireless network issues for most registered devices on campus:\\n\\n        1. Ensure you have the private address feature disabled on your device. You can find instructions for doing this here: \").concat(withReplacementDelimiters(\"link.disable_private_address\"), \".\\n        2. Forget/remove \\\"Stanford Visitor\\\" and \\\"eduroam\\\" wireless networks from your device. Connect only to the \\\"Stanford\\\" wireless network. You can find instructions for forgetting a Wi-Fi network here: [Mac](\").concat(withReplacementDelimiters(\"link.forget_wifi.mac\"), \") | [Windows](\").concat(withReplacementDelimiters(\"link.forget_wifi.windows\"), \") | [iOS](\").concat(withReplacementDelimiters(\"link.forget_wifi.ios\"), \") | [Android](\").concat(withReplacementDelimiters(\"link.forget_wifi.android\"), \")\\n        3. Toggle the Wi-Fi on your device off and back on again.\\n        4. Completely power down and restart your computer or device.\\n\\n        In the event that these steps don't resolve your wireless trouble, please find your device's MAC address and send it to us so we may begin troubleshooting for you.  Please see the following resource for additional information about finding your MAC address: \").concat(withReplacementDelimiters(\"link.mac_address\"), \".\\n\\n        Again, we will require the MAC address of the device that you would like assistance with in order to help you. Thank you for your patience and cooperation.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Resolve Ticket\",\n        description: \"Sends a closing comment to the customer and resolves the ticket.\",\n        fields: {\n            close_notes: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        Thank you for letting us know your issue has been resolved. Feel free to reach out again if you run into any issues in the future!\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            assignment_group: AssignmentGroup.Escalation,\n            state: TicketState.Resolved,\n            assigned_to: withReplacementDelimiters(\"current_user.full_name\"),\n        },\n    },\n    {\n        name: \"Check In #1\",\n        description: \"Asks the user for an update after not answering.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        Just wanted to check in and see if you were able to solve your issue or if you required further assistance? Please let us know so we can close this ticket or continue troubleshooting if necessary. \\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Check In #2\",\n        description: \"Asks the user for an update again if they didn't answer Check In #1.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        This is our second attempt to reach out in regards to your issue. Please let us know if your issue has been resolved or if you're still experiencing problems. If so, we can continue to troubleshoot. Otherwise, we can go ahead and close this ticket for now.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Close Stale Ticket\",\n        description: \"Send a closing note to the customer and resolves the ticket.\",\n        fields: {\n            work_notes: \"\\n        No follow up after a while. Closing ticket.\\n      \",\n            close_notes: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        We haven't heard back in a while, so we'll go ahead and close your ticket now. Please feel free to reach out to us if you run into any more issues in the future.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            assignment_group: AssignmentGroup.Escalation,\n            state: TicketState.Resolved,\n            assigned_to: withReplacementDelimiters(\"current_user.full_name\"),\n        },\n    },\n    {\n        name: \"Time Stamps\",\n        description: \"Request timestamps from the customer for a Net Trouble report.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        If you are still experiencing connection issues, could you please send us three times and dates of exactly when you\\u2019ve had trouble, each with a brief description of your activity at the time and how it behaved in a way that was less than desirable? For example:\\n        \\n        > \").concat(withReplacementDelimiters(\"info.current_date\"), \" at \").concat(withReplacementDelimiters(\"info.current_time\"), \" \\u2013 Dropped a Zoom Meeting\\n\\n        Three timestamps in that format should be enough for us to submit a report to the networking team to have them take a look at your device's connection history and figure out what's going on.\\n\\n        Thank you so much for your continued patience and cooperation while we work to resolve the issue.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Net Trouble Report\",\n        description: \"Shows the form for submitting a the Net Trouble report.\",\n        fields: {\n            work_notes: \"\\n        ### Network Trouble Report\\n\\n        MAC address: \".concat(withReplacementDelimiters(\"cursor\"), \"\\n        Operating system: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        Building & room number: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        NetDB node state: \").concat(withReplacementDelimiters(\"cursor:Good\"), \"\\n        1st timestamp: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        2nd timestamp: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        3rd timestamp: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        Building and room number: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        Nature of issue: \").concat(withReplacementDelimiters(\"cursor:'<!-- e.g., slow, trouble connecting, dropped sessions, poor coverage -->'\"), \"\\n        Specific issue details: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n        Troubleshooting attempted thus far: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n\\n        <!-- Copy and paste as needed for multiple devices -->\\n      \"),\n            assignment_group: AssignmentGroup.ResNet,\n            state: TicketState.Active,\n        },\n    },\n    {\n        name: \"TSO Activation Form\",\n        description: \"Shows the form for submitting a TSO activation request.\",\n        fields: {\n            work_notes: \"\\n          Hi ITOC,\\n\\n          Could you please schedule an onsite appointment for UIT I&M to repair this TSO in a student residence, and then pass this ticket onto them? Thank you!\\n\\n          <!-- All fields are required to be completed with actionable data. -->\\n\\n          Destination: UIT Installation and Maintenance\\n          Bill to PTA: 1181807-6-AABVT\\n          Building and Room: \".concat(withReplacementDelimiters(\"cursor\"), \"\\n          TSO number: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n          Is this a primary or additional TSO: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n          Customer phone: \").concat(withReplacementDelimiters(\"cursor:\\\"\".concat(withReplacementDelimiters(\"ticket.requester.number\"), \"\\\"\")), \"\\n          Customer email: \").concat(withReplacementDelimiters(\"cursor:\\\"\".concat(withReplacementDelimiters(\"ticket.requester.email\"), \"\\\"\")), \"\\n          Customer affiliation: \").concat(withReplacementDelimiters(\"cursor:Student\"), \"\\n          Ethernet MAC address of device: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n          NetDB status: \").concat(withReplacementDelimiters(\"cursor:Good\"), \"\\n          NetDB date last changed: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n          NetDB date registered: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n          DHCPlog recent history: \").concat(withReplacementDelimiters(\"cursor\"), \"\\n      \"),\n            assignment_group: AssignmentGroup.ITOC,\n            state: TicketState.Active,\n        },\n    },\n    {\n        name: \"Register via IPRequest\",\n        description: \"Gives the user step-by-step instructions for registering a device through IPRequest.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        To register your device, you can follow these steps:\\n\\n        1. You'll need to find the device's hardware address (also called its MAC address). Here are instructions for how to do so: \").concat(withReplacementDelimiters(\"link.mac_address\"), \".\\n        2. Once you've found the MAC address for your device, go to \").concat(withReplacementDelimiters(\"link.iprequest\"), \" on your computer (make sure the computer is already connected to the Stanford network or Stanford's VPN, as the website will not load otherwise).\\n        3. Fill out the short questionnaire and continue to your registrations.\\n        4. Click the **New Registration** button at the bottom.\\n        5. Continue through the terms and conditions until it asks whether the computer you are currently staring at is the one you want to register. Select **No**.\\n        6. From the Device Type list, choose your device, or **Other** if it is not listed.\\n        7. For the Operating System, choose **Other (Wired)** if you plan on connecting your device via an ethernet cable, or **Other (Gaming)** if you plan on connecting it via Wi-Fi (even if your device is not going to be used for gaming).\\n        8. Under Hardware Address, copy and paste the MAC address you found in Step 1.\\n        9. Continue through the registration, filling out any details it asks for.\\n        10. Once registered, your device should be able to connect to the internet within about 20 minutes. It's best to unplug it for about two minutes and plug it back in to give it the best chance of seeing the new changes on the system.\\n\\n        Please let us know if you have any questions or issues.\\n        \\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"}\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Register Router\",\n        description: \"Gives the user step-by-step instructions for setting up a router.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        Please follow the steps below for setting up your own router:\\n\\n        1. Purchase a router. Most major router brands (e.g. TP-Link, NETGEAR, ASUS, Linksys, Google, etc.) should do, so feel free to choose one that best suits your needs and price point.\\n        2. Once you have the router, look for its MAC address, which is usually printed on the side. It should be 12 alphanumeric digits in the form of `A1:B2:C3:D4:E5:F6`.\\n        3. Once you've found the MAC address, go to \").concat(withReplacementDelimiters(\"link.iprequest\"), \" on your computer (make sure the computer you're using is connected to the Stanford network, **not** the router's network).\\n        4. Fill out the short questionnaire and continue to your registrations.\\n        5. Click the **New Registration** button at the bottom.\\n        6. Continue through the terms and conditions until it asks whether the computer you are currently staring at is the one you want to register. Select **No**.\\n        7. From the Device Type list, choose **Other** if it is not listed.\\n        8. For the Operating System, choose **Other (Wired)**.\\n        9. Under Hardware Address, copy and paste the MAC address you found in Step 2.\\n        9. Continue through the registration, filling out any details it asks for.\\n        10. Once registered, please unplug the router for at least two minutes, as routers tend to not want to update their settings unless they remain unplugged for a bit of time. After 20 or so minutes, your router should be able to connect to the internet, allowing you to connect other devices to the router's network.\\n\\n        Please let us know if you have any questions or issues.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Upgrade to Windows 10 Education\",\n        description: \"Gives the user step-by-step instructions for upgrading to Windows 10 Education.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        You can upgrade your version of Windows 10 to Windows 10 Education (which is compatible with Stanford's encryption software and BitLocker) by following these steps:\\n\\n        1. Go to [Stanford's Software Licensing Webstore](https://stanford.onthehub.com/WebStore/OfferingDetails.aspx?o=bb702eb6-cbf8-e811-810d-000d3af41938) to get your free product key of Windows 10 Education (one per student).\\n        2. Right click the **Start Menu** from your desktop.\\n        3. Select **System**.\\n        4. Click **Change product key**.\\n        5. Copy & paste the 25-digit license key from step 1.\\n        6. Allow the system to reboot (may take 5\\u201310 minutes).\\n\\n        Hope this helps. Lets us know if you have any questions or issues.\\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"Excessive DNS Check In\",\n        description: \"Asks the user about excessive DNS queries being generated by their devices.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        UIT has informed us that one of your devices \").concat(withReplacementDelimiters(\"cursor:\\\"<!-- optionally provide more information like the MAC address here  -->\\\"\"), \" has been generating excessive DNS queries. Would you happen to have any idea why that might be happening? This can usually be caused by doing something out of the ordinary like running a server on the computer, downloading a large data set, etc. Using your computer as normal for tasks like Zoom, browsing the internet, etc. generally shouldn't have any issues. If you are aware of your computer recently doing anything out of the ordinary, please let us know so we know that this was a one-time occurrence. Otherwise, we can go ahead and make a small change on our end to make sure this issue is resolved in the future (and this shouldn't have any noticeable effect on your computer), but we just wanted to reach out to let you know and inquire as to whether you know of why that might be happening before making that change.\\n\\n        Please let us know if you have questions or issues. \\n\\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n    {\n        name: \"2.4 GHz-Only Devices\",\n        description: \"Explains what to do for devices that only work on 2.4 a GHz band.\",\n        fields: {\n            additional_comments: \"\\n        Hi \".concat(withReplacementDelimiters(\"ticket.requester.first_name\"), \",\\n\\n        It looks like that the kind of device you want to use only works on a 2.4 GHz band, which Stanford's network is not currently set up to provide in the way at-home Wi-Fi routers do. You can read more about unsupported devices here: https://stanford.service-now.com/student_services?id=kb_article&sys_id=fb9174068746f850d9e07778cebb35d1.\\n\\n        While your device won't be able to connect to Stanford's network, you have two options:\\n\\n        1. Buy another device that does work with both 2.4 GHz and 5 GHz bands (which may or may not exist since many devices, especially \\\"smart home\\\" devices, are made for exactly that: homes with a private Wi-Fi network, not campuses with enterprise-grade Wi-Fi networks). If buying online such as from Amazon, make sure to look at comments and reviews to verify that the device does in fact work on both 2.4 GHz and 5 GHz bands.\\n        2. Set up your own router. You can purchase your own router and get it connected to the Stanford network, and the router should be able to broadcast both 2.4 GHz and 5 GHz bands correctly for the device to connect to. We can guide you through the process of setting up your router if you choose to go this route.\\n\\n        Please let us know if you have questions or issues.\\n        \\n        \").concat(withReplacementDelimiters(\"current_user.signature\"), \"\\n      \"),\n            state: TicketState.Pending,\n        },\n    },\n];\n","\n      import API from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      \n      import setAttributes from \"!../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\noptions.insert = (element) => {\n                  var clones = [];\n                  // Add a clone of the element to every parent window (but not the current one\n                  // since the original `element` goes there).\n                  for (\n                    var currWindow = window.parent;\n                    currWindow !== window;\n                    currWindow = currWindow.parent\n                  ) {\n                    var clone = element.cloneNode(true);\n                    clones.push(clone);\n                    currWindow.document.head.appendChild(clone);\n                    if (currWindow.parent === currWindow) break;\n                  }\n                  // Update the clones every time the original changes.\n                  if (typeof window.MutationObserver !== \"undefined\") {\n                    new MutationObserver(function () {\n                      for (var i = 0; i < clones.length; i++) {\n                        clones[i].textContent = element.textContent;\n                      }\n                    }).observe(element, {\n                      childList: true,\n                      subtree: true,\n                      characterData: true,\n                    });\n                  }\n                  window.document.head.appendChild(element);\n                };\noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../node_modules/postcss-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js!../../prepend-sass-variables-loader.js!./styles.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { addToSubBar, assertNotNull, dedent, escapeHTML, getTextAreaData, getTextAreaOfType, getTicketType, interceptStyles, isInstance, makeElement, resolveReplacements, setDropdown, showTextArea, ticketStateToString, writeToTextArea, } from \"../helpers\";\nimport { TextAreaType, TicketType } from \"../helpers/types\";\nimport constants from \"../constants.json\";\nimport { macros } from \"./data\";\nimport \"./styles.scss\";\nimport { setDataList } from \"../helpers/setInputs\";\nvar applyMacro = function (macro) { return __awaiter(void 0, void 0, void 0, function () {\n    var fields, fields_1, fields_1_1, key, rawValue, value, _a, element, element, element, element, element, element, element, e_1, e_2_1;\n    var e_2, _b, _c, _d, _e;\n    return __generator(this, function (_f) {\n        switch (_f.label) {\n            case 0:\n                // Hide the macro modal.\n                changeMacroModalVisibility(false);\n                fields = Object.keys(macro.fields);\n                // Move work_notes, comments, and close_notes to the end so that the textareas are focused when\n                // we're done applying the macro.\n                if (\"work_notes\" in macro.fields) {\n                    fields.splice(fields.indexOf(\"work_notes\"), 1);\n                    fields.push(\"work_notes\");\n                }\n                if (\"additional_comments\" in macro.fields) {\n                    fields.splice(fields.indexOf(\"additional_comments\"), 1);\n                    fields.push(\"additional_comments\");\n                }\n                if (\"close_notes\" in macro.fields) {\n                    fields.splice(fields.indexOf(\"close_notes\"), 1);\n                    fields.push(\"close_notes\");\n                }\n                _f.label = 1;\n            case 1:\n                _f.trys.push([1, 16, 17, 18]);\n                fields_1 = __values(fields), fields_1_1 = fields_1.next();\n                _f.label = 2;\n            case 2:\n                if (!!fields_1_1.done) return [3 /*break*/, 15];\n                key = fields_1_1.value;\n                rawValue = macro.fields[key];\n                value = typeof rawValue === \"string\" ? dedent(rawValue) : rawValue;\n                _f.label = 3;\n            case 3:\n                _f.trys.push([3, 13, , 14]);\n                _a = key;\n                switch (_a) {\n                    case \"additional_comments\": return [3 /*break*/, 4];\n                    case \"work_notes\": return [3 /*break*/, 5];\n                    case \"close_notes\": return [3 /*break*/, 6];\n                    case \"assignment_group\": return [3 /*break*/, 7];\n                    case \"assigned_to\": return [3 /*break*/, 9];\n                    case \"state\": return [3 /*break*/, 11];\n                }\n                return [3 /*break*/, 12];\n            case 4:\n                {\n                    if (\"work_notes\" in macro.fields) {\n                        // If both additional_comments and work_notes are being changed, show both types of\n                        // textareas.\n                        showTextArea(TextAreaType.CommentsAndWorkNotes);\n                    }\n                    else {\n                        // Otherwise just show comments.\n                        showTextArea(TextAreaType.Comments);\n                    }\n                    element = assertNotNull(getTextAreaOfType(TextAreaType.Comments), \"Could not find comments textarea.\");\n                    assertNotNull(getTextAreaData(element), \"No textarea data is associated with the comments textarea.\");\n                    writeToTextArea(element, value);\n                    return [3 /*break*/, 12];\n                }\n                _f.label = 5;\n            case 5:\n                {\n                    if (\"additional_comments\" in macro.fields) {\n                        // If both additional_comments and work_notes are being changed, let the additional_comments\n                        // take care of focusing both text fields.\n                    }\n                    else {\n                        // Otherwise just show work notes.\n                        showTextArea(TextAreaType.WorkNotes);\n                    }\n                    element = assertNotNull(getTextAreaOfType(TextAreaType.WorkNotes), \"Could not find comments textarea.\");\n                    assertNotNull(getTextAreaData(element), \"No textarea data is associated with the comments textarea.\");\n                    writeToTextArea(element, value);\n                    return [3 /*break*/, 12];\n                }\n                _f.label = 6;\n            case 6:\n                {\n                    if (getTicketType() === TicketType.Task) {\n                        // Tasks do not have close notes. If this macro wants to write to the Close Notes, try\n                        // writing to the Comments instead, *unless* the Comments are also being written to. In that\n                        // case, there's nowhere to write to.\n                        if (\"additional_comments\" in macro.fields) {\n                            return [3 /*break*/, 14];\n                        }\n                        showTextArea(TextAreaType.Comments);\n                        element = assertNotNull(getTextAreaOfType(TextAreaType.Comments), \"Could not find comments textarea.\");\n                        assertNotNull(getTextAreaData(element), \"No textarea data is associated with the comments textarea.\");\n                        writeToTextArea(element, value);\n                    }\n                    else {\n                        showTextArea(TextAreaType.CloseNotes);\n                        element = assertNotNull(getTextAreaOfType(TextAreaType.CloseNotes), \"Could not find close_notes textarea.\");\n                        assertNotNull(getTextAreaData(element), \"No textarea data is associated with the close_notes textarea.\");\n                        writeToTextArea(element, value);\n                    }\n                    return [3 /*break*/, 12];\n                }\n                _f.label = 7;\n            case 7:\n                element = assertNotNull((_c = {},\n                    _c[TicketType.Incident] = document.getElementById(\"sys_display.incident.assignment_group\"),\n                    _c[TicketType.SupportRequest] = document.getElementById(\"sys_display.ticket.assignment_group\"),\n                    _c[TicketType.Task] = document.getElementById(\"sys_display.sc_task.assignment_group\"),\n                    _c)[getTicketType()], \"Could not find assignment_group element.\");\n                return [4 /*yield*/, setDataList(element, value)];\n            case 8:\n                _f.sent();\n                return [3 /*break*/, 12];\n            case 9:\n                element = assertNotNull((_d = {},\n                    _d[TicketType.Incident] = document.getElementById(\"sys_display.incident.assigned_to\"),\n                    _d[TicketType.SupportRequest] = document.getElementById(\"sys_display.ticket.assigned_to\"),\n                    _d[TicketType.Task] = document.getElementById(\"sys_display.sc_task.assigned_to\"),\n                    _d)[getTicketType()], \"Could not find assigned_to element.\");\n                return [4 /*yield*/, setDataList(element, value)];\n            case 10:\n                _f.sent();\n                return [3 /*break*/, 12];\n            case 11:\n                {\n                    element = assertNotNull((_e = {},\n                        _e[TicketType.Incident] = document.getElementById(\"incident.state\"),\n                        _e[TicketType.SupportRequest] = document.getElementById(\"ticket.state\"),\n                        _e[TicketType.Task] = document.getElementById(\"sc_task.state\"),\n                        _e)[getTicketType()], \"Could not find state element.\");\n                    setDropdown(element, ticketStateToString(value));\n                    return [3 /*break*/, 12];\n                }\n                _f.label = 12;\n            case 12: return [3 /*break*/, 14];\n            case 13:\n                e_1 = _f.sent();\n                console.warn(\"Failed to apply macro field \\\"\".concat(key, \"\\\":\"), e_1);\n                return [3 /*break*/, 14];\n            case 14:\n                fields_1_1 = fields_1.next();\n                return [3 /*break*/, 2];\n            case 15: return [3 /*break*/, 18];\n            case 16:\n                e_2_1 = _f.sent();\n                e_2 = { error: e_2_1 };\n                return [3 /*break*/, 18];\n            case 17:\n                try {\n                    if (fields_1_1 && !fields_1_1.done && (_b = fields_1.return)) _b.call(fields_1);\n                }\n                finally { if (e_2) throw e_2.error; }\n                return [7 /*endfinally*/];\n            case 18: return [2 /*return*/];\n        }\n    });\n}); };\nvar macroModalComponents = {};\nvar shownMacros = [];\nvar getMacroIndex = function (element) {\n    if (!element || !isInstance(element, HTMLElement))\n        return null;\n    var attr = element.getAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-visible-macro-index\"));\n    if (!attr)\n        return null;\n    var index = parseInt(attr, 10);\n    return isNaN(index) ? null : index;\n};\nvar closeModalOnEscape = function (e) {\n    if (e.code === \"Escape\") {\n        e.preventDefault();\n        e.stopPropagation();\n        changeMacroModalVisibility(false);\n    }\n};\nvar populateMacros = function () {\n    macroModalComponents.macroList.innerText = \"\";\n    shownMacros.length = 0;\n    var searchWords = macroModalComponents.search.value\n        .toLowerCase()\n        .split(/[^a-z\\d]+/);\n    if (searchWords[0] === \"\") {\n        searchWords.shift();\n    }\n    var doneMacros = 0;\n    var _loop_1 = function (i) {\n        var e_3, _a;\n        var macro = macros[i];\n        if (searchWords.length) {\n            var doesNotMatch = false;\n            try {\n                for (var searchWords_1 = (e_3 = void 0, __values(searchWords)), searchWords_1_1 = searchWords_1.next(); !searchWords_1_1.done; searchWords_1_1 = searchWords_1.next()) {\n                    var word = searchWords_1_1.value;\n                    if (!macro.name.toLowerCase().includes(word) &&\n                        !macro.description.toLowerCase().includes(word)) {\n                        doesNotMatch = true;\n                        break;\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (searchWords_1_1 && !searchWords_1_1.done && (_a = searchWords_1.return)) _a.call(searchWords_1);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            if (doesNotMatch)\n                return \"continue\";\n        }\n        shownMacros.push(macro);\n        var macroTab = makeElement(\"span\", {\n            role: \"tab\",\n            className: \"sn-widget-list-item\",\n            tabIndex: \"0\",\n        }, \"\\n          <div class=\\\"sn-widget-list-content\\\">\\n            <span class=\\\"sn-widget-list-title\\\">\\n              \".concat(escapeHTML(macro.name), \"\\n              <span class=\\\"sn-widget-list-subtitle\\\">\").concat(macro.description, \"</span>\\n            </span>\\n          </div>\\n          <div class=\\\"sn-widget-list-content sn-widget-list-content_static\\\">\\n            <div class=\\\"sn-widget-list-image icon-preview\\\"></div>\\n          </div>\\n        \"));\n        macroTab.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-visible-macro-index\"), doneMacros.toString());\n        macroTab.setAttribute(\"data-\".concat(constants.EXTENSION_PREFIX, \"-macro-index\"), i.toString());\n        doneMacros++;\n        macroTab.lastElementChild.addEventListener(\"mousedown\", function (e) {\n            e.stopPropagation();\n        });\n        macroTab.lastElementChild.addEventListener(\"click\", function (e) {\n            e.stopPropagation();\n            e.preventDefault();\n            var index = getMacroIndex(e.currentTarget);\n            if (index == null)\n                return;\n            focusMacroItem(index);\n        });\n        macroTab.lastElementChild.addEventListener(\"keydown\", function (e) {\n            if (e.code === \"Enter\" || e.code === \"Space\") {\n                e.preventDefault();\n                e.stopPropagation();\n                if (isInstance(e.currentTarget, HTMLElement))\n                    e.currentTarget.click();\n            }\n        });\n        macroTab.addEventListener(\"keydown\", function (e) {\n            var index = getMacroIndex(e.currentTarget);\n            if (index == null)\n                return;\n            if (e.code === \"ArrowUp\") {\n                e.preventDefault();\n                e.stopPropagation();\n                if (index > 0) {\n                    focusMacroItem(index - 1);\n                }\n                else {\n                    macroModalComponents.search.focus();\n                }\n            }\n            else if (e.code === \"ArrowDown\") {\n                e.preventDefault();\n                e.stopPropagation();\n                if (index < macroModalComponents.macroList.children.length - 1) {\n                    focusMacroItem(index + 1);\n                }\n                else {\n                    macroModalComponents.search.focus();\n                }\n            }\n            else if (e.code === \"Enter\" || e.code === \"Space\") {\n                e.preventDefault();\n                e.stopPropagation();\n                clickTab(e);\n            }\n        });\n        var clickTab = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var index = getMacroIndex(e.currentTarget);\n            if (index == null)\n                return;\n            applyMacro(shownMacros[index]);\n        };\n        macroTab.addEventListener(\"mousedown\", clickTab);\n        macroTab.addEventListener(\"click\", clickTab);\n        macroTab.addEventListener(\"focus\", function (e) {\n            var index = getMacroIndex(e.currentTarget);\n            if (index == null)\n                return;\n            focusMacroItem(index);\n        });\n        macroModalComponents.macroList.appendChild(macroTab);\n    };\n    for (var i = 0; i < macros.length; i++) {\n        _loop_1(i);\n    }\n    focusMacroItem(-1);\n};\nfunction focusMacroItem(index) {\n    var e_4, _a, e_5, _b;\n    var _c;\n    try {\n        for (var _d = __values(Array.from(macroModalComponents.macroList.children)), _e = _d.next(); !_e.done; _e = _d.next()) {\n            var child = _e.value;\n            child.classList.remove(\"state-active\");\n            child.ariaSelected = \"false\";\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n    if (index < 0 || index >= macroModalComponents.macroList.children.length) {\n        macroModalComponents.leftPanel.classList.replace(\"col-sm-4\", \"col-sm-8\");\n        macroModalComponents.rightPanel.classList.replace(\"col-sm-8\", \"col-sm-4\");\n        macroModalComponents.previewBody.innerText = \"\";\n        macroModalComponents.header.innerText = \"Preview\";\n    }\n    else {\n        macroModalComponents.leftPanel.classList.replace(\"col-sm-8\", \"col-sm-4\");\n        macroModalComponents.rightPanel.classList.replace(\"col-sm-4\", \"col-sm-8\");\n        var focusedItem = macroModalComponents.macroList.children[index];\n        focusedItem.focus();\n        focusedItem.classList.add(\"state-active\");\n        focusedItem.ariaSelected = \"true\";\n        var macroIndex = getMacroIndex(focusedItem);\n        if (macroIndex == null)\n            return;\n        var macro = macros[macroIndex];\n        macroModalComponents.header.innerText = macro.name;\n        macroModalComponents.previewBody.innerHTML = \"\\n      <div class=\\\"\".concat(constants.EXTENSION_PREFIX, \"-preview-header\\\">\\n        <button class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-back-button btn close icon-arrow-left\\\" style=\\\"float: none\\\">\\n          <span class=\\\"sr-only\\\">Back</span>\\n        </button>\\n      </div>\\n      <div id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-preview-fields\\\"></div>\\n    \");\n        macroModalComponents.previewBody.firstElementChild.firstElementChild.addEventListener(\"click\", function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            focusMacroItem(-1);\n        });\n        var fieldsContainer = macroModalComponents.previewBody.firstElementChild.nextElementSibling;\n        var fields = Object.keys(macro.fields);\n        var fieldsIndex = void 0;\n        // Make sure Additional Comments, Work Notes, and Close Notes shows up first.\n        if (~(fieldsIndex = fields.indexOf(\"work_notes\"))) {\n            fields.splice(fieldsIndex, 1);\n            fields.unshift(\"work_notes\");\n        }\n        if (~(fieldsIndex = fields.indexOf(\"close_notes\"))) {\n            fields.splice(fieldsIndex, 1);\n            fields.unshift(\"close_notes\");\n        }\n        if (~(fieldsIndex = fields.indexOf(\"additional_comments\"))) {\n            fields.splice(fieldsIndex, 1);\n            fields.unshift(\"additional_comments\");\n        }\n        try {\n            // Go through the fields that would be changed.\n            for (var fields_2 = __values(fields), fields_2_1 = fields_2.next(); !fields_2_1.done; fields_2_1 = fields_2.next()) {\n                var field = fields_2_1.value;\n                // Make sure this is a recognized field, and translate the name into a more readable form.\n                var fieldName = (_c = {\n                    additional_comments: \"Additional Comments (Customer Visible)\",\n                    close_notes: \"Close Notes\",\n                    work_notes: \"Work Notes\",\n                    assignment_group: \"Assignment Group\",\n                    state: \"State\",\n                    assigned_to: \"Assigned To\",\n                }[field]) !== null && _c !== void 0 ? _c : null;\n                if (fieldName == null) {\n                    continue;\n                }\n                var fieldValue = null;\n                if (field === \"state\") {\n                    fieldValue = ticketStateToString(macro.fields.state);\n                }\n                else {\n                    // Get the value that would be replaced.\n                    var value = dedent(macro.fields[field]);\n                    // Resolve any replacements\n                    var _f = __read(resolveReplacements(value), 2), replacedValue = _f[0], caretPositions = _f[1];\n                    // If there's only one caret position, and it's at the end, we don't want to show it\n                    // since that's not significant.\n                    if (caretPositions.length === 1 &&\n                        caretPositions[0][0] === caretPositions[0][1] &&\n                        caretPositions[0][0] === replacedValue.length) {\n                        caretPositions = [];\n                    }\n                    else if (caretPositions.length > 0) {\n                        // Replace any caret positions with a special <span> that will show caret positions.\n                        // Also escape any HTML in between these <span>s.\n                        for (var i = caretPositions.length - 1; i >= 0; i--) {\n                            replacedValue = \"\".concat(replacedValue.substring(0, caretPositions[i][0]), \"<span class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-caret-position-span \").concat(constants.EXTENSION_PREFIX, \"-span-\").concat(caretPositions[i][0] === caretPositions[i][1] ? \"empty\" : \"full\", \"\\\"><span></span><span></span><span>\").concat(escapeHTML(replacedValue.substring(caretPositions[i][0], caretPositions[i][1])), \"</span></span>\").concat(escapeHTML(replacedValue.substring(caretPositions[i][1], i === caretPositions.length - 1\n                                ? replacedValue.length\n                                : caretPositions[i + 1][0]))).concat(replacedValue.substring(i === caretPositions.length - 1\n                                ? replacedValue.length\n                                : caretPositions[i + 1][0]));\n                        }\n                        replacedValue =\n                            escapeHTML(replacedValue.substring(0, caretPositions[0][0])) +\n                                replacedValue.substring(caretPositions[0][0]);\n                    }\n                    fieldValue = replacedValue;\n                }\n                // Now make the element that will display this field value.\n                var container = document.createElement(\"div\");\n                container.classList.add(\"\".concat(constants.EXTENSION_PREFIX, \"-preview-field-container\"));\n                container.innerHTML = \"\\n        <div>\".concat(fieldName, \"</div>\\n        <div class=\\\"\").concat(constants.EXTENSION_PREFIX, \"-preview-field-value \").concat(field === \"work_notes\"\n                    ? \"\".concat(constants.EXTENSION_PREFIX, \"-preview-work_notes-value\")\n                    : \"\", \" form-control\\\">\").concat(fieldValue, \"</div>\\n        \");\n                fieldsContainer.appendChild(container);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (fields_2_1 && !fields_2_1.done && (_b = fields_2.return)) _b.call(fields_2);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    }\n}\nvar changeMacroModalVisibility = function (value) {\n    var _a, _b;\n    if (value) {\n        macroModalComponents.search.value = \"\";\n        populateMacros();\n        macroModalComponents.leftPanel.classList.replace(\"col-sm-4\", \"col-sm-8\");\n        macroModalComponents.rightPanel.classList.replace(\"col-sm-8\", \"col-sm-4\");\n        macroModalComponents.backdrop.style.display = \"block\";\n        macroModalComponents.root.style.display = \"block\";\n        macroModalComponents.search.focus();\n        document.addEventListener(\"keydown\", closeModalOnEscape);\n        ((_a = window.top) !== null && _a !== void 0 ? _a : window).document.addEventListener(\"keydown\", closeModalOnEscape);\n    }\n    else {\n        macroModalComponents.backdrop.style.display = \"none\";\n        macroModalComponents.root.style.display = \"none\";\n        document.removeEventListener(\"keydown\", closeModalOnEscape);\n        ((_b = window.top) !== null && _b !== void 0 ? _b : window).document.removeEventListener(\"keydown\", closeModalOnEscape);\n    }\n};\nvar createMacroModal = function () {\n    var _a, _b;\n    // Make the macro elements and add them to the document.\n    var backdrop = makeElement(\"div\", {\n        className: \"modal-backdrop in stacked\",\n        style: \"display: none;\",\n    });\n    ((_a = window.top) !== null && _a !== void 0 ? _a : window).document.body.appendChild(backdrop);\n    var modalRoot = makeElement(\"div\", {\n        id: \"\".concat(constants.EXTENSION_PREFIX, \"-macros_modal\"),\n        role: \"dialog\",\n        className: \"modal in settings-modal\",\n        style: \"display: none;\",\n    }, \n    // This is taken from ServiceNow's #settings_modal, with some modifications.\n    \"\\n      <div class=\\\"modal-dialog modal-lg ng-scope compact\\\">\\n        <div class=\\\"modal-content\\\">\\n          <div class=\\\"modal-body clearfix\\\" style=\\\"min-height:50vmin\\\">\\n            <div class=\\\"tab-aside col-sm-8\\\" id=\\\"\".concat(constants.EXTENSION_PREFIX, \"-macro-list-panel\\\">\\n              <header class=\\\"modal-header clearfix\\\">Macros</header>\\n              <div class=\\\"settings-tabs\\\">\\n                <div class=\\\"sn-aside sn-aside_left sn-aside_min-width\\\">\\n                  <div class=\\\"sn-aside-body \").concat(constants.EXTENSION_PREFIX, \"-macro-list-flex\\\">\\n                    <div id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macro-search-container\\\" class=\\\"modal-header\\\">\\n                      <input id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macro-search\\\" placeholder=\\\"Filter macros\\\" class=\\\"form-control\\\">\\n                    </div>\\n                    <div class=\\\"sn-widget-list_v2\\\" role=\\\"tablist\\\" aria-label=\\\"List of macros\\\" id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macro-list\\\"></div>\\n                  </div>\\n                </div>\\n              </div>\\n            </div>\\n            <div class=\\\"tab-content col-sm-4\\\" id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macro-preview-panel\\\">\\n              <header class=\\\"modal-header clearfix\\\">\\n                <div class=\\\"modal-header-right\\\"></div>\\n                <div class=\\\"modal-header-center\\\">\\n                  <h4 class=\\\"modal-title text-center\\\" id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macros_modal_panel_header\\\">Preview</h4>\\n                </div>\\n                <div class=\\\"modal-header-left\\\">\\n                  <button class=\\\"btn close icon-cross\\\" id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-dismiss-icon\\\">\\n                    <span class=\\\"sr-only\\\">Close</span>\\n                  </button>\\n                </div>\\n              </header>\\n              <div class=\\\"form-horizontal view-stack settings-tab-panels\\\" aria-labelledby=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macros_modal_panel_header\\\">\\n                <div class=\\\"tab-pane view-stack-item\\\" role=\\\"tabpanel\\\" aria-labelledby=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macros_modal_panel_header\\\" id=\\\"\").concat(constants.EXTENSION_PREFIX, \"-macros_modal_preview-body\\\"></div>\\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n      <i class=\\\"focus-trap-boundary-south\\\" tabindex=\\\"0\\\"></i>\\n    \"));\n    macroModalComponents.root = modalRoot;\n    macroModalComponents.backdrop = backdrop;\n    macroModalComponents.leftPanel = modalRoot.querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-macro-list-panel\"));\n    macroModalComponents.rightPanel = modalRoot.querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-macro-preview-panel\"));\n    macroModalComponents.macroList = modalRoot.querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-macro-list\"));\n    macroModalComponents.previewBody = modalRoot.querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-macros_modal_preview-body\"));\n    macroModalComponents.header = modalRoot.querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-macros_modal_panel_header\"));\n    macroModalComponents.search = modalRoot.querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-macro-search\"));\n    macroModalComponents.search.addEventListener(\"input\", function (e) {\n        e.stopPropagation();\n        populateMacros();\n    });\n    macroModalComponents.search.addEventListener(\"keydown\", function (e) {\n        if (shownMacros.length === 0) {\n            return;\n        }\n        if (e.code === \"Enter\") {\n            e.preventDefault();\n            e.stopPropagation();\n            applyMacro(shownMacros[0]);\n        }\n        else if (e.code === \"ArrowDown\") {\n            e.preventDefault();\n            e.stopPropagation();\n            focusMacroItem(0);\n        }\n        else if (e.code === \"ArrowUp\") {\n            e.preventDefault();\n            e.stopPropagation();\n            focusMacroItem(shownMacros.length - 1);\n        }\n    });\n    macroModalComponents.search.addEventListener(\"focus\", function () {\n        focusMacroItem(-1);\n    });\n    modalRoot\n        .querySelector(\"#\".concat(constants.EXTENSION_PREFIX, \"-dismiss-icon\"))\n        .addEventListener(\"click\", function (e) {\n        e.preventDefault();\n        changeMacroModalVisibility(false);\n    });\n    ((_b = window.top) !== null && _b !== void 0 ? _b : window).document.body.appendChild(modalRoot);\n    modalRoot.addEventListener(\"click\", function (e) {\n        if (e.target !== e.currentTarget) {\n            return;\n        }\n        e.preventDefault();\n        changeMacroModalVisibility(false);\n    });\n};\nvar init = function (config) {\n    if (!config.enabled.servicenow.macros)\n        return;\n    addToSubBar(function (textarea) {\n        // The description textarea does not have macros applied to it because it is the customer's\n        // notes, not ours.\n        if (textarea.id.includes(\"description\")) {\n            return null;\n        }\n        var btn = makeElement(\"button\", {\n            type: \"button\",\n            className: \"\".concat(constants.EXTENSION_PREFIX, \"-md-previewer-btn btn btn-default\"),\n        }, \"Apply Macro\");\n        btn.addEventListener(\"click\", function () {\n            changeMacroModalVisibility(true);\n        });\n        return btn;\n    });\n    createMacroModal();\n    interceptStyles(\"#settings_modal\", \"#\".concat(constants.EXTENSION_PREFIX, \"-macros_modal\"));\n};\nexport default init;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport constants from \"../constants.json\";\nvar init = function (config) {\n    var e_1, _a, _b;\n    var pairs = location.search.substring(1).split(\"&\");\n    try {\n        for (var pairs_1 = __values(pairs), pairs_1_1 = pairs_1.next(); !pairs_1_1.done; pairs_1_1 = pairs_1.next()) {\n            var pair = pairs_1_1.value;\n            var key = void 0, val = void 0;\n            try {\n                _b = __read(pair.split(\"=\"), 2), key = _b[0], val = _b[1];\n                // Only look for \"[CSS_PREFIX]-search-mac=[MAC Address]\"\n                if (decodeURIComponent(key) === \"\".concat(constants.EXTENSION_PREFIX, \"-search-mac\")) {\n                    val = decodeURIComponent(val);\n                }\n                else\n                    continue;\n            }\n            catch (e) {\n                continue;\n            }\n            // We found a MAC address to search for in the URL. Now we have to get the search form.\n            var searchForm = document.querySelector(\"form.mais-universal-search.search-form.navbar-search\");\n            if (!searchForm)\n                break;\n            // We can extract the authentication token from its action attribute.\n            var match = searchForm.action.match(/p_auth=([^&=]+)/);\n            if (!match)\n                break;\n            var authToken = match[1];\n            // Now that we have the auth token, we can perform the search by navigating straight to\n            // the correct endpoint.\n            location.replace(\"https://mydevices.stanford.edu/group/mydevices/m?p_p_id=mydevicesportlet_WAR_maismydevicesportlet&p_p_lifecycle=1&p_p_state=normal&p_p_mode=view&_mydevicesportlet_WAR_maismydevicesportlet_action=deviceSearch&p_auth=\".concat(authToken, \"&_mydevicesportlet_WAR_maismydevicesportlet_searchInput=\").concat(encodeURIComponent(val)));\n            break;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (pairs_1_1 && !pairs_1_1.done && (_a = pairs_1.return)) _a.call(pairs_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n};\nexport default init;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport constants from \"../constants.json\";\nimport { makeElement, waitForElements } from \"../helpers\";\nvar init = function (config) {\n    waitForElements(\"#settings_modal .settings-tabs .sn-widget-list_v2\", function (lists) {\n        var e_1, _a;\n        try {\n            for (var lists_1 = __values(lists), lists_1_1 = lists_1.next(); !lists_1_1.done; lists_1_1 = lists_1.next()) {\n                var list = lists_1_1.value;\n                list.appendChild(makeElement(\"a\", {\n                    href: \"/\".concat(constants.EXTENSION_PREFIX, \"/settings\"),\n                    target: \"_blank\",\n                    role: \"tab\",\n                    className: \"sn-widget-list-item ng-scope\",\n                    tabIndex: \"-1\",\n                    \"aria-selected\": \"false\",\n                }, \n                // prettier-ignore\n                \"\\n              <div aria-hidden=\\\"true\\\" class=\\\"sn-widget-list-content sn-widget-list-content_static\\\">\\n                <div class=\\\"sn-widget-list-image icon-open-document-new-tab\\\"></div>\\n              </div>\\n              <div class=\\\"sn-widget-list-content\\\">\\n                <span class=\\\"sn-widget-list-title ng-binding\\\">Plugin Settings</span>\\n              </div>\\n            \"));\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (lists_1_1 && !lists_1_1.done && (_a = lists_1.return)) _a.call(lists_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    });\n};\nexport default init;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { isInstance, makeElement } from \"../helpers\";\n/**\n * A regex that matches any characters that are not hex digits (lowercase only).\n */\nvar NON_HEX_REGEX = /[^a-f\\d]/g;\nvar hasInitialized = false;\nvar init = function (config) {\n    if (hasInitialized)\n        return;\n    hasInitialized = true;\n    if (config.enabled.netdb.mac_links)\n        initMacLinks();\n    if (config.enabled.netdb.node_history_links)\n        initNodeHistoryLinks();\n    if (config.enabled.netdb.history_highlight)\n        initHistoryHighlight();\n    initIPFiltering();\n};\n/**\n * Adds a \"DHCP Log\" link next to each MAC address that takes the user to the DHCP log for that\n * address.\n */\nvar initMacLinks = function () {\n    var e_1, _a;\n    var _b;\n    try {\n        for (var _c = __values(Array.from(document.querySelectorAll(\"td\"))), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var td = _d.value;\n            if (td.innerText.trim() !== \"Hardware\\u00a0Address\")\n                continue;\n            var container = (_b = td.nextElementSibling) === null || _b === void 0 ? void 0 : _b.nextElementSibling;\n            var address = container === null || container === void 0 ? void 0 : container.firstElementChild;\n            if (!isInstance(container, HTMLElement) ||\n                !isInstance(address, HTMLElement)) {\n                continue;\n            }\n            var link = makeElement(\"a\", {\n                href: \"http://day.stanford.edu:9696/manage/dhcplog/check_db?input=\".concat(address.innerText, \"#ACK\"),\n                target: \"_blank\",\n            }, \"DHCP Log\");\n            container.insertBefore(link, address.nextSibling);\n            container.insertBefore(document.createTextNode(\" \"), link);\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n};\n/**\n * This highlights the MAC address that was searched for. NetDB usually includes a history in its\n * URL that lets us determine which MAC address was searched for, and highlight it on the node page.\n */\nvar initHistoryHighlight = function () {\n    var e_2, _a, e_3, _b, e_4, _c;\n    var _d;\n    try {\n        // Highlight the MAC address the user searched for, if any.\n        for (var _e = __values(new URLSearchParams(location.search)), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var _g = __read(_f.value, 2), key = _g[0], value = _g[1];\n            if (key === \"history\") {\n                var prevURL = void 0;\n                try {\n                    prevURL = new URL(decodeURIComponent(value), \"https://netdb.stanford.edu\");\n                }\n                catch (e) {\n                    continue;\n                }\n                var isQuickSearch = prevURL.pathname === \"/qsearch\";\n                var isFullSearch = prevURL.pathname === \"/fs_node_result\";\n                var mac = \"\";\n                try {\n                    for (var _h = (e_3 = void 0, __values(new URLSearchParams(prevURL.search))), _j = _h.next(); !_j.done; _j = _h.next()) {\n                        var _k = __read(_j.value, 2), innerKey = _k[0], innerValue = _k[1];\n                        if (isFullSearch && innerKey === \"hardware_address\")\n                            mac = decodeURIComponent(innerValue)\n                                .toLowerCase()\n                                .replace(NON_HEX_REGEX, \"\");\n                        if (isQuickSearch && innerKey === \"search_string\")\n                            mac = decodeURIComponent(innerValue)\n                                .toLowerCase()\n                                .replace(NON_HEX_REGEX, \"\");\n                        if (mac)\n                            break;\n                    }\n                }\n                catch (e_3_1) { e_3 = { error: e_3_1 }; }\n                finally {\n                    try {\n                        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n                    }\n                    finally { if (e_3) throw e_3.error; }\n                }\n                if (!mac || mac.length !== 12)\n                    break;\n                try {\n                    for (var _l = (e_4 = void 0, __values(Array.from(document.querySelectorAll(\"td\")))), _m = _l.next(); !_m.done; _m = _l.next()) {\n                        var td = _m.value;\n                        if (td.innerText.trim() === \"Hardware\\u00A0Address\") {\n                            var container = (_d = td.nextElementSibling) === null || _d === void 0 ? void 0 : _d.nextElementSibling;\n                            var address = container === null || container === void 0 ? void 0 : container.firstElementChild;\n                            if (!isInstance(address, HTMLElement))\n                                continue;\n                            if (address.innerText.toLowerCase().replace(NON_HEX_REGEX, \"\") === mac) {\n                                address.style.backgroundColor = \"yellow\";\n                            }\n                        }\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (_m && !_m.done && (_c = _l.return)) _c.call(_l);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n};\n/**\n * Adds a \"Node History\" link to NetDB nodes that lets the user view a node's history.\n */\nvar initNodeHistoryLinks = function () {\n    var e_5, _a;\n    var _b;\n    try {\n        for (var _c = __values(Array.from(document.querySelectorAll(\"td\"))), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var td = _d.value;\n            if (td.innerText.trim() !== \"Record ID\")\n                continue;\n            var container = (_b = td.nextElementSibling) === null || _b === void 0 ? void 0 : _b.nextElementSibling;\n            var id = container === null || container === void 0 ? void 0 : container.firstElementChild;\n            if (!isInstance(container, HTMLElement) || !isInstance(id, HTMLElement)) {\n                continue;\n            }\n            var link = makeElement(\"a\", {\n                href: \"https://netdb.stanford.edu/fs_log_result?display_order.date_of_action=1&display_order.record_name=2&display_order.ip_address=3&display_order.node_state=4&record_type=node&display_order.user=5&display_order.logaction=6&logaction=delete&logaction=update&logaction=insert&direction=descending&record_id=\".concat(id.innerText),\n                target: \"_blank\",\n            }, \"Node History\");\n            container.insertBefore(link, id.nextSibling);\n            container.insertBefore(document.createTextNode(\" \"), link);\n        }\n    }\n    catch (e_5_1) { e_5 = { error: e_5_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_5) throw e_5.error; }\n    }\n};\n/**\n * Hides IP addresses on the Network page since they take up a TON of space and are pretty much\n * useless. This will hide them behind a toggle so that the user can still see if they want, while\n * making it easier to scroll through the page.\n */\nvar initIPFiltering = function () {\n    var e_6, _a;\n    var _b, _c;\n    var _loop_1 = function (tr) {\n        var child = tr.firstElementChild;\n        if (!isInstance(child, HTMLElement))\n            return \"continue\";\n        if (tr.children.length === 1 && child.getAttribute(\"colspan\") === \"3\") {\n            tr.classList.add(\"divider\");\n        }\n        else if (child.innerText === \"Dynamic DHCP Addresses\") {\n            tr.classList.add(\"addresses\");\n            var td = makeElement(\"td\", { colspan: \"2\" });\n            var label_1 = makeElement(\"label\", { style: \"margin-top: initial;\" }, \"<span>Show</span> <input type='checkbox' style='height:initial;width:initial;clip-path:initial;position:relative'>\");\n            var table_1 = makeElement(\"table\", { style: \"display: none;\" });\n            label_1.addEventListener(\"change\", function () {\n                var value = label_1.lastElementChild.checked;\n                if (value) {\n                    table_1.style.display = \"\";\n                    label_1.firstElementChild.innerText = \"Hide\";\n                }\n                else {\n                    table_1.style.display = \"none\";\n                    label_1.firstElementChild.innerText = \"Show\";\n                }\n            });\n            table_1.appendChild(tr.lastElementChild);\n            td.appendChild(label_1);\n            td.appendChild(table_1);\n            tr.appendChild(td);\n        }\n    };\n    try {\n        for (var _d = __values(Array.from((_c = (_b = document.querySelector(\"table.table tr[bgcolor] + tr tbody\")) === null || _b === void 0 ? void 0 : _b.children) !== null && _c !== void 0 ? _c : [])), _e = _d.next(); !_e.done; _e = _d.next()) {\n            var tr = _e.value;\n            _loop_1(tr);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n};\nexport default init;\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { isInstance, makeElement } from \"../helpers\";\nvar hasInitialized = false;\nvar init = function (config) {\n    // Make sure we are at a proper URL\n    if (location.host !== \"day.stanford.edu:9696\" ||\n        !location.search.startsWith(\"?input=\")) {\n        return;\n    }\n    if (hasInitialized)\n        return;\n    hasInitialized = true;\n    if (config.enabled.dhcp_log.ip_links)\n        initIPLinking();\n    initTypeLinking();\n};\nvar initIPLinking = function () {\n    var e_1, _a;\n    var _b;\n    var allPres = document.querySelectorAll(\"pre\");\n    if (allPres.length !== 1)\n        return;\n    var pre = allPres[0];\n    pre.normalize();\n    try {\n        for (var _c = __values(Array.from(pre.childNodes)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var child = _d.value;\n            if (!isInstance(child, Text))\n                continue;\n            var text = (_b = child.nodeValue) !== null && _b !== void 0 ? _b : \"\";\n            var match = void 0;\n            var index = void 0;\n            while ((match = text.match(/\\d+\\.\\d+\\.\\d+\\.\\d+/))) {\n                var fullMatch = match[0];\n                index = text.indexOf(fullMatch);\n                pre.insertBefore(document.createTextNode(text.substring(0, index)), child);\n                var a = makeElement(\"a\", {\n                    href: \"https://netdb.stanford.edu/qsearch?search_string=\".concat(fullMatch, \"&search_type=Networks\"),\n                    target: \"_blank\",\n                }, fullMatch);\n                pre.insertBefore(a, child);\n                text = text.substring(index + fullMatch.length);\n                child.nodeValue = text;\n            }\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n};\nvar initTypeLinking = function () {\n    var e_2, _a;\n    var _b;\n    var allPres = document.querySelectorAll(\"pre\");\n    if (allPres.length !== 1)\n        return;\n    var pre = allPres[0];\n    pre.normalize();\n    try {\n        for (var _c = __values(Array.from(pre.childNodes)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var child = _d.value;\n            if (!isInstance(child, Text))\n                continue;\n            var text = (_b = child.nodeValue) !== null && _b !== void 0 ? _b : \"\";\n            var match = void 0;\n            var index = void 0;\n            while ((match = text.match(/(?:ACK|NAK|DISCOVER|OFFER|REQUEST)(?=:)/))) {\n                var fullMatch = match[0];\n                index = text.indexOf(fullMatch);\n                pre.insertBefore(document.createTextNode(text.substring(0, index)), child);\n                var a = makeElement(\"a\", {\n                    href: \"#\".concat(fullMatch),\n                    id: fullMatch,\n                }, fullMatch);\n                pre.insertBefore(a, child);\n                if (location.hash === \"#\".concat(fullMatch)) {\n                    a.scrollIntoView();\n                }\n                text = text.substring(index + fullMatch.length);\n                child.nodeValue = text;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n};\nexport default init;\n","export var TextBoxIDs;\n(function (TextBoxIDs) {\n    TextBoxIDs[\"SIGNATURE\"] = \"signature-textarea\";\n    TextBoxIDs[\"AUTOCOMPLETE_COMMENTS\"] = \"autocomplete-comments-textarea\";\n    TextBoxIDs[\"AUTOCOMPLETE_WORK_NOTES\"] = \"autocomplete-work_notes-textarea\";\n    TextBoxIDs[\"AUTOCOMPLETE_CLOSE_NOTES\"] = \"autocomplete-close_notes-textarea\";\n})(TextBoxIDs || (TextBoxIDs = {}));\nexport var CheckBoxIDs;\n(function (CheckBoxIDs) {\n    CheckBoxIDs[\"ALL\"] = \"enabled-all\";\n    //   SERVICENOW = \"enabled-service-now\",\n    CheckBoxIDs[\"SERVICENOW_AUTOCOMPLETE\"] = \"enabled-service-now-autocomplete\";\n    CheckBoxIDs[\"SERVICENOW_MACROS\"] = \"enabled-service-now-macros\";\n    CheckBoxIDs[\"SERVICENOW_MARKDOWN\"] = \"enabled-service-now-markdown\";\n    CheckBoxIDs[\"SERVICENOW_SMART_TEXT\"] = \"enabled-service-now-smart-text\";\n    //   NETDB = \"enabled-netdb\",\n    //   NETDB_MAC_LINKING = \"enabled-netdb-mac-linking\",\n    //   NETDB_HISTORY_HIGHLIGHT = \"enabled-netdb-history-highlight\",\n    //   DHCP_LOG = \"enabled-dhcp-log\",\n})(CheckBoxIDs || (CheckBoxIDs = {}));\n","export var getDeep = function (object, path, defaultValue) {\n    var current = object;\n    for (var i = 0; i < path.length; i++) {\n        var key = path[i];\n        var value = current[key];\n        if (i !== path.length - 1 && typeof value !== \"object\") {\n            current[path[i]] = {};\n        }\n        else if (i === path.length - 1 && !(key in current)) {\n            current[path[i]] = defaultValue;\n        }\n        current = current[path[i]];\n    }\n    return current;\n};\nexport var setDeep = function (object, path, newValue) {\n    var current = object;\n    for (var i = 0; i < path.length; i++) {\n        var key = path[i];\n        var value = current[key];\n        if (i !== path.length - 1 && typeof value !== \"object\") {\n            current[path[i]] = {};\n        }\n        else if (i === path.length - 1) {\n            current[path[i]] = newValue;\n        }\n        current = current[path[i]];\n    }\n    return object;\n};\n","var __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { defaultValues, setConfigAsync } from \"../config\";\nimport { addTextAreaCallback, addToSubBar, calculateTextPosition, getTextAreaData, makeElement, TextAreaType, } from \"../helpers\";\nimport bodyHTML from \"./page.html\";\nimport stylesAsString from \"!!to-string-loader!css-loader?importLoaders=1!postcss-loader!sass-loader!../../prepend-sass-variables-loader.js!./styles.scss\";\nimport { CheckBoxIDs, TextBoxIDs } from \"./types\";\nimport { getDeep, setDeep } from \"../helpers/deepObject\";\nvar init = function (config) {\n    var _a, _b, _c;\n    document.title = \"STS ServiceNow Plugin Settings\";\n    document.body.innerHTML = bodyHTML;\n    var styles = document.createElement(\"style\");\n    styles.textContent = stylesAsString;\n    document.head.appendChild(styles);\n    var signatureTextarea = document.getElementById(TextBoxIDs.SIGNATURE);\n    signatureTextarea.value = config.signature;\n    signatureTextarea.addEventListener(\"input\", function (e) {\n        resizeTextarea(signatureTextarea);\n        setConfigAsync({ signature: e.target.value });\n    });\n    var autocompleteCommentsTextarea = document.getElementById(TextBoxIDs.AUTOCOMPLETE_COMMENTS);\n    autocompleteCommentsTextarea.value =\n        (_a = config.autoCompletes[TextAreaType.Comments]) !== null && _a !== void 0 ? _a : \"\";\n    autocompleteCommentsTextarea.addEventListener(\"input\", function () {\n        var _a;\n        resizeTextarea(autocompleteCommentsTextarea);\n        setConfigAsync({\n            autoCompletes: (_a = {},\n                _a[TextAreaType.Comments] = autocompleteCommentsTextarea.value,\n                _a),\n        });\n    });\n    var autocompleteWorkNotesTextarea = document.getElementById(TextBoxIDs.AUTOCOMPLETE_WORK_NOTES);\n    autocompleteWorkNotesTextarea.value =\n        (_b = config.autoCompletes[TextAreaType.WorkNotes]) !== null && _b !== void 0 ? _b : \"\";\n    autocompleteWorkNotesTextarea.addEventListener(\"input\", function () {\n        var _a;\n        resizeTextarea(autocompleteWorkNotesTextarea);\n        setConfigAsync({\n            autoCompletes: (_a = {},\n                _a[TextAreaType.WorkNotes] = autocompleteWorkNotesTextarea.value,\n                _a),\n        });\n    });\n    var autocompleteCloseNotesTextarea = document.getElementById(TextBoxIDs.AUTOCOMPLETE_CLOSE_NOTES);\n    autocompleteCloseNotesTextarea.value =\n        (_c = config.autoCompletes[TextAreaType.CloseNotes]) !== null && _c !== void 0 ? _c : \"\";\n    autocompleteCloseNotesTextarea.addEventListener(\"input\", function () {\n        var _a;\n        resizeTextarea(autocompleteCloseNotesTextarea);\n        setConfigAsync({\n            autoCompletes: (_a = {},\n                _a[TextAreaType.CloseNotes] = autocompleteCloseNotesTextarea.value,\n                _a),\n        });\n    });\n    addToSubBar(function (textarea) {\n        if (!Object.values(TextBoxIDs).includes(textarea.id))\n            return null;\n        var resetBtn = makeElement(\"button\", {\n            type: \"button\",\n            className: \"btn btn-default\",\n        }, \"Reset\");\n        resetBtn.addEventListener(\"click\", function () {\n            switch (textarea.id) {\n                case TextBoxIDs.SIGNATURE: {\n                    textarea.value = defaultValues.signature;\n                    textarea.dispatchEvent(new InputEvent(\"input\"));\n                    break;\n                }\n                case TextBoxIDs.AUTOCOMPLETE_COMMENTS: {\n                    textarea.value = defaultValues.autoCompletes[TextAreaType.Comments];\n                    textarea.dispatchEvent(new InputEvent(\"input\"));\n                    break;\n                }\n                case TextBoxIDs.AUTOCOMPLETE_WORK_NOTES: {\n                    textarea.value = defaultValues.autoCompletes[TextAreaType.WorkNotes];\n                    textarea.dispatchEvent(new InputEvent(\"input\"));\n                    break;\n                }\n                case TextBoxIDs.AUTOCOMPLETE_CLOSE_NOTES: {\n                    textarea.value = defaultValues.autoCompletes[TextAreaType.CloseNotes];\n                    textarea.dispatchEvent(new InputEvent(\"input\"));\n                    break;\n                }\n            }\n        });\n        textarea.addEventListener(\"input\", function () {\n            switch (textarea.id) {\n                case TextBoxIDs.SIGNATURE: {\n                    resetBtn.disabled = textarea.value === defaultValues.signature;\n                    break;\n                }\n                case TextBoxIDs.AUTOCOMPLETE_COMMENTS: {\n                    resetBtn.disabled =\n                        textarea.value ===\n                            defaultValues.autoCompletes[TextAreaType.Comments];\n                    break;\n                }\n                case TextBoxIDs.AUTOCOMPLETE_WORK_NOTES: {\n                    resetBtn.disabled =\n                        textarea.value ===\n                            defaultValues.autoCompletes[TextAreaType.WorkNotes];\n                    break;\n                }\n                case TextBoxIDs.AUTOCOMPLETE_CLOSE_NOTES: {\n                    resetBtn.disabled =\n                        textarea.value ===\n                            defaultValues.autoCompletes[TextAreaType.CloseNotes];\n                    break;\n                }\n            }\n        });\n        return resetBtn;\n    });\n    addTextAreaCallback(function (textarea) {\n        return textarea.dispatchEvent(new InputEvent(\"input\"));\n    });\n    configureCheckboxes(config);\n};\nvar configureCheckboxes = function (config) {\n    var enabledCheckboxes = {};\n    for (var key in CheckBoxIDs) {\n        var id = CheckBoxIDs[key];\n        enabledCheckboxes[id] = document.getElementById(id);\n    }\n    // connectCheckboxesToParent(enabledCheckboxes[CheckBoxIDs.ALL], [\n    //   enabledCheckboxes[CheckBoxIDs.DHCP_LOG],\n    //   enabledCheckboxes[CheckBoxIDs.NETDB],\n    //   enabledCheckboxes[CheckBoxIDs.SERVICENOW],\n    // ]);\n    // connectCheckboxesToParent(enabledCheckboxes[CheckBoxIDs.NETDB], [\n    //   enabledCheckboxes[CheckBoxIDs.NETDB_HISTORY_HIGHLIGHT],\n    //   enabledCheckboxes[CheckBoxIDs.NETDB_MAC_LINKING],\n    // ]);\n    connectCheckboxesToParent(enabledCheckboxes[CheckBoxIDs.ALL], // enabledCheckboxes[CheckBoxIDs.SERVICENOW],\n    [\n        enabledCheckboxes[CheckBoxIDs.SERVICENOW_AUTOCOMPLETE],\n        enabledCheckboxes[CheckBoxIDs.SERVICENOW_MACROS],\n        enabledCheckboxes[CheckBoxIDs.SERVICENOW_MARKDOWN],\n        enabledCheckboxes[CheckBoxIDs.SERVICENOW_SMART_TEXT],\n    ]);\n    var resetBtn = document.getElementById(\"enabled-reset\");\n    enabledCheckboxes[CheckBoxIDs.ALL].addEventListener(\"change\", function () {\n        resetBtn.disabled =\n            enabledCheckboxes[CheckBoxIDs.ALL].checked &&\n                !enabledCheckboxes[CheckBoxIDs.ALL].indeterminate;\n    });\n    resetBtn.addEventListener(\"click\", function () {\n        changeCheckboxValues([enabledCheckboxes[CheckBoxIDs.ALL]], true);\n    });\n    // bindCheckbox(enabledCheckboxes[CheckBoxIDs.DHCP_LOG], config, [\n    //   \"enabled\",\n    //   \"dhcp_log\",\n    //   \"ip_links\",\n    // ]);\n    // bindCheckbox(enabledCheckboxes[CheckBoxIDs.NETDB_MAC_LINKING], config, [\n    //   \"enabled\",\n    //   \"netdb\",\n    //   \"mac_links\",\n    // ]);\n    // bindCheckbox(enabledCheckboxes[CheckBoxIDs.NETDB_HISTORY_HIGHLIGHT], config, [\n    //   \"enabled\",\n    //   \"netdb\",\n    //   \"history_highlight\",\n    // ]);\n    bindCheckbox(enabledCheckboxes[CheckBoxIDs.SERVICENOW_AUTOCOMPLETE], config, [\n        \"enabled\",\n        \"servicenow\",\n        \"autocomplete\",\n    ]);\n    bindCheckbox(enabledCheckboxes[CheckBoxIDs.SERVICENOW_MACROS], config, [\n        \"enabled\",\n        \"servicenow\",\n        \"macros\",\n    ]);\n    bindCheckbox(enabledCheckboxes[CheckBoxIDs.SERVICENOW_MARKDOWN], config, [\n        \"enabled\",\n        \"servicenow\",\n        \"markdown\",\n    ]);\n    bindCheckbox(enabledCheckboxes[CheckBoxIDs.SERVICENOW_SMART_TEXT], config, [\n        \"enabled\",\n        \"servicenow\",\n        \"smart_text\",\n    ]);\n};\nvar bindCheckbox = function (checkbox, config, path) {\n    var initialValue = getDeep(config, path, true);\n    changeCheckboxValues([checkbox], initialValue);\n    checkbox.addEventListener(\"change\", function () {\n        setDeep(config, path, checkbox.checked);\n        setConfigAsync(config);\n    });\n};\nvar changeCheckboxValues = function (checkboxes, value) {\n    var e_1, _a;\n    try {\n        for (var checkboxes_1 = __values(checkboxes), checkboxes_1_1 = checkboxes_1.next(); !checkboxes_1_1.done; checkboxes_1_1 = checkboxes_1.next()) {\n            var checkbox = checkboxes_1_1.value;\n            if (value === null) {\n                // Check if anything needs to be changed. If not, continue without\n                // dispatching a change event.\n                if (!checkbox.checked && checkbox.indeterminate)\n                    continue;\n                checkbox.checked = false;\n                checkbox.indeterminate = true;\n            }\n            else {\n                if (checkbox.checked === value && !checkbox.indeterminate)\n                    continue;\n                checkbox.checked = value;\n                checkbox.indeterminate = false;\n            }\n            checkbox.dispatchEvent(new Event(\"change\"));\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (checkboxes_1_1 && !checkboxes_1_1.done && (_a = checkboxes_1.return)) _a.call(checkboxes_1);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n};\nvar connectCheckboxesToParent = function (parent, children) {\n    var e_2, _a;\n    var _loop_1 = function (child) {\n        child.addEventListener(\"change\", function () {\n            var e_3, _a;\n            var expected = child.checked;\n            try {\n                for (var children_2 = (e_3 = void 0, __values(children)), children_2_1 = children_2.next(); !children_2_1.done; children_2_1 = children_2.next()) {\n                    var sibling = children_2_1.value;\n                    if (sibling.checked !== expected || sibling.indeterminate) {\n                        changeCheckboxValues([parent], null);\n                        return;\n                    }\n                }\n            }\n            catch (e_3_1) { e_3 = { error: e_3_1 }; }\n            finally {\n                try {\n                    if (children_2_1 && !children_2_1.done && (_a = children_2.return)) _a.call(children_2);\n                }\n                finally { if (e_3) throw e_3.error; }\n            }\n            changeCheckboxValues([parent], expected);\n        });\n    };\n    try {\n        for (var children_1 = __values(children), children_1_1 = children_1.next(); !children_1_1.done; children_1_1 = children_1.next()) {\n            var child = children_1_1.value;\n            _loop_1(child);\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (children_1_1 && !children_1_1.done && (_a = children_1.return)) _a.call(children_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    parent.addEventListener(\"change\", function () {\n        if (parent.indeterminate)\n            return;\n        changeCheckboxValues(children, parent.checked);\n    });\n};\nvar resizeTextarea = function (textarea) {\n    var data = getTextAreaData(textarea);\n    if (!data)\n        return;\n    var top = calculateTextPosition(textarea, textarea.value, \"\\u200b\").top;\n    textarea.style.height =\n        top +\n            parseFloat(data.elementStyles.borderTopWidth || \"0\") +\n            parseFloat(data.elementStyles.borderBottomWidth || \"0\") +\n            \"px\";\n};\nexport default init;\n","// Module\nvar code = \"<form id=\\\"sts-service-now-plugin-form\\\"> <h3>STS ServiceNow Plugin Settings</h3> <p> You can change different settings for the plugin below. Most settings will save right away when you change them. You can reset settings back to their default value by clicking the <button tabindex=\\\"-1\\\" style=\\\"pointer-events:none\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\"> Reset </button> button. </p> <fieldset id=\\\"enabled\\\" class=\\\"form-group\\\"> <legend><h4 id=\\\"enabled\\\">Enabled</h4></legend> <p>Enable or disable different parts of the plugin.</p> <table> <tr> <td> <div class=\\\"form-field\\\"> <label for=\\\"enabled-all\\\"> Everything: <input type=\\\"checkbox\\\" id=\\\"enabled-all\\\"/> </label> </div> <small> Enables/disables all of the plugin's features at once. </small> </td> </tr> <tr> <td> <table> <tr> <td> <div class=\\\"form-field\\\"> <label for=\\\"enabled-service-now-autocomplete\\\"> Autocomplete Templates: <input type=\\\"checkbox\\\" id=\\\"enabled-service-now-autocomplete\\\"/> </label> </div> <small> Enables/disables whether autocomplete templates will be suggested when you insert the cursor into an empty textbox. </small> </td> </tr> <tr> <td> <div class=\\\"form-field\\\"> <label for=\\\"enabled-service-now-macros\\\"> Macros: <input type=\\\"checkbox\\\" id=\\\"enabled-service-now-macros\\\"/> </label> </div> <small> Enables/disables whether the Apply Macro button will be shown underneath textboxes. </small> </td> </tr> <tr> <td> <div class=\\\"form-field\\\"> <label for=\\\"enabled-service-now-markdown\\\"> Markdown: <input type=\\\"checkbox\\\" id=\\\"enabled-service-now-markdown\\\"/> </label> </div> <small> Enables/disables whether Markdown (e.g., <strong>**bold**</strong> or <em>*italicized*</em> text) will be turned into fancy text when you respond to a ticket or left as plain text with no formatting. </small> </td> </tr> <tr> <td> <div class=\\\"form-field\\\"> <label for=\\\"enabled-service-now-smart-text\\\"> Smart Text: <input type=\\\"checkbox\\\" id=\\\"enabled-service-now-smart-text\\\"/> </label> </div> <small> Enables/disables whether MAC addresses, IP addresses, etc. will be underlined and show a menu when you hover over them in tickets. </small> </td> </tr> </table> </td> </tr> </table> <div style=\\\"display:flex;justify-content:flex-end\\\"> <button id=\\\"enabled-reset\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\"> Reset </button> </div> </fieldset> <fieldset id=\\\"signature-fieldset\\\" class=\\\"form-group\\\"> <legend><h4 id=\\\"email-signature\\\">Email Signature</h4></legend> <p> This controls the text that gets inserted at the end of emails when you use a macro. It gets inserted by the <code>{{current_user.signature}}</code> replacement (like at the end of the <a href=\\\"#autocomplete\\\">Autocomplete</a> items below). </p> <div class=\\\"form-field\\\"> <textarea id=\\\"signature-textarea\\\" class=\\\"form-control\\\" placeholder=\\\"Enter a signature for the end of emails.\\\"></textarea> </div> </fieldset> <fieldset id=\\\"autocomplete-fieldset\\\" class=\\\"form-group\\\"> <legend><h4 id=\\\"autocomplete\\\">Autocomplete</h4></legend> <p> This controls the text that shows up when you put the cursor in a textbox. It lets you quickly insert text more quickly as a template for all tickets. Leaving it blank will prevent any autocomplete from showing up. </p> <div class=\\\"form-field\\\"> <label for=\\\"autocomplete-comments-textarea\\\"> <h5 id=\\\"additional-comments-autocomplete\\\"> Additional Comments Autocomplete </h5> </label> <textarea id=\\\"autocomplete-comments-textarea\\\" class=\\\"form-control\\\" placeholder=\\\"No autocomplete template\\\"></textarea> </div> <div class=\\\"form-field\\\"> <label for=\\\"autocomplete-work_notes-textarea\\\"> <h5 id=\\\"work-notes-autocomplete\\\">Work Notes Autocomplete</h5> </label> <textarea id=\\\"autocomplete-work_notes-textarea\\\" class=\\\"form-control\\\" placeholder=\\\"No autocomplete template\\\"></textarea> </div> <div class=\\\"form-field\\\"> <label for=\\\"autocomplete-close_notes-textarea\\\"> <h5 id=\\\"close-notes-autocomplete\\\">Close Notes Autocomplete</h5> </label> <textarea id=\\\"autocomplete-close_notes-textarea\\\" class=\\\"form-control\\\" placeholder=\\\"No autocomplete template\\\"></textarea> </div> </fieldset> <p style=\\\"text-align:center\\\"> Found a bug? Please report it! You can <a href=\\\"https://github.com/FiggChristian/STS-ServiceNow-Plugin/issues\\\">open a new GitHub issue</a> or <a href=\\\"mailto:figgchristian@gmail.com?subject=STS ServiceNow Plugin Issue&body=Please include a description of the issue and how to reproduce it.\\\">email me</a>. </p> </form> \";\n// Exports\nexport default code;","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { getConfigAsync } from \"./config\";\nimport initMarkdown from \"./markdown\";\nimport initAutoComplete from \"./autocomplete\";\nimport initReplacements from \"./replacements\";\nimport initMacros from \"./macros\";\nimport initSmartText from \"./smarttext\";\nimport initMyDevices from \"./mydevices\";\nimport initSettingsInjector from \"./settings/injector\";\nimport initNetDB from \"./netdb\";\nimport initDHCPLog from \"./dhcplog\";\nimport initSettings from \"./settings\";\nimport { replacementByTrigger, replacements } from \"./replacements/data\";\nimport wait from \"./helpers/wait\";\nimport constants from \"./constants.json\";\n/**\n * A Promise that resolves when the window has loaded.\n * @returns A Promise that resolves when the window has loaded.\n */\nvar windowHasLoaded = new Promise(function (resolve) {\n    // Resolve right away if the document is already loaded.\n    if (window.document.readyState === \"complete\") {\n        resolve();\n    }\n    // Otherwise, wait for window.onload, or 200 ms, whichever comes first.\n    window.addEventListener(\"load\", function () {\n        resolve();\n    });\n    wait(200).then(resolve);\n});\nvar initServiceNowExtension = function (config) { return __awaiter(void 0, void 0, void 0, function () {\n    var signatureReplacement, path;\n    return __generator(this, function (_a) {\n        signatureReplacement = {\n            triggers: [\"current_user.signature\"],\n            value: config.signature,\n            description: \"Your signature for the end of tickets\",\n        };\n        replacements.push(signatureReplacement);\n        replacementByTrigger[\"current_user.signature\"] = signatureReplacement;\n        path = location.pathname.substring(1).split(\"/\");\n        if (path[0] === constants.EXTENSION_PREFIX) {\n            if (path[1].startsWith(\"settings\")) {\n                initSettings(config);\n                return [2 /*return*/];\n            }\n        }\n        initMarkdown(config);\n        initAutoComplete(config);\n        initReplacements(config);\n        initMacros(config);\n        initSmartText(config);\n        initSettingsInjector(config);\n        return [2 /*return*/];\n    });\n}); };\nvar initExtension = function () { return __awaiter(void 0, void 0, void 0, function () {\n    var _a, config;\n    return __generator(this, function (_b) {\n        switch (_b.label) {\n            case 0: return [4 /*yield*/, Promise.all([getConfigAsync(), windowHasLoaded])];\n            case 1:\n                _a = __read.apply(void 0, [_b.sent(), 1]), config = _a[0];\n                if (!(location.hostname === \"mydevices.stanford.edu\")) return [3 /*break*/, 2];\n                initMyDevices(config);\n                return [3 /*break*/, 6];\n            case 2:\n                if (!(location.hostname === \"netdb.stanford.edu\")) return [3 /*break*/, 3];\n                initNetDB(config);\n                return [3 /*break*/, 6];\n            case 3:\n                if (!(location.hostname === \"day.stanford.edu\")) return [3 /*break*/, 4];\n                initDHCPLog(config);\n                return [3 /*break*/, 6];\n            case 4:\n                if (!(location.hostname === \"stanford.service-now.com\")) return [3 /*break*/, 6];\n                return [4 /*yield*/, initServiceNowExtension(config)];\n            case 5:\n                _b.sent();\n                _b.label = 6;\n            case 6: return [2 /*return*/];\n        }\n    });\n}); };\ninitExtension();\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","stylesInDOM","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","sourceMap","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_i","_index","element","document","createElement","setAttributes","attributes","insert","styleElement","nonce","setAttribute","insertStyleElement","styleTagTransform","apply","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","appendChild","createTextNode","__esModule","default","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","nc","TextAreaType","TicketType","ServiceNowUITab","dedent","string","lines","split","longestCommonPrefix","trim","prefix","substring","trimLeft","shorter","longer","i_1","pop","shift","e_1","_a","e_2","_b","__values","s","iterator","m","next","done","TypeError","namespaces","name","icon","replacements","triggers","exec","input","Incident","getElementById","SupportRequest","Task","getTicketType","indexOf","description","trimStart","number","replace","NOW","window","user","firstName","user_display_name","elem","querySelector","getAttribute","lastName","last","now","Date","month","getMonth","day","getDate","year","getFullYear","hour","getHours","min","getMinutes","replacementByTrigger","replacements_1","replacements_1_1","replacement","_c","_d","trigger","toLowerCase","e_2_1","error","return","e_1_1","assertNotNull","message","Error","isInstance","object","type","Element","isInstanceFromName","currWindow","parent","cls_1","cls","top","codePoint","codePointAt","ELEMENT_QUERIES","waitForElements","queries","callback","query","attribute","elementList","Array","from","querySelectorAll","filter","hasAttribute","mutationObserverCallback","_loop_1","elementList_1","elementList_1_1","MutationObserver","observe","childList","subtree","__read","e","ar","TEXTAREA_DATA","Map","TEXTAREA_DATA_GENERATORS","TEXTAREA_CALLBACKS","getTextAreaData","textarea","HTMLTextAreaElement","addTextAreaData","TEXTAREA_DATA_1","TEXTAREA_DATA_1_1","textareaData","assign","addTextAreaCallback","TEXTAREA_DATA_2","TEXTAREA_DATA_2_1","generateTextAreaData","e_3","TEXTAREA_DATA_GENERATORS_1","TEXTAREA_DATA_GENERATORS_1_1","generator","e_3_1","textareas","e_4","e_5","textareas_1","textareas_1_1","set","TEXTAREA_CALLBACKS_1","TEXTAREA_CALLBACKS_1_1","e_5_1","e_4_1","makeElement","elementName","attributesOrInnerHTML","innerHTML","attributeName","translatedName","escapeHTML","TicketState","AssignmentGroup","clones","clone","cloneNode","head","textContent","characterData","calculateTextPosition","preText","selectedText","updateMirrorStyles","mirror","innerText","selection","getBoundingClientRect","height","left","offsetLeft","elementStyles","style","width","parseFloat","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontStyle","fontFamily","fontSize","fontWeight","letterSpacing","lineHeight","setDataList","datalist","thisArg","_arguments","ac","resolvedValue","xml","name2ID","ga_1","body","f","y","t","g","_","label","sent","trys","ops","verb","v","op","step","__generator","HTMLInputElement","AJAXReferenceCompleter","max","resolveReplacements","cacheGet","parseXML","searchChars","GlideAjax","PROCESSOR","addSysParms","addDependentValue","addRefQualValues","addTargetTable","addAdditionalValues","addAttributes","setQueryString","Promise","resolve","getXML","response","responseXML","cachePut","referenceSelect","blur","P","reject","fulfilled","rejected","then","items","_processItems","_processRecents","items_1","items_1_1","ms","setTimeout","__spreadArray","to","pack","arguments","l","slice","getTrimEnd","trimmed","trimEnd","getFormFieldIndices","isArray","textBetweenFormFields","betweenText","startsWith","indices","lastIndex","nextText","nextWhitespace","trimmedNextText","nextIndex","offsetNextIndex","j","prevWhitespace","setTextAreaTooltip","tooltipHTML","closeCallback","tooltipCloser","tooltip","display","lastElementChild","withCodeDelimiters","text","withReplacementDelimiters","turnNoIndexInto","otherValue","path","location","pathname","showTab","tab","tabBar","re","RegExp","tabBtn","children","find","HTMLElement","match","firstElementChild","click","showTextArea","isNewTicket","getIsNewTicket","CloseNotes","ClosureInfo","Comments","Notes","multipleTextFieldContainer","offsetParent","checkboxes","console","warn","checkbox","parentElement","includes","checked","WorkNotes","CommentsAndWorkNotes","singleTextFieldContainer","getComputedStyle","className","addEventListener","preventDefault","stopPropagation","subBar","insertBefore","nextElementSibling","offsetHeight","suppressInputs","formFieldIndex","isTabbingFormFields","characterCounter","hiddenCharacterCounter","characterCounterFunction","characterCounterObserverCallback","observer","_e","_f","actualCounter","classList","contains","maxChars","disconnect","hiddenCounter","charCount","leftover","add","nextSibling","liveRegion","liveRegionClone","code","wasTabbingFormFields","isReplacing","shiftKey","Math","ceil","floor","caretIndices","setSelectionRange","handleCloseFormTooltip","prevNode","decorator_1","bottom","data_1","attributeFilter","previousElementSibling","activeElement","caretPos","selectionStart","tabFieldIndices","currentIndex","fieldIndex","start","end","getTextAreaType","ticketType","dataset","streamTextInput","writeToTextArea","passedCaretPositions","caretPositions","focus","insertHTMLAllowed","queryCommandSupported","queryCommandEnabled","insertTextAllowed","startIndex","endIndex","hasBeenReplaced","replacementValue","execCommand","resolveReplacementsRecursive","resolvedText","sort","b","level","_loop_2","nestedString","expandString","expansion","extraCaretPositions","gotExpanded","leftCaretPos","rightCaretPos","newLeftPos","newRightPos","lastIndexOf","replacedValue","unchanged","colonIndex","parameters","parseReplacementParameters","closingQuote","params","addToSubBar","interceptStyles","oldSelector","newSelector","interceptStylesWithinWindow","stylesheets","styleSheets","_loop_3","stylesheet","ownerNode","HTMLStyleElement","replaceSheetSelector","HTMLLinkElement","styleElem","sheet","nodeName","stylesheets_1","stylesheets_1_1","mutationRecords","mutationRecords_1","mutationRecords_1_1","record","_loop_4","node","rel","addedNodes","newRules","oldRules","cssRules","rule","constructor","oldRules_1","oldRules_1_1","selectorText","replaceAll","ticketStateToString","state","New","Active","Pending","Resolved","URLSearchParams","search","getTextAreaOfType","_g","_h","_j","multipleEntries","mappedMin","minValue","Infinity","minItem","getDisplayOrderForNetDB","ordering","append","joinObjects","target","defaultValues","signature","autoCompletes","enabled","servicenow","autocomplete","macros","markdown","smart_text","netdb","mac_links","history_highlight","node_history_links","dhcp_log","ip_links","memo","getConfig","stringified","localStorage","getItem","parse","parsed","keys","Set","has","config","ret","options_1","options_1_1","option","setItem","getConfigAsync","setConfigAsync","defaults","async","baseUrl","breaks","extensions","gfm","headerIds","headerPrefix","highlight","langPrefix","mangle","pedantic","renderer","sanitize","sanitizer","silent","smartypants","tokenizer","walkTokens","xhtml","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","ch","html","encode","test","unescapeTest","charAt","String","fromCharCode","parseInt","caret","edit","regex","opt","val","getRegex","nonWordAndColonTest","originIndependentUrl","cleanUrl","href","prot","decodeURIComponent","baseUrls","justDomain","rtrim","relativeBase","protocol","domain","resolveUrl","encodeURI","noopTest","merge","splitCells","tableRow","cells","offset","str","escaped","curr","c","invert","suffLen","currChar","checkSanitizeDeprecation","repeatString","pattern","outputLink","cap","link","raw","lexer","title","inLink","token","tokens","inlineTokens","Tokenizer","space","src","rules","block","newline","codeBlockStyle","fences","matchIndentToCode","indentToCode","matchIndentInNode","indentInNode","indentCodeCompensation","lang","heading","depth","inline","hr","blockquote","blockTokens","istask","ischecked","indent","blankLine","endsWithBlankLine","line","nextLine","rawLine","itemContents","endEarly","bull","isordered","ordered","loose","itemRegex","nextBulletRegex","hrRegex","fencesBeginRegex","headingBeginRegex","task","trimRight","spacers","hasMultipleLineBreaks","every","chars","lineBreaks","char","pre","def","tag","table","header","align","rows","row","lheading","paragraph","escape","inRawBlock","trimmedUrl","rtrimSlash","lastParenIndex","findClosingBracket","linkLen","_escapes","reflink","links","nolink","emStrong","maskedSrc","prevChar","lDelim","nextChar","punctuation","lLength","rDelim","rLength","delimTotal","midDelimTotal","endReg","rDelimAst","rDelimUnd","codespan","hasNonSpaceChars","hasSpaceCharsOnBothEnds","br","del","autolink","url","prevCapZero","_backpedal","inlineText","_paragraph","_label","_title","bullet","listItemStart","_tag","_comment","normal","reflinkSearch","out","charCodeAt","random","_punctuation","blockSkip","escapedEmSt","_scheme","_email","_attribute","_href","strong","middle","endAst","endUnd","em","_extended_email","Lexer","create","inlineQueue","static","lex","lastToken","cutSrc","lastParagraphClipped","leading","tabs","repeat","some","extTokenizer","startBlock","tempSrc","tempStart","forEach","getStartIndex","errMsg","keepPrevChar","startInline","Renderer","infostring","quote","slugger","slug","listitem","tablerow","tablecell","flags","image","TextRenderer","Slugger","seen","serialize","getNextSafeSlug","originalSlug","isDryRun","occurenceAccumulator","dryrun","Parser","textRenderer","parseInline","l2","l3","cell","itemBody","renderers","parser","unshift","marked","err","pending","onError","all","catch","setOptions","newDefaults","getDefaults","use","args","opts","childTokens","hasExtensions","ext","prevRenderer","prevTokenizer","values","lexInline","MAC_ADDRESS_REGEX","IP_ADDRESS_REGEX","NODE_NAME_REGEX","TICKET_REGEX","OUIsPopulated","promise","timeout","primaryFailed","fallback","fetch","valueOf","finished","json","contents","getOUIObject","OUIs","components","digits","isTextNode","nodeType","Node","TEXT_NODE","isElementNode","ELEMENT_NODE","replaceSmartText","macAddressMatch","ipAddressMatch","nodeNameMatch","ticketMatch","firstMatch","preText_1","preNode","previousSibling","prevWhiteSpaceIndex","whitespaceChar","nextWhiteSpaceIndex","macWord","isURL","URL","formatted_1","toUpperCase","macSpan","input_1","anchorText_1","OUISpan_1","OUI","macAddress","getOUI","color","navigator","clipboard","writeText","formatted_2","ipSpan","input_2","formatted_3","nodeSpan","input_3","formatted_4","ticketSpan","input_4","shadowRoot","root","DOCUMENT_FRAGMENT_NODE","isDocumentFragmentNode","HTMLAnchorElement","hostname","childNodes","hasInitialized","REPLACEMENT_SUBSTYLES","tr","img","changeTextAreaMarkdownPreviewerVisibility","visible","isPreviewingMarkdown","previewerBtn","child","markdownPreviewer","parseMarkdown","translated","closer","paddingTop","paddingBottom","decorator","e_6","codeIndex","filteredText","codeBlocks","codeBlock","codeInstances","startIndex_1","smartLists","textTokens","insideCodeValue","outsideCodeValue","insideCodePenalty","outsideCodePenalty","parsedFilteredText","firstCode","stylesToIgnore","textTokens_1","textTokens_1_1","stylesToIgnore_1","stylesToIgnore_1_1","elemName","delete","e_6_1","size","stylesheetText","firstIndex","isFinite","trailingText","insideCodePenalties","outsideCodePenalties","insideStayPenalty","insideTransitionPenalty","outsideStayPenalty","outsideTransitionPenalty","shortenedText","isInsideCodeBlock","alt","prevMatch","newMatch","newSrc","rowMatch","used","rowTokens","rows_1","rows_1_1","before","after","rows_2","rows_2_1","buttons","button","previousOnClick","removeAttribute","opacity","position","pointerEvents","tabIndex","getElementsByTagName","atLeastOneChanged","parsedValue","prepareTextAreasForTicketSave","buttons_1","buttons_1_1","attachShadow","mode","previewBtn","newValue","checkForAutoComplete","closedAutoComplete","previousHeight","isAutoCompleting","activeAutoComplete","placeholder","previousPlaceholder","autoComplete","resolvedAutoComplete","newHeight","borderTopWidth","borderBottomWidth","updateAutoFiller","incompleteTriggerName","startDelimIndex","endDelimIndex","newLineIndex","getIncompleteTriggerName","replacementAutoFiller","replacementAutoFillerFocusedIndex","whiteSpaceIndex","caretPosition","scrollLeft","offsetTop","scrollTop","populateAutoFiller","fragment","createDocumentFragment","namespaces_1","namespaces_1_1","namespace_object","li","configureListItem","searchQuery","searchableReplacements","triggerSubstringIndex_1","periodIndex","namespace_1","matchingNamespace_1","namespaceObject","searchWords","word","searchWords_1","searchWords_1_1","replacementTriggerIndices","searchableReplacements_1","searchableReplacements_1_1","prevIndex","newIndex","orderedReplacements","orderedReplacements_1","orderedReplacements_1_1","focusAutoFillItem","selectAutoFillerItem","focusedItem","scrollIntoViewIfNeeded","currentTarget","newCaretPos","previousStartDelimIndex","nextStartDelimIndex","nextEndDelimIndex","insertClosing","selectionEnd","fields","additional_comments","close_notes","assignment_group","Escalation","assigned_to","work_notes","ResNet","ITOC","applyMacro","macro","fields_1","fields_1_1","rawValue","changeMacroModalVisibility","dropdown","HTMLSelectElement","flatMap","HTMLOptGroupElement","values_1","values_1_1","dispatchEvent","Event","setDropdown","macroModalComponents","shownMacros","getMacroIndex","attr","isNaN","closeModalOnEscape","populateMacros","macroList","doneMacros","doesNotMatch","macroTab","role","focusMacroItem","clickTab","ariaSelected","leftPanel","rightPanel","previewBody","macroIndex","fieldsContainer","fieldsIndex","fields_2","fields_2_1","field","fieldName","fieldValue","container","backdrop","removeEventListener","pairs","pairs_1","pairs_1_1","pair","searchForm","action","authToken","lists","lists_1","lists_1_1","NON_HEX_REGEX","td","address","initMacLinks","initNodeHistoryLinks","prevURL","isQuickSearch","isFullSearch","mac","innerKey","innerValue","_l","_m","backgroundColor","initHistoryHighlight","colspan","label_1","table_1","initIPFiltering","host","allPres","normalize","Text","nodeValue","fullMatch","initIPLinking","hash","scrollIntoView","initTypeLinking","TextBoxIDs","CheckBoxIDs","bindCheckbox","initialValue","defaultValue","current","getDeep","changeCheckboxValues","setDeep","checkboxes_1","checkboxes_1_1","indeterminate","connectCheckboxesToParent","expected","children_2","children_2_1","sibling","children_1","children_1_1","resizeTextarea","styles","signatureTextarea","SIGNATURE","autocompleteCommentsTextarea","AUTOCOMPLETE_COMMENTS","autocompleteWorkNotesTextarea","AUTOCOMPLETE_WORK_NOTES","autocompleteCloseNotesTextarea","AUTOCOMPLETE_CLOSE_NOTES","resetBtn","InputEvent","disabled","enabledCheckboxes","ALL","SERVICENOW_AUTOCOMPLETE","SERVICENOW_MACROS","SERVICENOW_MARKDOWN","SERVICENOW_SMART_TEXT","configureCheckboxes","windowHasLoaded","readyState","initServiceNowExtension","signatureReplacement","cb","acceptAutoComplete","relatedTarget","btn","modalRoot","createMacroModal","comments","comments_1","comments_1_1","comment","overflow","HTMLLIElement","streams","streams_1","streams_1_1"],"sourceRoot":""}